var myFormatter = {                                                                                                                                                                                                                                            
	formatColor: function (v) {                                                                                                                                                                                                                                   
		//		                                                                                                                                                                                                                                                         
		this.removeStyleClass("red");                                                                                                                                                                                                                                
		this.removeStyleClass("green");                                                                                                                                                                                                                              
		if (v !== null && v !== undefined) {                                                                                                                                                                                                                         
			var v1 = v.split("/")[0];                                                                                                                                                                                                                                   
			var v2 = v.split("/")[1];                                                                                                                                                                                                                                   
			if (v1 === "") {                                                                                                                                                                                                                                            
				v1 = 0.00;                                                                                                                                                                                                                                                 
			}                                                                                                                                                                                                                                                           
			if (v2 === undefined) {                                                                                                                                                                                                                                     
				v2 = 0.00;                                                                                                                                                                                                                                                 
			}                                                                                                                                                                                                                                                           
			if (v1 !== "" && v2 !== "") {                                                                                                                                                                                                                               
				var b1 = parseFloat(v1);                                                                                                                                                                                                                                   
				var b2 = parseFloat(v2);                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
				if (b1 > b2) {                                                                                                                                                                                                                                             
					this.addStyleClass("red");                                                                                                                                                                                                                                
				} else if (b1 < b2) {                                                                                                                                                                                                                                      
					this.addStyleClass("green");                                                                                                                                                                                                                              
				} else if (v1 === v2) {                                                                                                                                                                                                                                    
					this.addStyleClass("yellow");                                                                                                                                                                                                                             
				}                                                                                                                                                                                                                                                          
			} else if (v1 === v2) {                                                                                                                                                                                                                                     
				this.addStyleClass("yellow");                                                                                                                                                                                                                              
			}                                                                                                                                                                                                                                                           
		}                                                                                                                                                                                                                                                            
		return v;                                                                                                                                                                                                                                                    
	},                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
	saldo: function (v) {                                                                                                                                                                                                                                         
		//		                                                                                                                                                                                                                                                         
		var a = parseFloat(v);                                                                                                                                                                                                                                       
		this.removeStyleClass("redSaldo");                                                                                                                                                                                                                           
		this.removeStyleClass("greenSaldo");                                                                                                                                                                                                                         
		if (v > 0) {                                                                                                                                                                                                                                                 
			this.addStyleClass("greenSaldo");                                                                                                                                                                                                                           
		} else if (v < 0) {                                                                                                                                                                                                                                          
			this.addStyleClass("redSaldo");                                                                                                                                                                                                                             
		}                                                                                                                                                                                                                                                            
		return v;                                                                                                                                                                                                                                                    
	}                                                                                                                                                                                                                                                             
};                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
sap.ui.define([                                                                                                                                                                                                                                                
	"sap/ui/core/mvc/Controller",                                                                                                                                                                                                                                 
	"com/vistex/zagriplan/model/models",                                                                                                                                                                                                                          
	"sap/ui/model/json/JSONModel",                                                                                                                                                                                                                                
	"sap/ui/Device",                                                                                                                                                                                                                                              
	"sap/ui/core/routing/History",                                                                                                                                                                                                                                
	"sap/m/MessageToast",                                                                                                                                                                                                                                         
	"sap/m/MessageBox",                                                                                                                                                                                                                                           
	'sap/ui/export/Spreadsheet',                                                                                                                                                                                                                                  
	'sap/ui/core/format/DateFormat',                                                                                                                                                                                                                              
], function (Controller, models, JSONModel, Device, History, MessageToast, MessageBox,Spreadsheet, DateFormat) {                                                                                                                                               
	"use strict";                                                                                                                                                                                                                                                 
	return Controller.extend("com.vistex.zagriplan.controller.Detail1", {                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		onInit: function () {                                                                                                                                                                                                                                        
			this.oModel = models.callBackEnd();                                                                                                                                                                                                                         
			this.getOwnerComponent().getRouter().getRoute("Detail1").attachPatternMatched(this._onRouteMatched, this);                                                                                                                                                  
			//			var f = new Date();                                                                                                                                                                                                                                    
			this.oView.byId("idCalendar").setStartDate(new Date());                                                                                                                                                                                                     
			this.oView.byId("idCalendar").fireStartDateChange();                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		onFullScreen: function (oEvent) {                                                                                                                                                                                                                            
			switch (oEvent.getSource().sId.split('-')[2]) {                                                                                                                                                                                                             
			case "idFull":                                                                                                                                                                                                                                              
				this.getView().getParent().getParent().setMode(sap.m.SplitAppMode.HideMode);                                                                                                                                                                               
				this.oView.byId("idFull").setVisible(false);                                                                                                                                                                                                               
				this.oView.byId("idExit").setVisible(true);                                                                                                                                                                                                                
				break;                                                                                                                                                                                                                                                     
			case "idExit":                                                                                                                                                                                                                                              
				this.getView().getParent().getParent().setMode(sap.m.SplitAppMode.ShowHideMode);                                                                                                                                                                           
				this.oView.byId("idExit").setVisible(false);                                                                                                                                                                                                               
				this.oView.byId("idFull").setVisible(true);                                                                                                                                                                                                                
				break;                                                                                                                                                                                                                                                     
			default:                                                                                                                                                                                                                                                    
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		createColumnConfig: function () {                                                                                                                                                                                                                            
			return [{                                                                                                                                                                                                                                                   
				label: 'Classe',                                                                                                                                                                                                                                           
				property: 'Classe',                                                                                                                                                                                                                                        
				//					width: '300',                                                                                                                                                                                                                                       
				type: 'string'                                                                                                                                                                                                                                             
					// scale: 0                                                                                                                                                                                                                                               
			}, {                                                                                                                                                                                                                                                        
				label: 'Centro de Custo',                                                                                                                                                                                                                                  
				property: 'CentroCusto',                                                                                                                                                                                                                                   
				type: 'string',                                                                                                                                                                                                                                            
				//					width: '150'                                                                                                                                                                                                                                        
			}, {                                                                                                                                                                                                                                                        
				label: 'Ano/Mes',                                                                                                                                                                                                                                          
				property: 'AnoMes',                                                                                                                                                                                                                                        
				type: 'string',                                                                                                                                                                                                                                            
				//					width: '80'                                                                                                                                                                                                                                         
			}, {                                                                                                                                                                                                                                                        
				label: 'Material',                                                                                                                                                                                                                                         
				property: 'Material',                                                                                                                                                                                                                                      
				type: 'string',                                                                                                                                                                                                                                            
				//					width: '200'                                                                                                                                                                                                                                        
			}, {                                                                                                                                                                                                                                                        
				label: 'Quantidade',                                                                                                                                                                                                                                       
				property: 'Quantidade',                                                                                                                                                                                                                                    
				type: 'string',                                                                                                                                                                                                                                            
				//					width: '50'					                                                                                                                                                                                                                                    
			},                                                                                                                                                                                                                                                          
			 {                                                                                                                                                                                                                                                          
				label: 'Versao',                                                                                                                                                                                                                                           
				property: 'Versao',                                                                                                                                                                                                                                        
				type: 'string',                                                                                                                                                                                                                                            
				//					width: '50'					                                                                                                                                                                                                                                    
			},                                                                                                                                                                                                                                                          
			 {                                                                                                                                                                                                                                                          
				label: 'Budget',                                                                                                                                                                                                                                           
				property: 'Budget',                                                                                                                                                                                                                                        
				type: 'string',                                                                                                                                                                                                                                            
				//					width: '50'					                                                                                                                                                                                                                                    
			}];                                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
		onExport: function () {                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
			var that = this;                                                                                                                                                                                                                                            
			var oFilters = [];                                                                                                                                                                                                                                          
			var versionValue = this.getView().byId("VersionId").getValue();                                                                                                                                                                                             
			var messageValidation = "Informar a vers?o";                                                                                                                                                                                                                
			var msgTitle = "Em forma??o";                                                                                                                                                                                                                               
			if(versionValue === ""){                                                                                                                                                                                                                                    
					MessageBox.show(messageValidation, {                                                                                                                                                                                                                      
					title: msgTitle,                                                                                                                                                                                                                                          
					icon: MessageBox.Icon.INFORMATION                                                                                                                                                                                                                         
				});                                                                                                                                                                                                                                                        
				                                                                                                                                                                                                                                                           
			} else {                                                                                                                                                                                                                                                    
			var acnum = sap.ui.getCore().dadosMaster.Acnum;                                                                                                                                                                                                             
			var werks = sap.ui.getCore().dadosMaster.Werks;                                                                                                                                                                                                             
			var safraRef = sap.ui.getCore().dadosMaster.Datab.toISOString().substr(0, 4) + sap.ui.getCore().dadosMaster.Datab.toISOString().substr(                                                                                                                     
				5, 2) + sap.ui.getCore().dadosMaster.Datab.toISOString().substr(8, 2);                                                                                                                                                                                     
			var safraRefFim = sap.ui.getCore().dadosMaster.Datbi.toISOString().substr(0, 4) + sap.ui.getCore().dadosMaster.Datbi.toISOString().substr(                                                                                                                  
					5, 2) + sap.ui.getCore().dadosMaster.Datbi.toISOString().substr(8, 2);                                                                                                                                                                                    
			oFilters.push(new sap.ui.model.Filter("Acnum", "EQ", acnum));                                                                                                                                                                                               
			oFilters.push(new sap.ui.model.Filter("Werks", "EQ", werks));                                                                                                                                                                                               
			oFilters.push(new sap.ui.model.Filter("Datab", "EQ", safraRef));                                                                                                                                                                                            
			oFilters.push(new sap.ui.model.Filter("Datbi", "EQ", safraRefFim));                                                                                                                                                                                         
			//oFilters.push(new sap.ui.model.Filter("Versao", "EQ", versionValue));                                                                                                                                                                                     
			//Sequeira                                                                                                                                                                                                                                                  
			oFilters.push(new sap.ui.model.Filter("VersaoCusto", "EQ", versionValue));                                                                                                                                                                                  
			oFilters.push(new sap.ui.model.Filter("Versao", "EQ", that.myversion));                                                                                                                                                                                     
			//Sequeira                                                                                                                                                                                                                                                  
			this.oModel.read("/GeraExcelSet", {                                                                                                                                                                                                                         
				filters: oFilters,                                                                                                                                                                                                                                         
				success: function (oData) {                                                                                                                                                                                                                                
					var aCols, aProducts, oSettings, oSheet;                                                                                                                                                                                                                  
					var json = new JSONModel();                                                                                                                                                                                                                               
					json.setData(oData.results);                                                                                                                                                                                                                              
					aCols = that.createColumnConfig();                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
					// });                                                                                                                                                                                                                                                    
					// aProducts = that.oView.byId("idTableResumo").getModel().getProperty("/");                                                                                                                                                                              
                                                                                                                                                                                                                                                               
					oSettings = {                                                                                                                                                                                                                                             
						workbook: {                                                                                                                                                                                                                                              
							columns: aCols                                                                                                                                                                                                                                          
						},                                                                                                                                                                                                                                                       
						dataSource: json.getData()                                                                                                                                                                                                                               
					};                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
					oSheet = new Spreadsheet(oSettings);                                                                                                                                                                                                                      
					oSheet.build()                                                                                                                                                                                                                                            
						.then(function () {                                                                                                                                                                                                                                      
							//					MessageToast.show('Arquivo exportado com sucesso');                                                                                                                                                                                              
						})                                                                                                                                                                                                                                                       
						.finally(function () {                                                                                                                                                                                                                                   
							oSheet.destroy();                                                                                                                                                                                                                                       
						});                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
}                                                                                                                                                                                                                                                              
		},                                                                                                                                                                                                                                                           
		onSetDaysTable: function () {                                                                                                                                                                                                                                
			var that = this;                                                                                                                                                                                                                                            
			var oDateFormat = DateFormat.getDateInstance({                                                                                                                                                                                                              
				pattern: "yyyyMMdd"                                                                                                                                                                                                                                        
			});                                                                                                                                                                                                                                                         
			var date = oDateFormat.format(new Date());                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
			/*	//	var date = new Date().toLocaleDateString();                                                                                                                                                                                                           
			if (navigator.language === "en-US") {                                                                                                                                                                                                                       
				date = oDateFormat.format(new Date());                                                                                                                                                                                                                     
				/*var day = date.substr(3, 2);                                                                                                                                                                                                                             
				var month = date.substr(0, 2);                                                                                                                                                                                                                             
				var year = date.substr(6, 4);                                                                                                                                                                                                                              
*/                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
			date = oDateFormat.format(new Date());                                                                                                                                                                                                                      
			/*	year = date.substr(5);                                                                                                                                                                                                                                   
				month = date.substr(0,1);                                                                                                                                                                                                                                  
			   day = 	date.substr(1,3);*/                                                                                                                                                                                                                               
			/*var arr = date.split("/");                                                                                                                                                                                                                                
			  var b= arr[2] + arr[0] + arr[1];*/                                                                                                                                                                                                                        
			//var b = year + month + day;                                                                                                                                                                                                                               
			sap.ui.getCore().Begda = date;                                                                                                                                                                                                                              
			this.oModel.read("/GetWeekDateSet('" + date + "')", {                                                                                                                                                                                                       
				//		        filters: oFilters,                                                                                                                                                                                                                             
				success: function (oData) {                                                                                                                                                                                                                                
					//	            ;                                                                                                                                                                                                                                          
					var json = new JSONModel();                                                                                                                                                                                                                               
					json.setData(oData);                                                                                                                                                                                                                                      
					that.oView.setModel(json, "modelWeekDate");                                                                                                                                                                                                               
					sap.ui.getCore().setModel(json, "modelWeekDate");                                                                                                                                                                                                         
					sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                         
					//that.setWeekEndColor(that.oView.byId("idTablePlan"), 4);                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
					//	            ;                                                                                                                                                                                                                                          
					sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		setWeekEndColor: function (oTable, nOffset) {                                                                                                                                                                                                                
			var that = this;                                                                                                                                                                                                                                            
			var nCol1 = 0,                                                                                                                                                                                                                                              
				nCol2 = 0,                                                                                                                                                                                                                                                 
				nCol3 = 0,                                                                                                                                                                                                                                                 
				nCol4 = 0;                                                                                                                                                                                                                                                 
			var isWeekEnd = false;                                                                                                                                                                                                                                      
			var begdaDate = sap.ui.getCore().Begda;                                                                                                                                                                                                                     
			var year = begdaDate.substring(0, 4);                                                                                                                                                                                                                       
			var oDate = that.oView.getModel("modelWeekDate").getData();                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
			var arr = [oDate.D1, oDate.D2, oDate.D3, oDate.D4, oDate.D5];                                                                                                                                                                                               
			var isWeekEnd = arr.some(function (item) {                                                                                                                                                                                                                  
				var oNewDate = that.getDateFormatter(item, year);                                                                                                                                                                                                          
				var date = new Date(oNewDate);                                                                                                                                                                                                                             
				var dateTime = new Date(date.getTime() + date.getTimezoneOffset() * (60000));                                                                                                                                                                              
				var sDay = dateTime.getDay();                                                                                                                                                                                                                              
				return sDay === 0 || sDay === 6;                                                                                                                                                                                                                           
			});                                                                                                                                                                                                                                                         
			//var dateStr = sap.ui.getCore().dataTalhao;                                                                                                                                                                                                                
			this.isWeekEnd = isWeekEnd;                                                                                                                                                                                                                                 
			if (isWeekEnd) {                                                                                                                                                                                                                                            
				arr.forEach(function (item, index) {                                                                                                                                                                                                                       
					var oNewDate = that.getDateFormatter(item, year);                                                                                                                                                                                                         
					var date = new Date(oNewDate);                                                                                                                                                                                                                            
					var dateTime = new Date(date.getTime() + date.getTimezoneOffset() * (60000));                                                                                                                                                                             
					var sDay = dateTime.getDay();                                                                                                                                                                                                                             
					if (sDay === 0) { // sunday                                                                                                                                                                                                                               
						nCol1 = index + nOffset;                                                                                                                                                                                                                                 
					} else if (sDay === 6) { // saturday                                                                                                                                                                                                                      
						nCol2 = index + nOffset;                                                                                                                                                                                                                                 
					}                                                                                                                                                                                                                                                         
				});                                                                                                                                                                                                                                                        
				that.setColumnColor(oTable, nCol1, nCol2, nCol3, nCol4, "rgb(247,247,247)");                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		setColumnColor: function (oTable, nCol1, nCol2, nCol3, nCol4, sColor) {                                                                                                                                                                                      
			//var id = $(oTable.$()).find("table").attr("id");                                                                                                                                                                                                          
			//id = id.replace("header", "table");                                                                                                                                                                                                                       
			var id = oTable.getId() + "-table";                                                                                                                                                                                                                         
			$("#" + id + " td").each(function () {                                                                                                                                                                                                                      
				var id = $(this).attr("id");                                                                                                                                                                                                                               
				var aCol = id.split("-");                                                                                                                                                                                                                                  
				var sCol = aCol[aCol.length - 1];                                                                                                                                                                                                                          
				var nCol = parseInt(sCol.match(/\d+/g)[0], 10);                                                                                                                                                                                                            
				if ((nCol === nCol1 && nCol1 !== 0) || (nCol === nCol2 && nCol2 !== 0) || (nCol === nCol3 && nCol3 !== 0) || (nCol === nCol4 &&                                                                                                                            
						nCol4 !== 0)) {                                                                                                                                                                                                                                          
					$("#" + id).css("background-color", sColor); // background                                                                                                                                                                                                
					$("#" + id).find("*").each(function () {                                                                                                                                                                                                                  
						$(this).css("background-color", sColor);                                                                                                                                                                                                                 
					}); // all nested elements                                                                                                                                                                                                                                
					$("#" + id).find("input").parent().css("border-color", sColor); // border                                                                                                                                                                                 
				} else {                                                                                                                                                                                                                                                   
					$("#" + id).css("background-color", "white");                                                                                                                                                                                                             
					$("#" + id).find("*").each(function () {                                                                                                                                                                                                                  
						$(this).css("background-color", "white");                                                                                                                                                                                                                
					});                                                                                                                                                                                                                                                       
					$("#" + id).find("input").parent().css("border-color", "white");                                                                                                                                                                                          
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
		getDateFormatter: function (date, year) {                                                                                                                                                                                                                    
			var month;                                                                                                                                                                                                                                                  
			var sDate = date.match(/\d/g);                                                                                                                                                                                                                              
			sDate = sDate.join("");                                                                                                                                                                                                                                     
			if (date.indexOf("Jan") > -1) {                                                                                                                                                                                                                             
				month = 1;                                                                                                                                                                                                                                                 
			} else if (date.indexOf("Feb") > 1 || date.indexOf("Fev") > 1) {                                                                                                                                                                                            
				month = 2;                                                                                                                                                                                                                                                 
			} else if (date.indexOf("Mar") > 2 || date.indexOf("Mar") > 2) {                                                                                                                                                                                            
				month = 3;                                                                                                                                                                                                                                                 
			} else if (date.indexOf("Apr") > 2 || date.indexOf("Abr") > 2) {                                                                                                                                                                                            
				month = 4;                                                                                                                                                                                                                                                 
			} else if (date.indexOf("May") > 2 || date.indexOf("Mai") > 2) {                                                                                                                                                                                            
				month = 5;                                                                                                                                                                                                                                                 
			} else if (date.indexOf("Jun") > 2 || date.indexOf("Jun") > 2) {                                                                                                                                                                                            
				month = 6;                                                                                                                                                                                                                                                 
			} else if (date.indexOf("Jul") > 2 || date.indexOf("Jul") > 2) {                                                                                                                                                                                            
				month = 7;                                                                                                                                                                                                                                                 
			} else if (date.indexOf("Aug") > 2 || date.indexOf("Ago") > 2) {                                                                                                                                                                                            
				month = 8;                                                                                                                                                                                                                                                 
			} else if (date.indexOf("Sep") > 2 || date.indexOf("Set") > 2) {                                                                                                                                                                                            
				month = 9;                                                                                                                                                                                                                                                 
			} else if (date.indexOf("Oct") > 2 || date.indexOf("Out") > 2) {                                                                                                                                                                                            
				month = 10;                                                                                                                                                                                                                                                
			} else if (date.indexOf("Nov") > 2) {                                                                                                                                                                                                                       
				month = 11;                                                                                                                                                                                                                                                
			} else if (date.indexOf("Dec") > 2 || date.indexOf("Dez") > 2) {                                                                                                                                                                                            
				month = 12;                                                                                                                                                                                                                                                
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			//var oDate = new Date(month+"/"+sDate+"/"+ year);                                                                                                                                                                                                          
			//	console.log(date);                                                                                                                                                                                                                                       
			var oDateFormat = DateFormat.getDateInstance({                                                                                                                                                                                                              
				pattern: "yyyy-MM-dd"                                                                                                                                                                                                                                      
			});                                                                                                                                                                                                                                                         
			var oDate = oDateFormat.format(new Date(month + "/" + sDate + "/" + year));                                                                                                                                                                                 
			//	return oDate;                                                                                                                                                                                                                                            
			return oDate;                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		onSetMonth: function () {                                                                                                                                                                                                                                    
			var that = this;                                                                                                                                                                                                                                            
			var oFilters = [];                                                                                                                                                                                                                                          
			var begda = sap.ui.getCore().dadosMaster.Datab.toJSON().split('-')[0] + sap.ui.getCore().dadosMaster.Datab.toJSON().split('-')[1] +                                                                                                                         
				'01';                                                                                                                                                                                                                                                      
			var periodo = sap.ui.getCore().dadosMaster.Datab.toJSON().split('-')[1] + '.' + sap.ui.getCore().dadosMaster.Datab.toJSON().split(                                                                                                                          
				'-')[0];                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
			oFilters.push(new sap.ui.model.Filter("Safra", "EQ", sap.ui.getCore().dadosMaster.Ajahr));                                                                                                                                                                  
			oFilters.push(new sap.ui.model.Filter("Mes", "EQ", periodo));                                                                                                                                                                                               
			//			oFilters.push(new sap.ui.model.Filter("Endda", "EQ", begda));                                                                                                                                                                                          
			oFilters.push(new sap.ui.model.Filter("Acnum", "EQ", sap.ui.getCore().dadosMaster.Acnum));                                                                                                                                                                  
                                                                                                                                                                                                                                                               
			this.oModel.read("/GetMonthDateSet", {                                                                                                                                                                                                                      
				filters: oFilters,                                                                                                                                                                                                                                         
				success: function (oData) {                                                                                                                                                                                                                                
					//	            ;                                                                                                                                                                                                                                          
					var json = new JSONModel();                                                                                                                                                                                                                               
					json.setData(oData.results[0]);                                                                                                                                                                                                                           
					that.oView.setModel(json, "modelMonthDate");                                                                                                                                                                                                              
					that.oView.getModel("modelMonthDate").refresh();                                                                                                                                                                                                          
					sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                         
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
					//	            ;                                                                                                                                                                                                                                          
					sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		onSetMonthTable: function () {                                                                                                                                                                                                                               
			var that = this;                                                                                                                                                                                                                                            
			var date = new Date().toLocaleDateString();                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
			// if (navigator.language === "en-US") {                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
			// 	var day = date.substr(3, 2);                                                                                                                                                                                                                            
			// 	var month = date.substr(0, 2);                                                                                                                                                                                                                          
			// 	var year = date.substr(6, 4);                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			// } else {                                                                                                                                                                                                                                                 
			// 	day = date.substr(0, 2);                                                                                                                                                                                                                                
			// 	month = date.substr(3, 2);                                                                                                                                                                                                                              
			// 	year = date.substr(6, 4);                                                                                                                                                                                                                               
			// }                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
			//			this.oView.getModel("modelMonthDate")	                                                                                                                                                                                                                 
			var b = sap.ui.getCore().dadosMaster.Ajahr + '01' + '01';                                                                                                                                                                                                   
			var c = sap.ui.getCore().dadosMaster.Datab.toJSON().split('-')[0] + sap.ui.getCore().dadosMaster.Datab.toJSON().split('-')[1] +                                                                                                                             
				'01';                                                                                                                                                                                                                                                      
			sap.ui.getCore().Begda = b;                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
			this.oModel.read("/GetMonthDateSet('" + c + "')", {                                                                                                                                                                                                         
				//		        filters: oFilters,                                                                                                                                                                                                                             
				success: function (oData) {                                                                                                                                                                                                                                
					//	            ;                                                                                                                                                                                                                                          
					var json = new JSONModel();                                                                                                                                                                                                                               
					json.setData(oData);                                                                                                                                                                                                                                      
					that.oView.setModel(json, "modelMonthDate");                                                                                                                                                                                                              
					that.oView.getModel("modelMonthDate").refresh();                                                                                                                                                                                                          
					sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                         
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
					sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onPress: function (oEvent) {                                                                                                                                                                                                                                 
			this.setVisiblePanels(oEvent);                                                                                                                                                                                                                              
		},                                                                                                                                                                                                                                                           
		setVisiblePanels: function (oEvent) {                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
			this.seg_key = "";                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			if (oEvent !== undefined) {                                                                                                                                                                                                                                 
				this.seg_key = oEvent.getSource().getKey();                                                                                                                                                                                                                
			} else {                                                                                                                                                                                                                                                    
				this.seg_key = this.oView.byId("idSegButtons").getProperty("selectedKey");                                                                                                                                                                                 
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			switch (this.seg_key) {                                                                                                                                                                                                                                     
			case "plan":                                                                                                                                                                                                                                                
				this.oView.byId("idPlan").setVisible(true);                                                                                                                                                                                                                
				this.oView.byId("idProg").setVisible(false);                                                                                                                                                                                                               
				this.oView.byId("idInsu").setVisible(false);                                                                                                                                                                                                               
				this.oView.byId("idCreateOrder").setVisible(true);                                                                                                                                                                                                         
				this.oView.byId("FormDisplay354").setVisible(true);                                                                                                                                                                                                        
				this.oView.byId("idFormOrc").setVisible(false);                                                                                                                                                                                                            
				//				this.onSetMonthTable();                                                                                                                                                                                                                              
				this.onSetMonth();                                                                                                                                                                                                                                         
				this.oView.byId("idCombo").fireChange();                                                                                                                                                                                                                   
				//Sequeira                                                                                                                                                                                                                                                 
				this.oView.byId("layoutversao").setVisible(false);                                                                                                                                                                                                         
				this.oView.byId("idCreateOrder").setVisible(false);                                                                                                                                                                                                        
				//Sequeira                                                                                                                                                                                                                                                 
				break;                                                                                                                                                                                                                                                     
			case "prog":                                                                                                                                                                                                                                                
				this.oView.byId("idPlan").setVisible(false);                                                                                                                                                                                                               
				this.oView.byId("idProg").setVisible(true);                                                                                                                                                                                                                
				this.oView.byId("idInsu").setVisible(false);                                                                                                                                                                                                               
				this.oView.byId("idCreateOrder").setVisible(false);                                                                                                                                                                                                        
				this.oView.byId("FormDisplay354").setVisible(true);                                                                                                                                                                                                        
				this.oView.byId("idFormOrc").setVisible(false);                                                                                                                                                                                                            
				this.onSetDaysTable();                                                                                                                                                                                                                                     
				this.oView.byId("idCombo").fireChange();                                                                                                                                                                                                                   
				//Sequeira                                                                                                                                                                                                                                                 
				this.oView.byId("layoutversao").setVisible(false);                                                                                                                                                                                                         
				//Sequeira                                                                                                                                                                                                                                                 
				break;                                                                                                                                                                                                                                                     
			case "insu":                                                                                                                                                                                                                                                
				this.oView.byId("idProg").setVisible(false);                                                                                                                                                                                                               
				this.oView.byId("idPlan").setVisible(false);                                                                                                                                                                                                               
				this.oView.byId("idInsu").setVisible(true);                                                                                                                                                                                                                
				this.oView.byId("idCreateOrder").setVisible(false);                                                                                                                                                                                                        
				this.oView.byId("FormDisplay354").setVisible(false);                                                                                                                                                                                                       
				this.oView.byId("idFormOrc").setVisible(true);                                                                                                                                                                                                             
				this.onSetMonthTable();                                                                                                                                                                                                                                    
				this.getResumo();                                                                                                                                                                                                                                          
				this.oView.byId("idCombo").fireChange();                                                                                                                                                                                                                   
				//Sequeira                                                                                                                                                                                                                                                 
				this.oView.byId("layoutversao").setVisible(true);                                                                                                                                                                                                          
				//Show the data...                                                                                                                                                                                                                                         
				var that = this;                                                                                                                                                                                                                                           
				var oFilters = [];                                                                                                                                                                                                                                         
				oFilters.push(new sap.ui.model.Filter("Acnum", "EQ", sap.ui.getCore().dadosMaster.Acnum));                                                                                                                                                                 
				this.oModel.read("/GetVersionSet", {                                                                                                                                                                                                                       
					filters: oFilters,                                                                                                                                                                                                                                        
					success: function (oData) {                                                                                                                                                                                                                               
						//	            ;                                                                                                                                                                                                                                         
						var json = new JSONModel();                                                                                                                                                                                                                              
						json.setData(oData);                                                                                                                                                                                                                                     
						that.oView.byId("idversao").setModel(json, "modelComboVersao");                                                                                                                                                                                          
					},                                                                                                                                                                                                                                                        
					error: function (oError) {                                                                                                                                                                                                                                
						//	            ;                                                                                                                                                                                                                                         
					}                                                                                                                                                                                                                                                         
				});				                                                                                                                                                                                                                                                    
				//Sequeira                                                                                                                                                                                                                                                 
				break;                                                                                                                                                                                                                                                     
			default:                                                                                                                                                                                                                                                    
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		addDays: function (date, days) {                                                                                                                                                                                                                             
			var result = new Date(date);                                                                                                                                                                                                                                
			result.setDate(result.getDate() + days);                                                                                                                                                                                                                    
			return result;                                                                                                                                                                                                                                              
		},                                                                                                                                                                                                                                                           
		getResumo: function () {                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
			var that = this;                                                                                                                                                                                                                                            
			var oFilters1 = [];                                                                                                                                                                                                                                         
			var oFilters = [];                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			var date = this.addDays(this.oView.byId("idCalendar").getStartDate(), 1);                                                                                                                                                                                   
			//var lv_begda = date.toISOString().substr(0, 4) + date.toISOString().substr(5, 2) + date.toISOString().substr(8, 2);                                                                                                                                       
			var lv_begda = this.oView.byId("idSafraIni").setText(sap.ui.getCore().dadosMaster.Datab.toISOString().substr(8, 2) + '.' +                                                                                                                                  
				sap.ui.getCore().dadosMaster.Datab.toISOString().substr(5, 2) + '.' +                                                                                                                                                                                      
				sap.ui.getCore().dadosMaster.Datab.toISOString().substr(0, 4));                                                                                                                                                                                            
			var begda = sap.ui.getCore().dadosMaster.Datab.toISOString().substr(0, 4) + sap.ui.getCore().dadosMaster.Datab.toISOString().substr(                                                                                                                        
				5, 2) + sap.ui.getCore().dadosMaster.Datab.toISOString().substr(8, 2);                                                                                                                                                                                     
			var lv_year = date.getUTCFullYear() + 1;                                                                                                                                                                                                                    
			//	var lv_endda = lv_year + date.toLocaleDateString().substr(3, 2) + date.toLocaleDateString().substr(0, 2);                                                                                                                                                
			//  var lv_endda = lv_year + "/" + date.toLocaleDateString().substr(0, 2) + date.toLocaleDateString().substr(2, 2);                                                                                                                                         
			var lv_ennda = that.oView.byId("idSafraFim").setText(sap.ui.getCore().dadosMaster.Datbi.toISOString().substr(8, 2) + '.' +                                                                                                                                  
				sap.ui.getCore().dadosMaster.Datbi.toISOString().substr(5, 2) + '.' +                                                                                                                                                                                      
				sap.ui.getCore().dadosMaster.Datbi.toISOString().substr(0, 4));                                                                                                                                                                                            
			var ennda = sap.ui.getCore().dadosMaster.Datbi.toISOString().substr(0, 4) + sap.ui.getCore().dadosMaster.Datbi.toISOString().substr(                                                                                                                        
					5, 2) +                                                                                                                                                                                                                                                   
				sap.ui.getCore().dadosMaster.Datbi.toISOString().substr(8, 2);                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
			oFilters1.push(new sap.ui.model.Filter("Acnum", "EQ", sap.ui.getCore().dadosMaster.Acnum));                                                                                                                                                                 
			oFilters1.push(new sap.ui.model.Filter("Extwg", "EQ", that.oView.byId("idCombo").getSelectedKey()));                                                                                                                                                        
			oFilters1.push(new sap.ui.model.Filter("Begda", "EQ", begda));                                                                                                                                                                                              
			oFilters1.push(new sap.ui.model.Filter("Endda", "EQ", ennda));                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
			this.oModel.read("/GetYearMonthsSet", {                                                                                                                                                                                                                     
				filters: oFilters1,                                                                                                                                                                                                                                        
				success: function (oData1) {                                                                                                                                                                                                                               
					//                                                                                                                                                                                                                                                        
					var json = new JSONModel();                                                                                                                                                                                                                               
					json.setData(oData1.results[0]);                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
					sap.ui.getCore().modelYearMonth = oData1.results[0];                                                                                                                                                                                                      
					that.oView.setModel(json, "modelYearMonth");                                                                                                                                                                                                              
					                                                                                                                                                                                                                                                          
					//Sequeira                                                                                                                                                                                                                                                
					oFilters1.push(new sap.ui.model.Filter("Versao", "EQ", that.myversion));                                                                                                                                                                                  
					//Sequeira                                                                                                                                                                                                                                                
					                                                                                                                                                                                                                                                          
					that.oModel.read("/GetResumoOrcSet", {                                                                                                                                                                                                                    
						filters: oFilters1,                                                                                                                                                                                                                                      
						success: function (oData) {                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
							var json0 = new JSONModel();                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
							json0.setData({                                                                                                                                                                                                                                         
								modelResumo: oData.results                                                                                                                                                                                                                             
							});                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
							that.oView.byId("idTableResumo").setModel(json0);                                                                                                                                                                                                       
							that.oView.byId("idTableResumo").bindRows("/modelResumo");                                                                                                                                                                                              
							that.oView.byId("idTableResumo").setBusy(false);                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
							oFilters1.push(new sap.ui.model.Filter("Ajahr", "EQ", sap.ui.getCore().dadosMaster.Ajahr));                                                                                                                                                             
							//		oFilters1.push(new sap.ui.model.Filter("Begda", "EQ", sap.ui.getCore().Begda));                                                                                                                                                                     
                                                                                                                                                                                                                                                               
							that.oModel.read("/GetTarefasOrcSet", {                                                                                                                                                                                                                 
								filters: oFilters1,                                                                                                                                                                                                                                    
								success: function (oData2) {                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
									var json1 = new JSONModel();                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
									json1.setData({                                                                                                                                                                                                                                       
										modelInsumo: oData2.results                                                                                                                                                                                                                          
									});                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
									that.oView.byId("idTarefaInsumo").setModel(json1);                                                                                                                                                                                                    
									that.oView.byId("idTarefaInsumo").setVisibleRowCount(oData2.results.length);                                                                                                                                                                          
									that.oView.byId("idTarefaInsumo").bindRows("/modelInsumo");                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
									//	oFilters1.push(new sap.ui.model.Filter("Acnum", "EQ", sap.ui.getCore().dadosMaster.Acnum));                                                                                                                                                        
									// that.oModel.read("/GetTalhaoIdadeSet", {                                                                                                                                                                                                           
									// 	filters: oFilters1,                                                                                                                                                                                                                               
									// 	success: function (oData3) {                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
									// 	},                                                                                                                                                                                                                                                
									// 	error: function (oError) {                                                                                                                                                                                                                        
									// 		//	            ;                                                                                                                                                                                                                                 
									// 		sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                
									// 	}                                                                                                                                                                                                                                                 
									// });                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
									sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                     
								},                                                                                                                                                                                                                                                     
								error: function (oError) {                                                                                                                                                                                                                             
									//	            ;                                                                                                                                                                                                                                      
									sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                     
								}                                                                                                                                                                                                                                                      
							});                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
						},                                                                                                                                                                                                                                                       
						error: function (oError) {                                                                                                                                                                                                                               
							//	            ;                                                                                                                                                                                                                                        
							sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                       
						}                                                                                                                                                                                                                                                        
					});                                                                                                                                                                                                                                                       
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
					//	            ;                                                                                                                                                                                                                                          
					sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onNextMonth: function (p_data) {                                                                                                                                                                                                                             
			var that = this;                                                                                                                                                                                                                                            
			var oFilters = [];                                                                                                                                                                                                                                          
			var periodo = this.oView.getModel("modelMonthDate").getData().D5;                                                                                                                                                                                           
			//			var safra = sap.ui.getCore().dadosMaster.Ajahr                                                                                                                                                                                                         
			oFilters.push(new sap.ui.model.Filter("Safra", "EQ", sap.ui.getCore().dadosMaster.Ajahr));                                                                                                                                                                  
                                                                                                                                                                                                                                                               
			if (periodo === "") {                                                                                                                                                                                                                                       
				sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                          
				MessageToast.show("Fim dos per?odos para safra", {                                                                                                                                                                                                         
					my: "center center", // default                                                                                                                                                                                                                           
					at: "center center", // default                                                                                                                                                                                                                           
				});                                                                                                                                                                                                                                                        
			} else {                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
				oFilters.push(new sap.ui.model.Filter("Mes", "EQ", periodo));                                                                                                                                                                                              
				oFilters.push(new sap.ui.model.Filter("Endda", "EQ", 'X'));                                                                                                                                                                                                
				oFilters.push(new sap.ui.model.Filter("Acnum", "EQ", sap.ui.getCore().dadosMaster.Acnum));                                                                                                                                                                 
                                                                                                                                                                                                                                                               
				this.oModel.read("/GetMonthDateSet", {                                                                                                                                                                                                                     
					filters: oFilters,                                                                                                                                                                                                                                        
					success: function (oData) {                                                                                                                                                                                                                               
						//	            ;                                                                                                                                                                                                                                         
						var json = new JSONModel();                                                                                                                                                                                                                              
						json.setData(oData.results[0]);                                                                                                                                                                                                                          
						that.oView.setModel(json, "modelMonthDate");                                                                                                                                                                                                             
						that.oView.getModel("modelMonthDate").refresh();                                                                                                                                                                                                         
						sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                        
					},                                                                                                                                                                                                                                                        
					error: function (oError) {                                                                                                                                                                                                                                
						//	            ;                                                                                                                                                                                                                                         
						sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                        
					}                                                                                                                                                                                                                                                         
				});                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		onBackMonth: function (p_data) {                                                                                                                                                                                                                             
			var that = this;                                                                                                                                                                                                                                            
			var oFilters = [];                                                                                                                                                                                                                                          
			var periodo = this.oView.getModel("modelMonthDate").getData().D1;                                                                                                                                                                                           
			var safra = sap.ui.getCore().dadosMaster.Ajahr;                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
			oFilters.push(new sap.ui.model.Filter("Safra", "EQ", sap.ui.getCore().dadosMaster.Ajahr));                                                                                                                                                                  
			oFilters.push(new sap.ui.model.Filter("Mes", "EQ", periodo));                                                                                                                                                                                               
			oFilters.push(new sap.ui.model.Filter("Begda", "EQ", safra + periodo.substr(0, 2) + '01'));                                                                                                                                                                 
			oFilters.push(new sap.ui.model.Filter("Acnum", "EQ", sap.ui.getCore().dadosMaster.Acnum));                                                                                                                                                                  
                                                                                                                                                                                                                                                               
			this.oModel.read("/GetMonthDateSet", {                                                                                                                                                                                                                      
				filters: oFilters,                                                                                                                                                                                                                                         
				success: function (oData) {                                                                                                                                                                                                                                
					//	            ;                                                                                                                                                                                                                                          
					var json = new JSONModel();                                                                                                                                                                                                                               
					json.setData(oData.results[0]);                                                                                                                                                                                                                           
					that.oView.setModel(json, "modelMonthDate");                                                                                                                                                                                                              
					that.oView.getModel("modelMonthDate").refresh();                                                                                                                                                                                                          
					sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                         
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
					//	            ;                                                                                                                                                                                                                                          
					sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			//			}                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		onBackProg: function () {                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
			var d = new Date(this.oView.byId("idCalendar").getStartDate());                                                                                                                                                                                             
			var e = d.setDate(d.getDate() - 5);                                                                                                                                                                                                                         
			var f = new Date(e);                                                                                                                                                                                                                                        
			this.oView.byId("idCalendar").setStartDate(f);                                                                                                                                                                                                              
			this.oView.byId("idCalendar").fireStartDateChange();                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onNextProg: function () {                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
			var d = new Date(this.oView.byId("idCalendar").getStartDate());                                                                                                                                                                                             
			var e = d.setDate(d.getDate() + 5);                                                                                                                                                                                                                         
			var f = new Date(e);                                                                                                                                                                                                                                        
			this.oView.byId("idCalendar").setStartDate(f);                                                                                                                                                                                                              
			this.oView.byId("idCalendar").fireStartDateChange();                                                                                                                                                                                                        
		},                                                                                                                                                                                                                                                           
		onNext: function (oEvent) {                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
			var that = this;                                                                                                                                                                                                                                            
			var oFilters = [];                                                                                                                                                                                                                                          
			var periodo = this.oView.getModel("modelMonthDate").getData().D5;                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			if (periodo === "") {                                                                                                                                                                                                                                       
				// 	sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                      
				MessageToast.show("Fim dos per?odos para safra", {                                                                                                                                                                                                         
					my: "center center", // default                                                                                                                                                                                                                           
					at: "center center", // default                                                                                                                                                                                                                           
				});                                                                                                                                                                                                                                                        
			} else {                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
				sap.ui.core.BusyIndicator.show(0);                                                                                                                                                                                                                         
				var endda = periodo.substr(3, 4) + periodo.substr(0, 2) + '01';                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
				oFilters.push(new sap.ui.model.Filter("Werks", "EQ", sap.ui.getCore().dadosMaster.Werks));                                                                                                                                                                 
				oFilters.push(new sap.ui.model.Filter("Acnum", "EQ", sap.ui.getCore().dadosMaster.Acnum));                                                                                                                                                                 
				oFilters.push(new sap.ui.model.Filter("Ajahr", "EQ", sap.ui.getCore().dadosMaster.Ajahr));                                                                                                                                                                 
				oFilters.push(new sap.ui.model.Filter("Extwg", "EQ", sap.ui.getCore().dadosProcessoId));                                                                                                                                                                   
				//		oFilters.push(new sap.ui.model.Filter("Matkl", "EQ", sap.ui.getCore().dadosDetailPlan.Matkl));                                                                                                                                                         
				oFilters.push(new sap.ui.model.Filter("Endda", "EQ", endda));                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
				this.oModel.read("/GetPlanTarefasSet", {                                                                                                                                                                                                                   
					filters: oFilters,                                                                                                                                                                                                                                        
					success: function (oData) {;                                                                                                                                                                                                                              
						var json = new JSONModel();                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
						json.setData({                                                                                                                                                                                                                                           
							modelTask: oData.results                                                                                                                                                                                                                                
						});                                                                                                                                                                                                                                                      
						sap.ui.getCore().headerMonth = oData.results[0];                                                                                                                                                                                                         
						that.oView.byId("idTablePlan").setModel(json);                                                                                                                                                                                                           
						that.oView.byId("idTablePlan").bindRows("/modelTask");                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
						// GET WORK CENTERS                                                                                                                                                                                                                                      
						var then = that;                                                                                                                                                                                                                                         
						that.oModel.read("/GetWorkCenterPlanSet", {                                                                                                                                                                                                              
							filters: oFilters,                                                                                                                                                                                                                                      
							success: function (oData2) {                                                                                                                                                                                                                            
								var json1 = new JSONModel();                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
								json1.setData({                                                                                                                                                                                                                                        
									modelCentro: oData2.results                                                                                                                                                                                                                           
								});                                                                                                                                                                                                                                                    
								//								                                                                                                                                                                                                                                             
								then.oView.byId("idTableCentroPlan").setVisibleRowCount(oData2.results.length);                                                                                                                                                                        
								then.oView.byId("idTableCentroPlan").setModel(json1);                                                                                                                                                                                                  
								then.oView.byId("idTableCentroPlan").bindRows("/modelCentro");                                                                                                                                                                                         
								//								then.calcCentroTrabalho();                                                                                                                                                                                                                   
								then.onNextMonth();                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
							},                                                                                                                                                                                                                                                      
							error: function (oError) {                                                                                                                                                                                                                              
								//                          ;                                                                                                                                                                                                                          
							}                                                                                                                                                                                                                                                       
						});                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
					},                                                                                                                                                                                                                                                        
					error: function (oError) {                                                                                                                                                                                                                                
						//		;                                                                                                                                                                                                                                                    
					}                                                                                                                                                                                                                                                         
				});                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		checkSplitMode: function () {                                                                                                                                                                                                                                
			//			                                                                                                                                                                                                                                                       
			if (this.oView.getParent().getParent().getMode() === sap.m.SplitAppMode.HideMode) {                                                                                                                                                                         
				this.oView.byId("idFull").setVisible(false);                                                                                                                                                                                                               
				this.oView.byId("idExit").setVisible(true);                                                                                                                                                                                                                
			} else if (this.oView.getParent().getParent().getMode() === sap.m.SplitAppMode.ShowHideMode) {                                                                                                                                                              
				this.oView.byId("idFull").setVisible(true);                                                                                                                                                                                                                
				this.oView.byId("idExit").setVisible(false);                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		_onRouteMatched: function (oEvent) {                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			this.checkSplitMode();                                                                                                                                                                                                                                      
			this.setVisiblePanels();                                                                                                                                                                                                                                    
			this.oView.byId("idCalendar").setStartDate(new Date());                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
			if (sap.ui.getCore().selectedKey !== undefined) {                                                                                                                                                                                                           
				this.oView.byId("idCombo").setSelectedItem(sap.ui.getCore().selectedKey);                                                                                                                                                                                  
			}                                                                                                                                                                                                                                                           
			//Sequeira                                                                                                                                                                                                                                                  
			try {                                                                                                                                                                                                                                                       
				if (this.myversion){                                                                                                                                                                                                                                       
					this.oView.byId("idversao").setSelectedItem(this.myversion);                                                                                                                                                                                              
				}				                                                                                                                                                                                                                                                      
			} catch (err) {                                                                                                                                                                                                                                             
			  console.log(err);	                                                                                                                                                                                                                                        
			}			                                                                                                                                                                                                                                                        
			//Sequeira                                                                                                                                                                                                                                                  
			//			;                                                                                                                                                                                                                                                      
			this.oView.byId("idTablePlanSearch").setValue("");                                                                                                                                                                                                          
			this.oView.byId("idTableProcSearch").setValue("");                                                                                                                                                                                                          
			this.oView.byId("idTableOrcSearch").setValue("");                                                                                                                                                                                                           
			// Set values                                                                                                                                                                                                                                               
			this.oView.byId("idArea").setText(sap.ui.getCore().dadosMaster.Acdes);                                                                                                                                                                                      
			this.oView.byId("idCentro").setText(sap.ui.getCore().dadosMaster.Werks);                                                                                                                                                                                    
			this.oView.byId("idSafra").setText(sap.ui.getCore().dadosMaster.Ajahr);                                                                                                                                                                                     
			var lv_safra_ref = parseInt(sap.ui.getCore().dadosMaster.Ajahr) + 1;                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
			this.oView.byId("idAreaOrc").setText(sap.ui.getCore().dadosMaster.Acdes);                                                                                                                                                                                   
			this.oView.byId("idCentroOrc").setText(sap.ui.getCore().dadosMaster.Werks);                                                                                                                                                                                 
			this.oView.byId("idSafraIni").setText(sap.ui.getCore().dadosMaster.Datab.toISOString().substr(8, 2) + '.' +                                                                                                                                                 
				sap.ui.getCore().dadosMaster.Datab.toISOString().substr(5, 2) + '.' +                                                                                                                                                                                      
				sap.ui.getCore().dadosMaster.Datab.toISOString().substr(0, 4));                                                                                                                                                                                            
			this.oView.byId("idSafraFim").setText(sap.ui.getCore().dadosMaster.Datbi.toISOString().substr(8, 2) + '.' +                                                                                                                                                 
				sap.ui.getCore().dadosMaster.Datbi.toISOString().substr(5, 2) + '.' +                                                                                                                                                                                      
				sap.ui.getCore().dadosMaster.Datbi.toISOString().substr(0, 4));                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
			var date = this.addDays(sap.ui.getCore().dadosMaster.Datbi, 1);                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
			this.oView.byId("idSafraIniRef").setText(date.toISOString().substr(8, 2) + '.' +                                                                                                                                                                            
				date.toISOString().substr(5, 2) + '.' +                                                                                                                                                                                                                    
				date.toISOString().substr(0, 4));                                                                                                                                                                                                                          
			var lv_year = date.getUTCFullYear() + 1;                                                                                                                                                                                                                    
			this.oView.byId("idSafraFimRef").setText(date.toLocaleDateString().substr(0, 2) + '.' + date.toLocaleDateString().substr(3, 2) +                                                                                                                            
				'.' + lv_year);                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
			this.oFilters1 = [];                                                                                                                                                                                                                                        
			this.oFilters2 = [];                                                                                                                                                                                                                                        
			this.oFilters1.push(new sap.ui.model.Filter("Actyp", "EQ", sap.ui.getCore().dadosMaster.Actyp));                                                                                                                                                            
			this.oFilters1.push(new sap.ui.model.Filter("Acnum", "EQ", sap.ui.getCore().dadosMaster.Acnum));                                                                                                                                                            
			this.oFilters2.push(new sap.ui.model.Filter("Acnum", "EQ", sap.ui.getCore().dadosMaster.Acnum));                                                                                                                                                            
			this.onGetProcess();                                                                                                                                                                                                                                        
		},                                                                                                                                                                                                                                                           
		onGetProcess: function () {                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
			var that = this;                                                                                                                                                                                                                                            
			this.oModel.read("/GetProcessoSet", {                                                                                                                                                                                                                       
				success: function (oData) {                                                                                                                                                                                                                                
					var json = new JSONModel();                                                                                                                                                                                                                               
					json.setData(oData);                                                                                                                                                                                                                                      
					that.oView.byId("idCombo").setModel(json, "modelComboProcess");                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
					var oFilters = [];                                                                                                                                                                                                                                        
					oFilters.push(new sap.ui.model.Filter("Acnum", "EQ", sap.ui.getCore().dadosMaster.Acnum));                                                                                                                                                                
                                                                                                                                                                                                                                                               
					that.oModel.read("/GetTerrenoSet", {                                                                                                                                                                                                                      
						filters: oFilters,                                                                                                                                                                                                                                       
						success: function (oData2) {                                                                                                                                                                                                                             
							sap.ui.getCore().talhoes = oData2.results;                                                                                                                                                                                                              
							sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                       
						},                                                                                                                                                                                                                                                       
						error: function (oError) {                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
						}                                                                                                                                                                                                                                                        
					});                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
					//					sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                  
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
		handleItemPressOrc: function (oEvent) {                                                                                                                                                                                                                      
			// Sequeira                                                                                                                                                                                                                                                 
			var that = this;                                                                                                                                                                                                                                            
			// Sequeira                                                                                                                                                                                                                                                 
			var line = this.oView.byId("idTarefaInsumo").getSelectedIndex();                                                                                                                                                                                            
			if (line < 0) {                                                                                                                                                                                                                                             
				MessageToast.show("Selecionar tarefa", {                                                                                                                                                                                                                   
					my: "center center", // default                                                                                                                                                                                                                           
					at: "center center", // default                                                                                                                                                                                                                           
				});                                                                                                                                                                                                                                                        
			} else {                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
				sap.ui.core.BusyIndicator.show(0);                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
				var tarefa = this.oView.byId("idTarefaInsumo").getRows()[line].getCells()[0].getProperty('text');                                                                                                                                                          
                                                                                                                                                                                                                                                               
				for (var x = 0; x < this.oView.byId("idTarefaInsumo").getModel().getData().modelInsumo.length; x++) {                                                                                                                                                      
					if (this.oView.byId("idTarefaInsumo").getModel().getData().modelInsumo[x].Wgbez === tarefa) {                                                                                                                                                             
						var lineTask = x;                                                                                                                                                                                                                                        
						break;                                                                                                                                                                                                                                                   
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
				sap.ui.getCore().dadosDetail = this.oView.byId("idTarefaInsumo").getModel().getData().modelInsumo[lineTask];                                                                                                                                               
				// Sequeira                                                                                                                                                                                                                                                
				var key     = that.oView.byId("idCombo").getSelectedKey();                                                                                                                                                                                                 
				var value   = that.oView.byId("idCombo").getValue();                                                                                                                                                                                                       
				console.log(sap.ui.getCore().dadosProcesso);                                                                                                                                                                                                               
				console.log(sap.ui.getCore().dadosProcessoId);                                                                                                                                                                                                             
				sap.ui.getCore().dadosProcesso = value;                                                                                                                                                                                                                    
				sap.ui.getCore().dadosProcessoId = key;	                                                                                                                                                                                                                   
				if (!that.myversion){                                                                                                                                                                                                                                      
					//that.myversion = "XXX";                                                                                                                                                                                                                                 
					this.myversion 	= that.oView.byId("idversao").getValue();                                                                                                                                                                                                 
				}                                                                                                                                                                                                                                                          
				// Sequeira	                                                                                                                                                                                                                                               
				                                                                                                                                                                                                                                                           
				this.getOwnerComponent().getRouter()                                                                                                                                                                                                                       
					.navTo("Orcamento", {                                                                                                                                                                                                                                     
						Acnum: sap.ui.getCore().dadosMaster.Acnum,                                                                                                                                                                                                               
						// Sequeira                                                                                                                                                                                                                                              
						Matkl: sap.ui.getCore().dadosDetail.Matkl,                                                                                                                                                                                                               
						Versao: that.myversion                                                                                                                                                                                                                                   
						// Sequeira                                                                                                                                                                                                                                              
					});                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
			                                                                                                                                                                                                                                                            
		},                                                                                                                                                                                                                                                           
		handleItemPressPlan: function (oEvent) {                                                                                                                                                                                                                     
			var line = this.oView.byId("idTablePlan").getSelectedIndex();                                                                                                                                                                                               
			if (line < 0) {                                                                                                                                                                                                                                             
				MessageToast.show("Selecionar tarefa", {                                                                                                                                                                                                                   
					my: "center center", // default                                                                                                                                                                                                                           
					at: "center center", // default                                                                                                                                                                                                                           
				});                                                                                                                                                                                                                                                        
			} else {                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
				sap.ui.core.BusyIndicator.show(0);                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
				var tarefa = this.oView.byId("idTablePlan").getRows()[line].getCells()[0].getProperty('text');                                                                                                                                                             
                                                                                                                                                                                                                                                               
				for (var x = 0; x < this.oView.byId("idTablePlan").getModel().getData().modelTask.length; x++) {                                                                                                                                                           
					if (this.oView.byId("idTablePlan").getModel().getData().modelTask[x].Wgbez === tarefa) {                                                                                                                                                                  
						var lineTask = x;                                                                                                                                                                                                                                        
						break;                                                                                                                                                                                                                                                   
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
				sap.ui.getCore().dadosDetailPlan = this.oView.byId("idTablePlan").getModel().getData().modelTask[lineTask];                                                                                                                                                
                                                                                                                                                                                                                                                               
				this.getOwnerComponent().getRouter()                                                                                                                                                                                                                       
					.navTo("Planejamento", {                                                                                                                                                                                                                                  
						Acnum: sap.ui.getCore().dadosMaster.Acnum,                                                                                                                                                                                                               
						Matkl: sap.ui.getCore().dadosDetailPlan.Matkl                                                                                                                                                                                                            
					});                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		//Sequeira                                                                                                                                                                                                                                                   
		handleChangeComboVersion: function (oEvent) {                                                                                                                                                                                                                
			sap.ui.core.BusyIndicator.show(0);                                                                                                                                                                                                                          
			var that = this;                                                                                                                                                                                                                                            
			var oValidatedComboBox = oEvent.getSource(),                                                                                                                                                                                                                
				sSelectedKey = oValidatedComboBox.getSelectedKey(),                                                                                                                                                                                                        
				sValue = oValidatedComboBox.getValue();                                                                                                                                                                                                                    
			                                                                                                                                                                                                                                                            
			this.myversion = sSelectedKey;                                                                                                                                                                                                                              
			                                                                                                                                                                                                                                                            
			var key = that.oView.byId("idCombo").getSelectedKey();                                                                                                                                                                                                      
			var value   = that.oView.byId("idCombo").getValue();                                                                                                                                                                                                        
			                                                                                                                                                                                                                                                            
			if (!key){                                                                                                                                                                                                                                                  
				sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                          
				MessageToast.show("Favor selecionar o Processo", {                                                                                                                                                                                                         
					my: "center center", // default                                                                                                                                                                                                                           
					at: "center center", // default                                                                                                                                                                                                                           
				});					                                                                                                                                                                                                                                                   
			} else {			                                                                                                                                                                                                                                                 
			sap.ui.getCore().dadosProcesso = key;                                                                                                                                                                                                                       
			sap.ui.getCore().dadosProcessoId = value;                                                                                                                                                                                                                   
			this.getResumo();                                                                                                                                                                                                                                           
			}			                                                                                                                                                                                                                                                        
		},                                                                                                                                                                                                                                                           
		//Sequeira                                                                                                                                                                                                                                                   
		handleChangeCombo: function (oEvent) {                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
			sap.ui.core.BusyIndicator.show(0);                                                                                                                                                                                                                          
			var that = this;                                                                                                                                                                                                                                            
			var oValidatedComboBox = oEvent.getSource(),                                                                                                                                                                                                                
				sSelectedKey = oValidatedComboBox.getSelectedKey(),                                                                                                                                                                                                        
				sValue = oValidatedComboBox.getValue();                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
			if (!sSelectedKey && sValue) {                                                                                                                                                                                                                              
				oValidatedComboBox.setValueState("Error");                                                                                                                                                                                                                 
				oValidatedComboBox.setValueStateText("Entrada inv?lida");                                                                                                                                                                                                  
				//                sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                        
			} else {                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
				this.oView.byId("idOperacao").setText(sValue);                                                                                                                                                                                                             
				oValidatedComboBox.setValueState("None");                                                                                                                                                                                                                  
				var oFilters = [];                                                                                                                                                                                                                                         
				sap.ui.getCore().selectedKey = sSelectedKey;                                                                                                                                                                                                               
				oFilters.push(new sap.ui.model.Filter("Extwg", "EQ", sSelectedKey));                                                                                                                                                                                       
				oFilters.push(new sap.ui.model.Filter("Acnum", "EQ", sap.ui.getCore().dadosMaster.Acnum));                                                                                                                                                                 
				oFilters.push(new sap.ui.model.Filter("Ajahr", "EQ", sap.ui.getCore().dadosMaster.Ajahr));                                                                                                                                                                 
                                                                                                                                                                                                                                                               
				if (this.seg_key === "plan") {                                                                                                                                                                                                                             
					//			    	this.onGetTarefasPlan("/GetPlanTarefasSet", "modelGetDataDetail1", oFilters);                                                                                                                                                                   
					sap.ui.getCore().dadosProcesso = sValue;                                                                                                                                                                                                                  
					sap.ui.getCore().dadosProcessoId = sSelectedKey;                                                                                                                                                                                                          
					this.onGetDataDetail("/GetPlanTarefasSet", "modelGetDataDetail1", oFilters);                                                                                                                                                                              
                                                                                                                                                                                                                                                               
				} else if (this.seg_key === "prog") {                                                                                                                                                                                                                      
					/*if (navigator.language === "en-US") {                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
						var date = that.oView.byId("idCalendar").getStartDate().toLocaleDateString();                                                                                                                                                                            
						var day = date.substr(3, 2);                                                                                                                                                                                                                             
						var month = date.substr(0, 2);                                                                                                                                                                                                                           
						var year = date.substr(6, 4);                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
					}*/                                                                                                                                                                                                                                                       
					var oDateFormat = DateFormat.getDateInstance({                                                                                                                                                                                                            
						pattern: "yyyyMMdd"                                                                                                                                                                                                                                      
					});                                                                                                                                                                                                                                                       
					var date = oDateFormat.format(this.oView.byId("idCalendar").getStartDate());                                                                                                                                                                              
                                                                                                                                                                                                                                                               
					/*	date = that.oView.byId("idCalendar").getStartDate().toLocaleDateString();                                                                                                                                                                              
			         	day = date.substr(0,1);                                                                                                                                                                                                                           
						month = date.substr(1, 3);                                                                                                                                                                                                                               
						year = date.substr(4);                                                                                                                                                                                                                                   
*/                                                                                                                                                                                                                                                             
					//}                                                                                                                                                                                                                                                       
					//	console.log(date);                                                                                                                                                                                                                                     
					var b = date;                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
					sap.ui.getCore().dadosProcesso = sValue;                                                                                                                                                                                                                  
					sap.ui.getCore().dadosProcessoId = sSelectedKey;                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
					oFilters.push(new sap.ui.model.Filter("Begda", "EQ", b));                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
					this.onGetDataDetail("/GetDetail1DataSet", "modelGetDataDetail1", oFilters);                                                                                                                                                                              
                                                                                                                                                                                                                                                               
				} else if (this.seg_key === "insu") {                                                                                                                                                                                                                      
					//Sequeira - Validate new resumo field...                                                                                                                                                                                                                 
					this.myversion 	= that.oView.byId("idversao").getSelectedKey();                                                                                                                                                                                           
					if (!this.myversion){                                                                                                                                                                                                                                     
						sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                        
						MessageToast.show("Favor selecionar a versão", {                                                                                                                                                                                                         
							my: "center center", // default                                                                                                                                                                                                                         
							at: "center center", // default                                                                                                                                                                                                                         
						});						                                                                                                                                                                                                                                                
					} else {&nbsp;                                                                                                                                                                                                                                            
					sap.ui.getCore().dadosProcesso = sValue;                                                                                                                                                                                                                  
					sap.ui.getCore().dadosProcessoId = sSelectedKey;                                                                                                                                                                                                          
					this.getResumo();                                                                                                                                                                                                                                         
					}                                                                                                                                                                                                                                                         
					//Sequeira                                                                                                                                                                                                                                                
				}                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onGetTarefasPlan: function () {                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onGetDataDetail: function (p_EntitySet, p_model, p_filters) {                                                                                                                                                                                                
			var that = this;                                                                                                                                                                                                                                            
			var vEntitySet = p_EntitySet;                                                                                                                                                                                                                               
			this._model = p_model;                                                                                                                                                                                                                                      
			this._filters = p_filters;                                                                                                                                                                                                                                  
			this.oModel.read(vEntitySet, {                                                                                                                                                                                                                              
				filters: p_filters,                                                                                                                                                                                                                                        
				success: function (oData) {                                                                                                                                                                                                                                
					var then = that;;                                                                                                                                                                                                                                         
					var json = new JSONModel();                                                                                                                                                                                                                               
					var oFilters = [];                                                                                                                                                                                                                                        
					var vEntity = "";                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
					json.setSizeLimit(oData.results.length);                                                                                                                                                                                                                  
					json.setData({                                                                                                                                                                                                                                            
						modelTask: oData.results                                                                                                                                                                                                                                 
					});                                                                                                                                                                                                                                                       
					/*                                                                                                                                                                                                                                                        
										if (navigator.language === "en-US") {                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
											var date = that.oView.byId("idCalendar").getStartDate().toLocaleDateString();                                                                                                                                                                       
											var day = date.substr(3, 2);                                                                                                                                                                                                                        
											var month = date.substr(0, 2);                                                                                                                                                                                                                      
											var year = date.substr(6, 4);                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
										}*/                                                                                                                                                                                                                                                  
					var oDateFormat = DateFormat.getDateInstance({                                                                                                                                                                                                            
						pattern: "yyyyMMdd"                                                                                                                                                                                                                                      
					});                                                                                                                                                                                                                                                       
					var date = oDateFormat.format(that.oView.byId("idCalendar").getStartDate());                                                                                                                                                                              
                                                                                                                                                                                                                                                               
					/*	date = that.oView.byId("idCalendar").getStartDate().toLocaleDateString();                                                                                                                                                                              
						day = date.substr(0, 2);                                                                                                                                                                                                                                 
						month = date.substr(3, 2);                                                                                                                                                                                                                               
						year = date.substr(6, 4);*/                                                                                                                                                                                                                              
					//	}                                                                                                                                                                                                                                                      
					var b = date;                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
					if (that.seg_key === "plan") {                                                                                                                                                                                                                            
						oFilters.push(new sap.ui.model.Filter("Ajahr", "EQ", sap.ui.getCore().dadosMaster.Ajahr));                                                                                                                                                               
						vEntity = "/GetWorkCenterPlanSet";                                                                                                                                                                                                                       
						that.oView.byId("idTablePlan").setVisibleRowCount(oData.results.length);                                                                                                                                                                                 
						that.oView.byId("idTablePlan").setModel(json);                                                                                                                                                                                                           
						that.oView.byId("idTablePlan").bindRows("/modelTask");                                                                                                                                                                                                   
					} else {                                                                                                                                                                                                                                                  
						vEntity = "/GetWorkCenterSet";                                                                                                                                                                                                                           
						that.oView.byId("idTableProc").setVisibleRowCount(oData.results.length);                                                                                                                                                                                 
						that.oView.byId("idTableProc").setModel(json);                                                                                                                                                                                                           
						that.oView.byId("idTableProc").bindRows("/modelTask");                                                                                                                                                                                                   
						oFilters.push(new sap.ui.model.Filter("Begda", "EQ", b));                                                                                                                                                                                                
					}                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
					//                    that.oView.setModel(json, that._model);                                                                                                                                                                                             
					if (oData.results.length > 0) {                                                                                                                                                                                                                           
						//						sap.ui.getCore().mediaPlan = oData.results[0].MediaRend;                                                                                                                                                                                         
					}                                                                                                                                                                                                                                                         
					// GET WORK CENTERS                                                                                                                                                                                                                                       
					// check browser locale                                                                                                                                                                                                                                   
					oFilters.push(new sap.ui.model.Filter("Werks", "EQ", sap.ui.getCore().dadosMaster.Werks));                                                                                                                                                                
					oFilters.push(new sap.ui.model.Filter("Extwg", "EQ", that.oView.byId("idCombo").getSelectedKey()));                                                                                                                                                       
					oFilters.push(new sap.ui.model.Filter("Acnum", "EQ", sap.ui.getCore().dadosMaster.Acnum));                                                                                                                                                                
                                                                                                                                                                                                                                                               
					sap.ui.getCore().Begda = b;                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
					that.oModel.read(vEntity, {                                                                                                                                                                                                                               
						filters: oFilters,                                                                                                                                                                                                                                       
						success: function (oData2) {                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
							var json1 = new JSONModel();                                                                                                                                                                                                                            
							json1.setData({                                                                                                                                                                                                                                         
								modelCentro: oData2.results                                                                                                                                                                                                                            
							});                                                                                                                                                                                                                                                     
							if (then.seg_key === "plan") {                                                                                                                                                                                                                          
								then.oView.byId("idTableCentroPlan").setVisibleRowCount(oData2.results.length);                                                                                                                                                                        
								then.oView.byId("idTableCentroPlan").setModel(json1);                                                                                                                                                                                                  
								then.oView.byId("idTableCentroPlan").bindRows("/modelCentro");                                                                                                                                                                                         
							} else {                                                                                                                                                                                                                                                
								then.oView.byId("idTableCentro").setVisibleRowCount(oData2.results.length);                                                                                                                                                                            
								then.oView.byId("idTableCentro").setModel(json1);                                                                                                                                                                                                      
								then.oView.byId("idTableCentro").bindRows("/modelCentro");                                                                                                                                                                                             
								then.setDatesTable();                                                                                                                                                                                                                                  
							}                                                                                                                                                                                                                                                       
							sap.ui.getCore().setModel(json1, "modelGetDataWorkCenter");                                                                                                                                                                                             
							// json1.setSizeLimit(oData2.results.length);                                                                                                                                                                                                           
							// then.oView.setModel(json1, "modelGetDataWorkCenter");                                                                                                                                                                                                
							//	then.calcCentroTrabalho();                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
							//                        	then.setDatesTable();                                                                                                                                                                                                        
							sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                       
						},                                                                                                                                                                                                                                                       
						error: function (oError) {                                                                                                                                                                                                                               
							//                          ;                                                                                                                                                                                                                           
						}                                                                                                                                                                                                                                                        
					});                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
					//		            ;                                                                                                                                                                                                                                         
					sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
		setDatesTable: function (oEvent) {                                                                                                                                                                                                                           
			//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                              
			var that = this;                                                                                                                                                                                                                                            
			//var date = undefined                                                                                                                                                                                                                                      
			//		        date = oEvent.getSource().getStartDate().toLocaleDateString();                                                                                                                                                                                  
			/*	if (navigator.language === "en-US") {                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
					var date = that.oView.byId("idCalendar").getStartDate();                                                                                                                                                                                                  
					var day = date.substr(3, 2);                                                                                                                                                                                                                              
					var month = date.substr(0, 2);                                                                                                                                                                                                                            
					var year = date.substr(6, 4);                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
				} else {*/                                                                                                                                                                                                                                                 
			var date = that.oView.byId("idCalendar").getStartDate();                                                                                                                                                                                                    
			var oDateFormat = DateFormat.getDateInstance({                                                                                                                                                                                                              
				pattern: "yyyyMMdd"                                                                                                                                                                                                                                        
			});                                                                                                                                                                                                                                                         
			date = oDateFormat.format(that.oView.byId("idCalendar").getStartDate());                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
			/*	date = oEvent.getSource().getStartDate().toLocaleDateString();                                                                                                                                                                                           
				/*	day = date.substr(0, 2);                                                                                                                                                                                                                                
					month = date.substr(3, 2);                                                                                                                                                                                                                                
					year = date.substr(6, 4);                                                                                                                                                                                                                                 
					 var arr = date.split("/");                                                                                                                                                                                                                               
			   b = arr[2]  + arr[0] + arr[1];*/                                                                                                                                                                                                                         
			//}                                                                                                                                                                                                                                                         
			// var a = date.replace("/",".");                                                                                                                                                                                                                           
			// var b = a.replace("/",".");                                                                                                                                                                                                                              
			that.oModel.read("/GetWeekDateSet('" + date + "')", {                                                                                                                                                                                                       
				//		        filters: oFilters,                                                                                                                                                                                                                             
				success: function (oData) {                                                                                                                                                                                                                                
					//	            ;                                                                                                                                                                                                                                          
					var json = new JSONModel();                                                                                                                                                                                                                               
					json.setData(oData);                                                                                                                                                                                                                                      
					that.oView.setModel(json, "modelWeekDate");                                                                                                                                                                                                               
					sap.ui.getCore().setModel(json, "modelWeekDate");                                                                                                                                                                                                         
					sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                         
					that.setWeekEndColor(that.oView.byId("idTableProc"), 4);                                                                                                                                                                                                  
					that.setWeekEndColor(that.oView.byId("idTableCentro"), 1);                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
					//	            ;                                                                                                                                                                                                                                          
					sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onBack: function (oEvent) {                                                                                                                                                                                                                                  
			var that = this;                                                                                                                                                                                                                                            
			var oFilters = [];                                                                                                                                                                                                                                          
			var periodo = this.oView.getModel("modelMonthDate").getData().D1;                                                                                                                                                                                           
			var safraIni = sap.ui.getCore().dadosMaster.Datab.toJSON().split('-')[1] + '.' + sap.ui.getCore().dadosMaster.Datab.toJSON().split(                                                                                                                         
				'-')[0];                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
			if (periodo === safraIni) {                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
				MessageToast.show("Sem per?odo anterior", {                                                                                                                                                                                                                
					my: "center center", // default                                                                                                                                                                                                                           
					at: "center center", // default                                                                                                                                                                                                                           
				});                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
			} else {                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
				sap.ui.core.BusyIndicator.show(0);                                                                                                                                                                                                                         
				var endda = periodo.substr(3, 4) + periodo.substr(0, 2) + '01';                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
				oFilters.push(new sap.ui.model.Filter("Werks", "EQ", sap.ui.getCore().dadosMaster.Werks));                                                                                                                                                                 
				oFilters.push(new sap.ui.model.Filter("Acnum", "EQ", sap.ui.getCore().dadosMaster.Acnum));                                                                                                                                                                 
				oFilters.push(new sap.ui.model.Filter("Ajahr", "EQ", sap.ui.getCore().dadosMaster.Ajahr));                                                                                                                                                                 
				oFilters.push(new sap.ui.model.Filter("Extwg", "EQ", sap.ui.getCore().dadosProcessoId));                                                                                                                                                                   
				oFilters.push(new sap.ui.model.Filter("Begda", "EQ", endda));                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
				this.oModel.read("/GetPlanTarefasSet", {                                                                                                                                                                                                                   
					filters: oFilters,                                                                                                                                                                                                                                        
					success: function (oData) {;                                                                                                                                                                                                                              
						var json = new JSONModel();                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
						json.setData({                                                                                                                                                                                                                                           
							modelTask: oData.results                                                                                                                                                                                                                                
						});                                                                                                                                                                                                                                                      
						sap.ui.getCore().headerMonth = oData.results[0];                                                                                                                                                                                                         
						that.oView.byId("idTablePlan").setModel(json);                                                                                                                                                                                                           
						that.oView.byId("idTablePlan").bindRows("/modelTask");                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
						// GET WORK CENTERS                                                                                                                                                                                                                                      
						var then = that;                                                                                                                                                                                                                                         
						that.oModel.read("/GetWorkCenterPlanSet", {                                                                                                                                                                                                              
							filters: oFilters,                                                                                                                                                                                                                                      
							success: function (oData2) {                                                                                                                                                                                                                            
								var json1 = new JSONModel();                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
								json1.setData({                                                                                                                                                                                                                                        
									modelCentro: oData2.results                                                                                                                                                                                                                           
								});                                                                                                                                                                                                                                                    
								//								                                                                                                                                                                                                                                             
								then.oView.byId("idTableCentroPlan").setVisibleRowCount(oData2.results.length);                                                                                                                                                                        
								then.oView.byId("idTableCentroPlan").setModel(json1);                                                                                                                                                                                                  
								then.oView.byId("idTableCentroPlan").bindRows("/modelCentro");                                                                                                                                                                                         
								//		then.calcCentroTrabalho();                                                                                                                                                                                                                         
								then.onBackMonth();                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
							},                                                                                                                                                                                                                                                      
							error: function (oError) {                                                                                                                                                                                                                              
								//                          ;                                                                                                                                                                                                                          
							}                                                                                                                                                                                                                                                       
						});                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
					},                                                                                                                                                                                                                                                        
					error: function (oError) {                                                                                                                                                                                                                                
						//		;                                                                                                                                                                                                                                                    
					}                                                                                                                                                                                                                                                         
				});                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		handleItemPress: function (oEvent) {                                                                                                                                                                                                                         
			//		    sap.ui.getCore().Begda = this.oView.getModel("modelWeekDate").getData().Begda;                                                                                                                                                                      
			var model = "";                                                                                                                                                                                                                                             
			var line = -1;                                                                                                                                                                                                                                              
			var tab = undefined, //;                                                                                                                                                                                                                                    
				//                                                                                                                                                                                                                                                         
				line = this.oView.byId("idTableProc").getSelectedIndex();                                                                                                                                                                                                  
			tab = this.oView.byId("idTableProc");                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
			if (line < 0) {                                                                                                                                                                                                                                             
				MessageToast.show("Selecionar tarefa", {                                                                                                                                                                                                                   
					my: "center center", // default                                                                                                                                                                                                                           
					at: "center center", // default                                                                                                                                                                                                                           
				});                                                                                                                                                                                                                                                        
			} else {                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
				sap.ui.core.BusyIndicator.show(0);                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
				var tarefa = this.oView.byId("idTableProc").getRows()[line].getCells()[0].getProperty('text');                                                                                                                                                             
                                                                                                                                                                                                                                                               
				for (var x = 0; x < this.oView.byId("idTableProc").getModel().getData().modelTask.length; x++) {                                                                                                                                                           
					if (this.oView.byId("idTableProc").getModel().getData().modelTask[x].Wgbez === tarefa) {                                                                                                                                                                  
						var lineTask = x;                                                                                                                                                                                                                                        
						break;                                                                                                                                                                                                                                                   
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
				sap.ui.getCore().dadosDetail = tab.getModel().getData().modelTask[lineTask];                                                                                                                                                                               
				//            sap.ui.getCore().dadosDetail = oEvent.getParameter("listItem").getBindingContext("modelGetDataDetail1").getProperty();                                                                                                                       
				this.getOwnerComponent().getRouter()                                                                                                                                                                                                                       
					.navTo("Detail2", {                                                                                                                                                                                                                                       
						Acnum: sap.ui.getCore().dadosMaster.Acnum,                                                                                                                                                                                                               
						Matkl: sap.ui.getCore().dadosDetail.Matkl                                                                                                                                                                                                                
					});                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
			sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		handleCalendarSelect: function (oEvent) {                                                                                                                                                                                                                    
			var that = this;                                                                                                                                                                                                                                            
			sap.ui.core.BusyIndicator.show(0);                                                                                                                                                                                                                          
			sap.ui.getCore().calendarStartDate = oEvent.getSource().getStartDate();                                                                                                                                                                                     
			var oDateFormat = DateFormat.getDateInstance({                                                                                                                                                                                                              
				pattern: "yyyyMMdd"                                                                                                                                                                                                                                        
			});                                                                                                                                                                                                                                                         
			var date = oDateFormat.format(that.oView.byId("idCalendar").getStartDate());                                                                                                                                                                                
                                                                                                                                                                                                                                                               
			/*	var date = oEvent.getSource().getStartDate();                                                                                                                                                                                                            
				var a = date.replace("/", ".");                                                                                                                                                                                                                            
				var newDate = a.replace("/", ".");*/                                                                                                                                                                                                                       
			// if(this.oView.byId("idTableProc").getItems().length > 0) {                                                                                                                                                                                               
			//     this.oView.byId("idTableProc").destroyItems();                                                                                                                                                                                                       
			// }                                                                                                                                                                                                                                                        
			// if(this.oView.byId("idTableCentro").getItems().length > 0) {                                                                                                                                                                                             
			//     this.oView.byId("idTableCentro").destroyItems();                                                                                                                                                                                                     
			// }		&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                              
			var oFilters = [];                                                                                                                                                                                                                                          
			oFilters.push(new sap.ui.model.Filter("Extwg", "EQ", sap.ui.getCore().dadosProcessoId));                                                                                                                                                                    
			oFilters.push(new sap.ui.model.Filter("Acnum", "EQ", sap.ui.getCore().dadosMaster.Acnum));                                                                                                                                                                  
			oFilters.push(new sap.ui.model.Filter("Begda_aux", "EQ", date));                                                                                                                                                                                            
			this.onGetDataDetail("/GetDetail1DataSet", "modelGetDataDetail1", oFilters);                                                                                                                                                                                
                                                                                                                                                                                                                                                               
			//		    this.setDatesTable(oEvent);                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		onNavBack: function () {                                                                                                                                                                                                                                     
			var sPreviousHash = History.getInstance().getPreviousHash();                                                                                                                                                                                                
			//The history contains a previous entry                                                                                                                                                                                                                     
			if (sPreviousHash !== undefined) {                                                                                                                                                                                                                          
				history.go(-1);                                                                                                                                                                                                                                            
			} else {                                                                                                                                                                                                                                                    
				// There is no history!                                                                                                                                                                                                                                    
				// Naviate to master page                                                                                                                                                                                                                                  
				this.getOwnerComponent().getRouter().navTo("master", {}, true);                                                                                                                                                                                            
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		onAfterRendering: function () {                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
			//		                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		onBeforeRendering: function () {                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
			//		                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		calcCentroTrabalho: function () {                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
			switch (this.seg_key) {                                                                                                                                                                                                                                     
			case "plan":                                                                                                                                                                                                                                                
				var oTab = this.oView.byId("idTablePlan").getModel().getData().modelTask;                                                                                                                                                                                  
				var oModelCentro = this.oView.byId("idTableCentroPlan");                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
				for (var x = 1; x <= 5; x++) {                                                                                                                                                                                                                             
					var total = 0;                                                                                                                                                                                                                                            
					for (var y = 0; y < oTab.length; y++) {                                                                                                                                                                                                                   
						var a = 0;                                                                                                                                                                                                                                               
						if (oTab[y]['D' + x] !== "") {                                                                                                                                                                                                                           
							a = oTab[y]['D' + x];                                                                                                                                                                                                                                   
						}                                                                                                                                                                                                                                                        
						var b = parseFloat(a).toFixed(2);                                                                                                                                                                                                                        
						var c = parseFloat(oTab[y].MediaRend);                                                                                                                                                                                                                   
						if (c !== 0) {                                                                                                                                                                                                                                           
							var d = b / c;                                                                                                                                                                                                                                          
							var e = d.toFixed(2);                                                                                                                                                                                                                                   
							total = parseFloat(total) + parseFloat(e);                                                                                                                                                                                                              
						}                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
					}                                                                                                                                                                                                                                                         
					var fix = total.toFixed(2);                                                                                                                                                                                                                               
					// Atualiza capacidade total                                                                                                                                                                                                                              
					for (var i = 0; i < oModelCentro.getModel().getData().modelCentro.length; i++) {                                                                                                                                                                          
						var line = oModelCentro.getModel().getData().modelCentro[i];                                                                                                                                                                                             
						var val = 0.00;                                                                                                                                                                                                                                          
						if (parseFloat(line['d' + x].split("/")[1]) > 0) {                                                                                                                                                                                                       
							val = parseFloat(line['d' + x].split("/")[1]);                                                                                                                                                                                                          
						}                                                                                                                                                                                                                                                        
						oModelCentro.getModel().setProperty("/modelCentro/" + i.toString() + "/d" + x.toString(), fix.toString() + " / " + val.toFixed(2));                                                                                                                      
						//						oModelCentro.getModel().refresh();                                                                                                                                                                                                               
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
				break;                                                                                                                                                                                                                                                     
			case "prog":                                                                                                                                                                                                                                                
				oTab = this.oView.byId("idTableProc").getModel().getData().modelTask;                                                                                                                                                                                      
				oModelCentro = this.oView.byId("idTableCentro");                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
				for (x = 1; x <= 5; x++) {                                                                                                                                                                                                                                 
					total = 0;                                                                                                                                                                                                                                                
					for (y = 0; y < oTab.length; y++) {                                                                                                                                                                                                                       
						a = 0;                                                                                                                                                                                                                                                   
						if (oTab[y]['D' + x] !== "") {                                                                                                                                                                                                                           
							a = oTab[y]['D' + x];                                                                                                                                                                                                                                   
						}                                                                                                                                                                                                                                                        
						b = parseFloat(a).toFixed(2);                                                                                                                                                                                                                            
						c = parseFloat(oTab[y].MediaRend);                                                                                                                                                                                                                       
						if (c !== 0) {                                                                                                                                                                                                                                           
							d = b / c;                                                                                                                                                                                                                                              
							e = d.toFixed(2);                                                                                                                                                                                                                                       
							total = parseFloat(total) + parseFloat(e);                                                                                                                                                                                                              
						}                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
					}                                                                                                                                                                                                                                                         
					fix = total.toFixed(2);                                                                                                                                                                                                                                   
					// Atualiza capacidade total                                                                                                                                                                                                                              
					for (i = 0; i < oModelCentro.getModel().getData().modelCentro.length; i++) {                                                                                                                                                                              
						line = oModelCentro.getModel().getData().modelCentro[i];                                                                                                                                                                                                 
						val = 0.00;                                                                                                                                                                                                                                              
						if (parseFloat(line['d' + x].split("/")[1]) > 0) {                                                                                                                                                                                                       
							val = parseFloat(line['d' + x].split("/")[1]);                                                                                                                                                                                                          
						}                                                                                                                                                                                                                                                        
						oModelCentro.getModel().setProperty("/modelCentro/" + i.toString() + "/d" + x.toString(), fix.toString() + " / " + val.toFixed(2));                                                                                                                      
						//						oModelCentro.getModel().refresh();                                                                                                                                                                                                               
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
				break;                                                                                                                                                                                                                                                     
			default:                                                                                                                                                                                                                                                    
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		live: function (oEvent) {                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
			var sQuery = oEvent.getParameter("newValue");                                                                                                                                                                                                               
			var id = undefined;                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			switch (oEvent.getSource().sId.split('-')[2]) {                                                                                                                                                                                                             
			case "idTableProcSearch":                                                                                                                                                                                                                                   
				id = "idTableProc";                                                                                                                                                                                                                                        
				break;                                                                                                                                                                                                                                                     
			case "idTablePlanSearch":                                                                                                                                                                                                                                   
				id = "idTablePlan";                                                                                                                                                                                                                                        
				break;                                                                                                                                                                                                                                                     
			case "idTableOrcSearch":                                                                                                                                                                                                                                    
				id = "idTarefaInsumo";                                                                                                                                                                                                                                     
				break;                                                                                                                                                                                                                                                     
			default:                                                                                                                                                                                                                                                    
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			var filter = new sap.ui.model.Filter("Wgbez", sap.ui.model.FilterOperator.Contains, sQuery);                                                                                                                                                                
                                                                                                                                                                                                                                                               
			// update list binding                                                                                                                                                                                                                                      
			var list = this.getView().byId([id]);                                                                                                                                                                                                                       
			var binding = list.getBinding("rows");                                                                                                                                                                                                                      
			binding.filter(filter, "Application");                                                                                                                                                                                                                      
			//		this.getView().byId([id]).getModel().refresh();                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onCreateOrder: function () {                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
			sap.ui.core.BusyIndicator.show(0);                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			var that = this;                                                                                                                                                                                                                                            
			var oFilters = [];                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			oFilters.push(new sap.ui.model.Filter("Acnum", "EQ", sap.ui.getCore().dadosMaster.Acnum));                                                                                                                                                                  
			oFilters.push(new sap.ui.model.Filter("Actyp", "EQ", sap.ui.getCore().dadosMaster.Actyp));                                                                                                                                                                  
			oFilters.push(new sap.ui.model.Filter("Ajahr", "EQ", sap.ui.getCore().dadosMaster.Ajahr));                                                                                                                                                                  
			//	;                                                                                                                                                                                                                                                        
			this.oModel.read("/CreateOrderProcessSet", {                                                                                                                                                                                                                
				filters: oFilters,                                                                                                                                                                                                                                         
				success: function (oData) {                                                                                                                                                                                                                                
					///		;                                                                                                                                                                                                                                                    
					var json = new JSONModel();                                                                                                                                                                                                                               
					json.setData(oData);                                                                                                                                                                                                                                      
					// 	that.oView.byId("idTabPlan").setModel(json, "modelPlan");                                                                                                                                                                                             
					sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
					var oDialog = new sap.m.Dialog({                                                                                                                                                                                                                          
						draggable: true,                                                                                                                                                                                                                                         
						resizable: true,                                                                                                                                                                                                                                         
						buttons: [                                                                                                                                                                                                                                               
							new sap.m.Button({                                                                                                                                                                                                                                      
								text: "OK",                                                                                                                                                                                                                                            
								type: sap.m.ButtonType.Accepty,                                                                                                                                                                                                                        
								press: [function (oEvent) {                                                                                                                                                                                                                            
									oEvent.getSource().getParent().close();                                                                                                                                                                                                               
								}]                                                                                                                                                                                                                                                     
							})                                                                                                                                                                                                                                                      
						]                                                                                                                                                                                                                                                        
					});                                                                                                                                                                                                                                                       
					// var oClose = new sap.m.Button({text:"OK", type: sap.m.ButtonType.Accepty, press: function(oEvent) {                                                                                                                                                    
					// 	sap.ui.getCore().byId(that.createId("idLog")).close();                                                                                                                                                                                                
					// }});		                                                                                                                                                                                                                                                 
					var oTable = new sap.m.Table();                                                                                                                                                                                                                           
					var oCol1 = new sap.m.Column({                                                                                                                                                                                                                            
						width: "150px",                                                                                                                                                                                                                                          
						header: new sap.m.Label({                                                                                                                                                                                                                                
							text: "Terreno"                                                                                                                                                                                                                                         
						})                                                                                                                                                                                                                                                       
					});                                                                                                                                                                                                                                                       
					var oCol2 = new sap.m.Column({                                                                                                                                                                                                                            
						width: "150px",                                                                                                                                                                                                                                          
						header: new sap.m.Label({                                                                                                                                                                                                                                
							text: "Ordem"                                                                                                                                                                                                                                           
						})                                                                                                                                                                                                                                                       
					});                                                                                                                                                                                                                                                       
					var oCol3 = new sap.m.Column({                                                                                                                                                                                                                            
						width: "60px",                                                                                                                                                                                                                                           
						header: new sap.m.Label({                                                                                                                                                                                                                                
							text: "Status"                                                                                                                                                                                                                                          
						})                                                                                                                                                                                                                                                       
					});                                                                                                                                                                                                                                                       
					var oCol4 = new sap.m.Column({                                                                                                                                                                                                                            
						width: "auto",                                                                                                                                                                                                                                           
						header: new sap.m.Label({                                                                                                                                                                                                                                
							text: "Descri??o"                                                                                                                                                                                                                                       
						})                                                                                                                                                                                                                                                       
					});                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
					oTable.addColumn(oCol1);                                                                                                                                                                                                                                  
					oTable.addColumn(oCol2);                                                                                                                                                                                                                                  
					oTable.addColumn(oCol3);                                                                                                                                                                                                                                  
					oTable.addColumn(oCol4);                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
					var oTemp = new sap.m.ColumnListItem();                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
					oTemp.addCell(new sap.m.Label({                                                                                                                                                                                                                           
						text: "{modelLog>TplnrFl}"                                                                                                                                                                                                                               
					}));                                                                                                                                                                                                                                                      
					oTemp.addCell(new sap.m.Label({                                                                                                                                                                                                                           
						text: "{modelLog>Aufnr}"                                                                                                                                                                                                                                 
					}));                                                                                                                                                                                                                                                      
					oTemp.addCell(new sap.ui.core.Icon({                                                                                                                                                                                                                      
						src: {                                                                                                                                                                                                                                                   
							path: 'modelLog>Status',                                                                                                                                                                                                                                
							formatter: function (d) {                                                                                                                                                                                                                               
								//		                                                                                                                                                                                                                                                   
								if (d === "S") {                                                                                                                                                                                                                                       
									return "sap-icon://message-success";                                                                                                                                                                                                                  
								} else if (d === "W") {                                                                                                                                                                                                                                
									return "sap-icon://message-warning";                                                                                                                                                                                                                  
								} else if (d === "E") {                                                                                                                                                                                                                                
									return "sap-icon://message-error";                                                                                                                                                                                                                    
								}                                                                                                                                                                                                                                                      
							}                                                                                                                                                                                                                                                       
						},                                                                                                                                                                                                                                                       
						color: {                                                                                                                                                                                                                                                 
							path: "modelLog>Status",                                                                                                                                                                                                                                
							formatter: function (c) {                                                                                                                                                                                                                               
								//		                                                                                                                                                                                                                                                   
								if (c === "S") {                                                                                                                                                                                                                                       
									return "green";                                                                                                                                                                                                                                       
								} else if (c === "W") {                                                                                                                                                                                                                                
									return "yellow";                                                                                                                                                                                                                                      
								} else if (c === "E") {                                                                                                                                                                                                                                
									return "red";                                                                                                                                                                                                                                         
								}                                                                                                                                                                                                                                                      
							}                                                                                                                                                                                                                                                       
						}                                                                                                                                                                                                                                                        
					}));                                                                                                                                                                                                                                                      
					oTemp.addCell(new sap.m.Label({                                                                                                                                                                                                                           
						text: "{modelLog>Descr}"                                                                                                                                                                                                                                 
					}));                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
					oTable.setModel(json, "modelLog");                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
					// SET TAB MODEL&nbsp;                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
					oTable.bindAggregation("items", {                                                                                                                                                                                                                         
						path: "modelLog>/results",                                                                                                                                                                                                                               
						template: oTemp                                                                                                                                                                                                                                          
					});                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
					oDialog.setTitle("Log");                                                                                                                                                                                                                                  
					oDialog.setContentWidth("auto");                                                                                                                                                                                                                          
					oDialog.setContentHeight("300px");                                                                                                                                                                                                                        
					oDialog.addContent(oTable);                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
					oDialog.open();                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
					//			;                                                                                                                                                                                                                                                    
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		}                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
	});                                                                                                                                                                                                                                                           
});                                                                                                                                                                                                                                                            