var myFormatter = {                                                                                                                                                                                                                                            
	formatColor: function (v) {                                                                                                                                                                                                                                   
		this.removeStyleClass("red");                                                                                                                                                                                                                                
		this.removeStyleClass("green");                                                                                                                                                                                                                              
		if (v !== null && v !== undefined) {                                                                                                                                                                                                                         
			var v1 = v.split("/")[0];                                                                                                                                                                                                                                   
			var v2 = v.split("/")[1];                                                                                                                                                                                                                                   
			if (v1 === "") {                                                                                                                                                                                                                                            
				v1 = 0.00;                                                                                                                                                                                                                                                 
			}                                                                                                                                                                                                                                                           
			if (v2 === undefined) {                                                                                                                                                                                                                                     
				v2 = 0.00;                                                                                                                                                                                                                                                 
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			if (v1 !== "" && v2 !== "") {                                                                                                                                                                                                                               
				var b1 = parseFloat(v1);                                                                                                                                                                                                                                   
				var b2 = parseFloat(v2);                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
				if (b1 > b2) {                                                                                                                                                                                                                                             
					this.addStyleClass("red");                                                                                                                                                                                                                                
				} else if (b1 < b2) {                                                                                                                                                                                                                                      
					this.addStyleClass("green");                                                                                                                                                                                                                              
				}                                                                                                                                                                                                                                                          
			}                                                                                                                                                                                                                                                           
		}                                                                                                                                                                                                                                                            
		return v;                                                                                                                                                                                                                                                    
	}                                                                                                                                                                                                                                                             
};                                                                                                                                                                                                                                                             
sap.ui.define([                                                                                                                                                                                                                                                
	"sap/ui/core/mvc/Controller",                                                                                                                                                                                                                                 
	"com/vistex/zagriplan/model/models",                                                                                                                                                                                                                          
	"sap/ui/model/json/JSONModel",                                                                                                                                                                                                                                
	"sap/ui/Device",                                                                                                                                                                                                                                              
	"sap/ui/core/routing/History",                                                                                                                                                                                                                                
	"sap/m/MessageBox",                                                                                                                                                                                                                                           
	'sap/ui/core/format/DateFormat',                                                                                                                                                                                                                              
	"sap/ui/model/odata/v2/ODataModel","com/vistex/zagriplan/model/base"                                                                                                                                                                                          
], function (Controller, models, JSONModel, Device, History, MessageBox, DateFormat,ODataModel,base) {                                                                                                                                                         
	"use strict";                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
	return Controller.extend("com.vistex.zagriplan.controller.Detail2", {                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		formatValue: function (value) {                                                                                                                                                                                                                              
			// 			                                                                                                                                                                                                                                                      
			if (value === "0") {                                                                                                                                                                                                                                        
				return "";                                                                                                                                                                                                                                                 
			} else {                                                                                                                                                                                                                                                    
				return value;                                                                                                                                                                                                                                              
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		onColor: function (value) {                                                                                                                                                                                                                                  
			//		                                                                                                                                                                                                                                                        
			if (value > 0) {                                                                                                                                                                                                                                            
				this.addStyleClass("green");                                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		formatColor: function (val) {                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
			//		                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		setEditable: function (i, x) {                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
			if (i === "Total") {                                                                                                                                                                                                                                        
				return false;                                                                                                                                                                                                                                              
			} else {                                                                                                                                                                                                                                                    
				return true;                                                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		checkSplitMode: function () {                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
			if (this.oView.getParent().getParent().getMode() === sap.m.SplitAppMode.HideMode) {                                                                                                                                                                         
				this.oView.byId("idFull").setVisible(false);                                                                                                                                                                                                               
				this.oView.byId("idExit").setVisible(true);                                                                                                                                                                                                                
			} else if (this.oView.getParent().getParent().getMode() === sap.m.SplitAppMode.ShowHideMode) {                                                                                                                                                              
				this.oView.byId("idFull").setVisible(true);                                                                                                                                                                                                                
				this.oView.byId("idExit").setVisible(false);                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		onBack: function () {                                                                                                                                                                                                                                        
			var d = new Date(this.oView.byId("idCalendar").getStartDate());                                                                                                                                                                                             
			var e = d.setDate(d.getDate() - 5);                                                                                                                                                                                                                         
			var f = new Date(e);                                                                                                                                                                                                                                        
			this.oView.byId("idCalendar").setStartDate(f);                                                                                                                                                                                                              
			this.oView.byId("idCalendar").fireStartDateChange();                                                                                                                                                                                                        
			this.onChangeDates();                                                                                                                                                                                                                                       
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onNext: function () {                                                                                                                                                                                                                                        
			var d = new Date(this.oView.byId("idCalendar").getStartDate());                                                                                                                                                                                             
			var e = d.setDate(d.getDate() + 5);                                                                                                                                                                                                                         
			var f = new Date(e);                                                                                                                                                                                                                                        
			this.oView.byId("idCalendar").setStartDate(f);                                                                                                                                                                                                              
			this.oView.byId("idCalendar").fireStartDateChange();                                                                                                                                                                                                        
			this.onChangeDates();                                                                                                                                                                                                                                       
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		//BOC-T_T.KONNO-07.02.20                                                                                                                                                                                                                                     
		//createModelMesAno: function (oDate, oAno, oMes) {                                                                                                                                                                                                          
		createModelMesAno: function (oData, oDia, oMes, oAno) {                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
			/*			var oMes = null;                                                                                                                                                                                                                                       
						var oAno = null;                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
						if (oDate) {                                                                                                                                                                                                                                             
							oAno = oDate.getFullYear().toString();                                                                                                                                                                                                                  
							oMes = (new Date().getMonth() + 1).toString();                                                                                                                                                                                                          
						} else {                                                                                                                                                                                                                                                 
							oAno = new Date().getFullYear().toString();                                                                                                                                                                                                             
							oMes = (new Date().getMonth() + 1).toString();                                                                                                                                                                                                          
						}*/                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
			// Monta o model de Mês                                                                                                                                                                                                                                     
			var objMes = {                                                                                                                                                                                                                                              
				meses: [{                                                                                                                                                                                                                                                  
					"txt": "Janeiro",                                                                                                                                                                                                                                         
					"valor": "01"                                                                                                                                                                                                                                             
				}, {                                                                                                                                                                                                                                                       
					"txt": "Fevereiro",                                                                                                                                                                                                                                       
					"valor": "02"                                                                                                                                                                                                                                             
				}, {                                                                                                                                                                                                                                                       
					"txt": "Março",                                                                                                                                                                                                                                           
					"valor": "03"                                                                                                                                                                                                                                             
				}, {                                                                                                                                                                                                                                                       
					"txt": "Abril",                                                                                                                                                                                                                                           
					"valor": "04"                                                                                                                                                                                                                                             
				}, {                                                                                                                                                                                                                                                       
					"txt": "Maio",                                                                                                                                                                                                                                            
					"valor": "05"                                                                                                                                                                                                                                             
				}, {                                                                                                                                                                                                                                                       
					"txt": "Junho",                                                                                                                                                                                                                                           
					"valor": "06"                                                                                                                                                                                                                                             
				}, {                                                                                                                                                                                                                                                       
					"txt": "Julho",                                                                                                                                                                                                                                           
					"valor": "07"                                                                                                                                                                                                                                             
				}, {                                                                                                                                                                                                                                                       
					"txt": "Agosto",                                                                                                                                                                                                                                          
					"valor": "08"                                                                                                                                                                                                                                             
				}, {                                                                                                                                                                                                                                                       
					"txt": "Setembro",                                                                                                                                                                                                                                        
					"valor": "09"                                                                                                                                                                                                                                             
				}, {                                                                                                                                                                                                                                                       
					"txt": "Outubro",                                                                                                                                                                                                                                         
					"valor": "10"                                                                                                                                                                                                                                             
				}, {                                                                                                                                                                                                                                                       
					"txt": "Novembro",                                                                                                                                                                                                                                        
					"valor": "11"                                                                                                                                                                                                                                             
				}, {                                                                                                                                                                                                                                                       
					"txt": "Dezembro",                                                                                                                                                                                                                                        
					"valor": "12"                                                                                                                                                                                                                                             
				}],                                                                                                                                                                                                                                                        
				mes: oMes                                                                                                                                                                                                                                                  
			};                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			//Define o tipo do Model                                                                                                                                                                                                                                    
			var oModelMes = new sap.ui.model.json.JSONModel();                                                                                                                                                                                                          
			//Define o caminho dos dados                                                                                                                                                                                                                                
			oModelMes.setData(objMes);                                                                                                                                                                                                                                  
			this.getView().setModel(oModelMes, "MDL_Mes");                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
			// Monta o model de Ano                                                                                                                                                                                                                                     
			/*			for (var x = 0; x < 3; x++) {                                                                                                                                                                                                                          
			&nbsp;                                                                                                                                                                                                                                                      
						}*/                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
			/*			var objAno = {};                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
						objAno.anos = new Array();                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
						oAno = oAno--;                                                                                                                                                                                                                                           
						oAno = oAno--;                                                                                                                                                                                                                                           
						for (var i = 0; i < 3; i++) {                                                                                                                                                                                                                            
							oAno = oAno++;                                                                                                                                                                                                                                          
							objAno.anos.push({                                                                                                                                                                                                                                      
								"txt": oAno,                                                                                                                                                                                                                                           
								"valor": oAno                                                                                                                                                                                                                                          
							});                                                                                                                                                                                                                                                     
						}*/                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
			var objAno = {                                                                                                                                                                                                                                              
				anos: [{                                                                                                                                                                                                                                                   
					"txt": "2018",                                                                                                                                                                                                                                            
					"valor": "2018"                                                                                                                                                                                                                                           
				}, {                                                                                                                                                                                                                                                       
					"txt": "2019",                                                                                                                                                                                                                                            
					"valor": "2019"                                                                                                                                                                                                                                           
				}, {                                                                                                                                                                                                                                                       
					"txt": "2020",                                                                                                                                                                                                                                            
					"valor": "2020"                                                                                                                                                                                                                                           
				}, {                                                                                                                                                                                                                                                       
					"txt": "2021",                                                                                                                                                                                                                                            
					"valor": "2021"                                                                                                                                                                                                                                           
				}],                                                                                                                                                                                                                                                        
				ano: oAno                                                                                                                                                                                                                                                  
			};                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			//Define o tipo do Model                                                                                                                                                                                                                                    
			var oModelAno = new sap.ui.model.json.JSONModel();                                                                                                                                                                                                          
			//Define o caminho dos dados                                                                                                                                                                                                                                
			oModelAno.setData(objAno);                                                                                                                                                                                                                                  
			this.getView().setModel(oModelAno, "MDL_Ano");                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
			//BOC-T_T.KONNO-07.02.20		                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
			var oSelectMes = this.byId("select0");                                                                                                                                                                                                                      
			oSelectMes.setSelectedKey(oMes);                                                                                                                                                                                                                            
			var oSelectAno = this.byId("select1");                                                                                                                                                                                                                      
			oSelectAno.setSelectedKey(oAno);                                                                                                                                                                                                                            
			//EOC-T_T.KONNO-07.02.20&nbsp;                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
			this.getView().getModel("MDL_Mes").refresh(true);                                                                                                                                                                                                           
			this.getView().getModel("MDL_Ano").refresh(true);                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		/*		onUpdateCalendar: function () {                                                                                                                                                                                                                          
					var d = new Date(this.oView.byId("idCalendar").getStartDate());                                                                                                                                                                                           
					var e = d.setDate(d.getDate() + 5);                                                                                                                                                                                                                       
					var f = new Date(e);                                                                                                                                                                                                                                      
					this.oView.byId("idCalendar").setStartDate(f);                                                                                                                                                                                                            
					this.oView.byId("idCalendar").fireStartDateChange();                                                                                                                                                                                                      
				},*/                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
		onSelectchange: function (evt) {                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
			var oMes = this.getView().byId("select0").getSelectedKey();                                                                                                                                                                                                 
			var oAno = this.getView().byId("select1").getSelectedKey();                                                                                                                                                                                                 
			var nDate = new Date(oAno, parseInt(oMes) - 1, 1);                                                                                                                                                                                                          
			this.oView.byId("idCalendar").setStartDate(nDate);                                                                                                                                                                                                          
			this.oView.byId("idCalendar").fireStartDateChange();                                                                                                                                                                                                        
			// Setar aqui o Calendar Interval com a variavel nDate                                                                                                                                                                                                      
			// Chamar o evento atualização do Calendar Interval (fire…)                                                                                                                                                                                                 
		},                                                                                                                                                                                                                                                           
		//EOC-T_T.KONNO-07.02.20&nbsp;                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
		onInit: function () {                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
			sap.ui.getCore().capacidadeProg = [];                                                                                                                                                                                                                       
			this.oModel1 = models.callBackEnd();                                                                                                                                                                                                                        
			this.oModel2 = models.getSetProgramacao();                                                                                                                                                                                                                  
			this.oView.byId("c1").setHeaderSpan([2, 1]);                                                                                                                                                                                                                
			this.oView.byId("c2").setHeaderSpan([2, 1]);                                                                                                                                                                                                                
			this.oView.byId("c3").setHeaderSpan([2, 1]);                                                                                                                                                                                                                
			this.oView.byId("c4").setHeaderSpan([2, 1]);                                                                                                                                                                                                                
			this.oView.byId("c5").setHeaderSpan([2, 1]);                                                                                                                                                                                                                
			this.onChangeDates();                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
			var oFilters = [];                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			oFilters.push(new sap.ui.model.Filter("Acnum", "EQ", sap.ui.getCore().dadosMaster.Acnum));                                                                                                                                                                  
			oFilters.push(new sap.ui.model.Filter("Werks", "EQ", sap.ui.getCore().dadosMaster.Werks));                                                                                                                                                                  
			oFilters.push(new sap.ui.model.Filter("Matkl", "EQ", sap.ui.getCore().dadosDetail.Matkl));                                                                                                                                                                  
                                                                                                                                                                                                                                                               
			this.oModel1.read("/GetVolumeCaldaSet", {                                                                                                                                                                                                                   
				filters: oFilters,                                                                                                                                                                                                                                         
				success: function (oData) {                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
					sap.ui.getCore().volumeCalda = oData.results;                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
					//					                                                                                                                                                                                                                                                   
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
					//					                                                                                                                                                                                                                                                   
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			this.getOwnerComponent().getRouter().getRoute("Detail2").attachPatternMatched(this._onRouteMatched, this);                                                                                                                                                  
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		onFullScreen: function (oEvent) {                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
			switch (oEvent.getSource().sId.split('-')[2]) {                                                                                                                                                                                                             
			case "idFull":                                                                                                                                                                                                                                              
				this.getView().getParent().getParent().setMode(sap.m.SplitAppMode.HideMode);                                                                                                                                                                               
				this.oView.byId("idFull").setVisible(false);                                                                                                                                                                                                               
				this.oView.byId("idExit").setVisible(true);                                                                                                                                                                                                                
				break;                                                                                                                                                                                                                                                     
			case "idExit":                                                                                                                                                                                                                                              
				this.getView().getParent().getParent().setMode(sap.m.SplitAppMode.ShowHideMode);                                                                                                                                                                           
				this.oView.byId("idExit").setVisible(false);                                                                                                                                                                                                               
				this.oView.byId("idFull").setVisible(true);                                                                                                                                                                                                                
				break;                                                                                                                                                                                                                                                     
			default:                                                                                                                                                                                                                                                    
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		addDays: function (date, days) {                                                                                                                                                                                                                             
			var result = new Date(date);                                                                                                                                                                                                                                
			result.setDate(result.getDate() + days);                                                                                                                                                                                                                    
			return result;                                                                                                                                                                                                                                              
		},                                                                                                                                                                                                                                                           
		_onRouteMatched: function (oEvent) {                                                                                                                                                                                                                         
			// Set values                                                                                                                                                                                                                                               
			this.checkSplitMode();                                                                                                                                                                                                                                      
			/*var date = this.addDays(new Date(sap.ui.getCore().Begda.substr(0, 4) + '-' + sap.ui.getCore().Begda.substr(4, 2) + '-' + sap.ui.getCore()                                                                                                                 
				.Begda.substr(6, 2)), 1);*/                                                                                                                                                                                                                                
			this.oView.byId("idCalendar").setStartDate(new Date());                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
			sap.ui.core.BusyIndicator.show(0);                                                                                                                                                                                                                          
			var that = this;                                                                                                                                                                                                                                            
			this.oView.byId("idArea").setText(sap.ui.getCore().dadosMaster.Acdes);                                                                                                                                                                                      
			this.oView.byId("idCentro").setText(sap.ui.getCore().dadosMaster.Werks);                                                                                                                                                                                    
			this.oView.byId("idSafra").setText(sap.ui.getCore().dadosMaster.Ajahr);                                                                                                                                                                                     
			this.oView.byId("idProc").setText(sap.ui.getCore().dadosProcesso);                                                                                                                                                                                          
			this.oView.byId("idTask").setText(sap.ui.getCore().dadosDetail.Wgbez);                                                                                                                                                                                      
			//			                                                                                                                                                                                                                                                       
			this.oView.byId("idPlanMensal").setText(sap.ui.getCore().dadosDetail.Planejado);                                                                                                                                                                            
			this.onGetDataDetail("/SetGetDataProgSet", "modelProg", this.oFilters1);                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		onNavBack: function () {                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
			sap.ui.getCore().Date = this.oView.byId("idCalendar").getStartDate();                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
			var sPreviousHash = History.getInstance().getPreviousHash();                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
			if (sPreviousHash !== undefined) {                                                                                                                                                                                                                          
				window.history.go(-1);                                                                                                                                                                                                                                     
			} else {                                                                                                                                                                                                                                                    
				this.getOwnerComponent().getRouter()                                                                                                                                                                                                                       
					.navTo("Detail1", {                                                                                                                                                                                                                                       
						Acnum: sap.ui.getCore().dadosMaster.Acnum                                                                                                                                                                                                                
					}, !Device.system.phone);                                                                                                                                                                                                                                 
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		onSaveProg: function (oEvent, p_msg) {                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
			//			                                                                                                                                                                                                                                                       
			var that = this;                                                                                                                                                                                                                                            
			if (p_msg === undefined) {                                                                                                                                                                                                                                  
				this.p_msg = true;                                                                                                                                                                                                                                         
			} else {                                                                                                                                                                                                                                                    
				this._p_msg = false;                                                                                                                                                                                                                                       
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			var oModel = models.getSetProgramacao();                                                                                                                                                                                                                    
			oModel.setDefaultBindingMode(sap.ui.model.BindingMode.TwoWay);                                                                                                                                                                                              
			oModel.setUseBatch(true);                                                                                                                                                                                                                                   
			oModel.setDeferredGroups(["foo"]);                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			var oTabDados = this.oView.byId("idTabProg").getModel().getData().modelProg;                                                                                                                                                                                
                                                                                                                                                                                                                                                               
			var oTabDataModel = [];                                                                                                                                                                                                                                     
			oTabDataModel.push(oTabDados[0]);                                                                                                                                                                                                                           
			oTabDataModel.push(oTabDados[1]);                                                                                                                                                                                                                           
			oTabDataModel.push(oTabDados[2]);                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			var oDados = [];                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
			for (var x = 0; x < 3; x++) {                                                                                                                                                                                                                               
				var line = oTabDataModel[x];                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
				line.Acnum = sap.ui.getCore().dadosMaster.Acnum;                                                                                                                                                                                                           
				line.Processo = sap.ui.getCore().dadosProcessoId;                                                                                                                                                                                                          
				line.Matkl = sap.ui.getCore().dadosDetail.Matkl;                                                                                                                                                                                                           
				line.Begda = this.oView.getModel("modelWeekDate").getData().Begda;                                                                                                                                                                                         
				line.D1h = this.oView.byId("idTabProg").getRows()[x].getCells()[1].getValue();                                                                                                                                                                             
				line.D1r = this.oView.byId("idTabProg").getRows()[x].getCells()[2].getValue();                                                                                                                                                                             
				if (line.D1r === "") {                                                                                                                                                                                                                                     
					line.D1r = "0.00";                                                                                                                                                                                                                                        
				}                                                                                                                                                                                                                                                          
				line.D2h = this.oView.byId("idTabProg").getRows()[x].getCells()[3].getValue();                                                                                                                                                                             
				line.D2r = this.oView.byId("idTabProg").getRows()[x].getCells()[4].getValue();                                                                                                                                                                             
				if (line.D2r === "") {                                                                                                                                                                                                                                     
					line.D2r = "0.00";                                                                                                                                                                                                                                        
				}                                                                                                                                                                                                                                                          
				line.D3h = this.oView.byId("idTabProg").getRows()[x].getCells()[5].getValue();                                                                                                                                                                             
				line.D3r = this.oView.byId("idTabProg").getRows()[x].getCells()[6].getValue();                                                                                                                                                                             
				if (line.D3r === "") {                                                                                                                                                                                                                                     
					line.D3r = "0.00";                                                                                                                                                                                                                                        
				}                                                                                                                                                                                                                                                          
				line.D4h = this.oView.byId("idTabProg").getRows()[x].getCells()[7].getValue();                                                                                                                                                                             
				line.D4r = this.oView.byId("idTabProg").getRows()[x].getCells()[8].getValue();                                                                                                                                                                             
				if (line.D4r === "") {                                                                                                                                                                                                                                     
					line.D4r = "0.00";                                                                                                                                                                                                                                        
				}                                                                                                                                                                                                                                                          
				line.D5h = this.oView.byId("idTabProg").getRows()[x].getCells()[9].getValue();                                                                                                                                                                             
				line.D5r = this.oView.byId("idTabProg").getRows()[x].getCells()[10].getValue();                                                                                                                                                                            
				if (line.D5r === "") {                                                                                                                                                                                                                                     
					line.D5r = "0.00";                                                                                                                                                                                                                                        
				}                                                                                                                                                                                                                                                          
				//BOC-T_T.KONNO-07.02.20                                                                                                                                                                                                                                   
				line.Field = this.field;                                                                                                                                                                                                                                   
				//EOC-T_T.KONNO-07.02.20                                                                                                                                                                                                                                   
				oModel.create("/SetGetDataProgSet", line); //mParameters);                                                                                                                                                                                                 
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			oModel.submitChanges();                                                                                                                                                                                                                                     
			oModel.attachBatchRequestCompleted(function (oData, fnFunction, oListener) {                                                                                                                                                                                
				var bCompact = !!that.getView().$().closest(".sapUiSizeCompact").length;                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
				if (that.p_msg === true) {                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
					MessageBox.success(                                                                                                                                                                                                                                       
						"Programação salva com sucesso", {                                                                                                                                                                                                                       
							styleClass: bCompact ? "sapUiSizeCompact" : ""                                                                                                                                                                                                          
						}                                                                                                                                                                                                                                                        
					);                                                                                                                                                                                                                                                        
				}                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
				that.p_msg = false;                                                                                                                                                                                                                                        
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		onChange: function (oEvent) {                                                                                                                                                                                                                                
			//		sap.ui.getCore().capacidadeProg = [];                                                                                                                                                                                                                   
			var that = this;                                                                                                                                                                                                                                            
			var capProg = {};                                                                                                                                                                                                                                           
			var oPath = oEvent.getSource().getBindingContext().sPath;                                                                                                                                                                                                   
			var oField = oEvent.getSource().getBinding("value").sPath;                                                                                                                                                                                                  
			var enterValue = oEvent.getParameter("newValue");                                                                                                                                                                                                           
			var oTable = this.oView.byId("idTabProg");                                                                                                                                                                                                                  
			var rend = parseFloat(sap.ui.getCore().dadosDetail.MediaRend);                                                                                                                                                                                              
			var mediaHoras = 0;                                                                                                                                                                                                                                         
			var newValue = "";                                                                                                                                                                                                                                          
			if (sap.ui.getCore().horasEfetivas.results[0] !== undefined) {                                                                                                                                                                                              
				mediaHoras = parseFloat(sap.ui.getCore().horasEfetivas.results[0].Media);                                                                                                                                                                                  
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			// calcula HA                                                                                                                                                                                                                                               
			if (oField.substr(2, 1) === 'r') {                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
				if (enterValue === "" || enterValue === undefined || enterValue === "NaN") {                                                                                                                                                                               
					newValue = "0.00";                                                                                                                                                                                                                                        
				} else {                                                                                                                                                                                                                                                   
					newValue = oEvent.getParameter("newValue");                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
				}                                                                                                                                                                                                                                                          
				if (newValue.indexOf(",") > 0) {                                                                                                                                                                                                                           
					newValue.split(",");                                                                                                                                                                                                                                      
					newValue = newValue.replace(",", ".");                                                                                                                                                                                                                    
				}                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
				//BOC-T_T.KONNO-07.02.20&nbsp;                                                                                                                                                                                                                             
				/* var b = a * mediaHoras;                                                                                                                                                                                                                                 
				   var b = parseFloat(b).toFixed(2);*/                                                                                                                                                                                                                     
				/*	if ((a == "") || (a == "0,00") || (a == "0.00")) {                                                                                                                                                                                                      
						//var b = 0.00;                                                                                                                                                                                                                                          
						var b = a;                                                                                                                                                                                                                                               
					} else {                                                                                                                                                                                                                                                  
						var b = a * mediaHoras;                                                                                                                                                                                                                                  
						var b = parseFloat(b).toFixed(2);                                                                                                                                                                                                                        
					}*/                                                                                                                                                                                                                                                       
				//EOC-T_T.KONNO-07.02.20&nbsp;                                                                                                                                                                                                                             
				var b = newValue * mediaHoras;                                                                                                                                                                                                                             
				var c = b * rend;                                                                                                                                                                                                                                          
				var d = c.toFixed(2);                                                                                                                                                                                                                                      
				oTable.getModel().setProperty(oPath + "/" + oField, newValue);                                                                                                                                                                                             
				oTable.getModel().setProperty(oPath + "/" + oField.substring(0, 2) + 'h', d); //Set the property				                                                                                                                                                       
                                                                                                                                                                                                                                                               
			} else {                                                                                                                                                                                                                                                    
				var t = 0;                                                                                                                                                                                                                                                 
				var field = oField.substr(1, 1);                                                                                                                                                                                                                           
				if (enterValue === "" || enterValue === undefined || enterValue === "NaN") {                                                                                                                                                                               
					newValue = "0.00";                                                                                                                                                                                                                                        
				} else {                                                                                                                                                                                                                                                   
					newValue = oEvent.getParameter("newValue");                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
				}                                                                                                                                                                                                                                                          
				if (newValue.indexOf(",") > 0) {                                                                                                                                                                                                                           
					newValue.split(",");                                                                                                                                                                                                                                      
					newValue = newValue.replace(",", ".");                                                                                                                                                                                                                    
				}                                                                                                                                                                                                                                                          
				//				var value = parseFloat(newValue);                                                                                                                                                                                                                    
				var h = 0;                                                                                                                                                                                                                                                 
				if (rend !== 0) {                                                                                                                                                                                                                                          
					h = newValue / rend;                                                                                                                                                                                                                                      
				}                                                                                                                                                                                                                                                          
				var g = h.toFixed(2);                                                                                                                                                                                                                                      
				var j = 0;                                                                                                                                                                                                                                                 
				if (mediaHoras !== 0) {                                                                                                                                                                                                                                    
					j = h / mediaHoras;                                                                                                                                                                                                                                       
				}                                                                                                                                                                                                                                                          
				var k = j.toFixed(2);                                                                                                                                                                                                                                      
				oTable.getModel().setProperty(oPath + "/" + oField, newValue);                                                                                                                                                                                             
				oTable.getModel().setProperty(oPath + "/" + oField.substr(0, 2) + 'r', k); //Set the property					                                                                                                                                                         
                                                                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			//			oTable.getModel().setProperty(oPath + "/" + oField, newValue); //Set the property					&nbsp;                                                                                                                                                           
			oTable.getModel().setProperty("/modelProg/3/" + 'D1h', ""); //Set the property                                                                                                                                                                              
			oTable.getModel().setProperty("/modelProg/3/" + 'D1r', ""); //Set the property	                                                                                                                                                                             
			oTable.getModel().setProperty("/modelProg/3/" + 'D2h', ""); //Set the property                                                                                                                                                                              
			oTable.getModel().setProperty("/modelProg/3/" + 'D2r', ""); //Set the property                                                                                                                                                                              
			oTable.getModel().setProperty("/modelProg/3/" + 'D3h', ""); //Set the property                                                                                                                                                                              
			oTable.getModel().setProperty("/modelProg/3/" + 'D3r', ""); //Set the property	                                                                                                                                                                             
			oTable.getModel().setProperty("/modelProg/3/" + 'D4h', ""); //Set the property                                                                                                                                                                              
			oTable.getModel().setProperty("/modelProg/3/" + 'D4r', ""); //Set the property                                                                                                                                                                              
			oTable.getModel().setProperty("/modelProg/3/" + 'D5h', ""); //Set the property                                                                                                                                                                              
			oTable.getModel().setProperty("/modelProg/3/" + 'D5r', ""); //Set the property			                                                                                                                                                                           
			var total = this.calcTotals();                                                                                                                                                                                                                              
			oTable.getModel().setProperty("/modelProg/3/" + oField, total[3][oField]); //Set the property                                                                                                                                                               
                                                                                                                                                                                                                                                               
			//			this.calcCentroTrabalho();                                                                                                                                                                                                                             
			//			this.addTalhoesToDate(oField);                                                                                                                                                                                                                         
			var oTab = that.oView.byId("idTabProg").getModel().getData().modelProg;                                                                                                                                                                                     
			var lv_tot = 0;                                                                                                                                                                                                                                             
			for (var y = 0; y <= 2; y++) {                                                                                                                                                                                                                              
				// var a = 0;                                                                                                                                                                                                                                              
				//BOC-T_T.KONNO-07.02.20&nbsp;                                                                                                                                                                                                                             
				// if (oTab[y]['D' + oField.substr(1, 1) + 'h'] !== "") {                                                                                                                                                                                                  
				if (oTab[y]['D' + oField.substr(1, 1) + 'h']) {                                                                                                                                                                                                            
					//EOC-T_T.KONNO-07.02.20&nbsp;                                                                                                                                                                                                                            
					var a = oTab[y]['D' + oField.substr(1, 1) + 'h'];                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
				var b = parseFloat(a).toFixed(2);                                                                                                                                                                                                                          
				var c = parseFloat(sap.ui.getCore().dadosDetail.MediaRend);                                                                                                                                                                                                
				if (c !== 0) {                                                                                                                                                                                                                                             
					var d = (b / c).toFixed(2);                                                                                                                                                                                                                               
					lv_tot += parseFloat(d);                                                                                                                                                                                                                                  
				}                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			// SALVAR CAPACIDADE PROGRAMADA                                                                                                                                                                                                                             
			var fix = lv_tot.toFixed(2);                                                                                                                                                                                                                                
			var oModelCentro = this.oView.byId("idTabCentro").getModel();                                                                                                                                                                                               
			var oModel = models.callBackEnd();                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			// Atualiza capacidade total                                                                                                                                                                                                                                
			for (var i = 0; i < oModelCentro.getData().modelCentro.length; i++) {                                                                                                                                                                                       
				var line = oModelCentro.getData().modelCentro[i];                                                                                                                                                                                                          
				delete line.__metadata;                                                                                                                                                                                                                                    
				line.d1 = "";                                                                                                                                                                                                                                              
				line.d2 = "";                                                                                                                                                                                                                                              
				line.d3 = "";                                                                                                                                                                                                                                              
				line.d4 = "";                                                                                                                                                                                                                                              
				line.d5 = "";                                                                                                                                                                                                                                              
				//				line.Aarea = fix;                                                                                                                                                                                                                                    
				line["d" + oField.substr(1, 1)] = fix;                                                                                                                                                                                                                     
				line.Data = this.oView.getModel("modelWeekDate").getData().Begda;                                                                                                                                                                                          
				//BOC-T_T.KONNO-07.02.20&nbsp;                                                                                                                                                                                                                             
				line.field = oField.substr(1, 1);                                                                                                                                                                                                                          
				this.field = line.field;                                                                                                                                                                                                                                   
				//EOC-T_T.KONNO-07.02.20&nbsp;                                                                                                                                                                                                                             
				oModel.create("/GetWorkCenterSet", line);                                                                                                                                                                                                                  
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			oModel.submitChanges();                                                                                                                                                                                                                                     
			oModel.attachBatchRequestCompleted(function (oData, fnFunction, oListener) {                                                                                                                                                                                
				that.onSaveProg("", false);                                                                                                                                                                                                                                
				var oFilters = [];                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
				that.oView.byId("idTabCentro").setBusy(true);                                                                                                                                                                                                              
				that.oView.byId("idTabCentro").setBusyIndicatorDelay(0);                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
				oFilters.push(new sap.ui.model.Filter("Werks", "EQ", sap.ui.getCore().dadosMaster.Werks));                                                                                                                                                                 
				oFilters.push(new sap.ui.model.Filter("Acnum", "EQ", sap.ui.getCore().dadosMaster.Acnum));                                                                                                                                                                 
				oFilters.push(new sap.ui.model.Filter("Extwg", "EQ", sap.ui.getCore().dadosProcessoId));                                                                                                                                                                   
				oFilters.push(new sap.ui.model.Filter("Matkl", "EQ", sap.ui.getCore().dadosDetail.Matkl));                                                                                                                                                                 
				oFilters.push(new sap.ui.model.Filter("Begda", "EQ", sap.ui.getCore().Begda));                                                                                                                                                                             
                                                                                                                                                                                                                                                               
				that.oModel1.read("/GetWorkCenterSet", {                                                                                                                                                                                                                   
					filters: oFilters,                                                                                                                                                                                                                                        
					success: function (oData2) {                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
						var json1 = new JSONModel();                                                                                                                                                                                                                             
						json1.setData({                                                                                                                                                                                                                                          
							modelCentro: oData2.results                                                                                                                                                                                                                             
						});                                                                                                                                                                                                                                                      
						that.oView.byId("idTabCentro").setVisibleRowCount(oData2.results.length);                                                                                                                                                                                
						that.oView.byId("idTabCentro").setModel(json1);                                                                                                                                                                                                          
						that.oView.byId("idTabCentro").bindRows("/modelCentro");                                                                                                                                                                                                 
						that.oView.byId("idTabCentro").setBusy(false);                                                                                                                                                                                                           
					},                                                                                                                                                                                                                                                        
					error: function (oError) {                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
					}                                                                                                                                                                                                                                                         
				});                                                                                                                                                                                                                                                        
				var oTab = that.oView.byId("idTabProg").getModel().getData().modelProg;                                                                                                                                                                                    
				var area1 = oTab[3].D1h;                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
				if (area1 === "") {                                                                                                                                                                                                                                        
					area1 = "0.00";                                                                                                                                                                                                                                           
				}                                                                                                                                                                                                                                                          
				var area2 = oTab[3].D2h;                                                                                                                                                                                                                                   
				if (area2 === "") {                                                                                                                                                                                                                                        
					area2 = "0.00";                                                                                                                                                                                                                                           
				}                                                                                                                                                                                                                                                          
				var area3 = oTab[3].D3h;                                                                                                                                                                                                                                   
				if (area3 === "") {                                                                                                                                                                                                                                        
					area3 = "0.00";                                                                                                                                                                                                                                           
				}                                                                                                                                                                                                                                                          
				var area4 = oTab[3].D4h;                                                                                                                                                                                                                                   
				if (area4 === "") {                                                                                                                                                                                                                                        
					area4 = "0.00";                                                                                                                                                                                                                                           
				}                                                                                                                                                                                                                                                          
				var area5 = oTab[3].D5h;                                                                                                                                                                                                                                   
				if (area5 === "") {                                                                                                                                                                                                                                        
					area5 = "0.00";                                                                                                                                                                                                                                           
				}                                                                                                                                                                                                                                                          
				/* for(var i = 0; i > arr.length; i++){                                                                                                                                                                                                                    
				 	var d1h = arr[i].D1h;                                                                                                                                                                                                                                    
				 	var d2h = arr[i].D2h;                                                                                                                                                                                                                                    
				 	var d3h = arr[i].D3h;                                                                                                                                                                                                                                    
				 }                                                                                                                                                                                                                                                         
				 var area1;                                                                                                                                                                                                                                                
				 var area2;                                                                                                                                                                                                                                                
				 var area3;                                                                                                                                                                                                                                                
				 arr.forEach(function(item,i){                                                                                                                                                                                                                             
				 	 area1 = item.D1h;                                                                                                                                                                                                                                       
				 	 area2 = item.D2h;                                                                                                                                                                                                                                       
				 	 area3 = item.D3h;                                                                                                                                                                                                                                       
				 	//var area                                                                                                                                                                                                                                               
				 });*/                                                                                                                                                                                                                                                     
				var oFilters1 = [];                                                                                                                                                                                                                                        
				oFilters1.push(new sap.ui.model.Filter("Acnum", "EQ", sap.ui.getCore().dadosMaster.Acnum));                                                                                                                                                                
				oFilters1.push(new sap.ui.model.Filter("Extwg", "EQ", sap.ui.getCore().dadosProcessoId));                                                                                                                                                                  
				oFilters1.push(new sap.ui.model.Filter("Matkl", "EQ", sap.ui.getCore().dadosDetail.Matkl));                                                                                                                                                                
				oFilters1.push(new sap.ui.model.Filter("Total1", "EQ", area1));                                                                                                                                                                                            
				oFilters1.push(new sap.ui.model.Filter("Total2", "EQ", area2));                                                                                                                                                                                            
				oFilters1.push(new sap.ui.model.Filter("Total3", "EQ", area3));                                                                                                                                                                                            
				oFilters1.push(new sap.ui.model.Filter("Total4", "EQ", area4));                                                                                                                                                                                            
				oFilters1.push(new sap.ui.model.Filter("Total5", "EQ", area5));                                                                                                                                                                                            
				oFilters1.push(new sap.ui.model.Filter("Begda", "EQ", that.oView.getModel("modelWeekDate").getData().Begda));                                                                                                                                              
                                                                                                                                                                                                                                                               
				that.oModel1.read("/Suggest_TerrainsSet", {                                                                                                                                                                                                                
					filters: oFilters1,                                                                                                                                                                                                                                       
					success: function (oData2) {                                                                                                                                                                                                                              
						//console.log(oData2);                                                                                                                                                                                                                                   
						var TerrainData = new JSONModel();                                                                                                                                                                                                                       
						TerrainData.setData(oData2.results);                                                                                                                                                                                                                     
						sap.ui.getCore().setModel(TerrainData, "TerrainFP");                                                                                                                                                                                                     
						that.addTalhoesToDate(oData2);                                                                                                                                                                                                                           
					}                                                                                                                                                                                                                                                         
				});                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		addTalhoesToDate1: function (oDados) {                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
			this.oView.byId("idTabTa").getRows()[0].getCells()[1].removeAllItems();                                                                                                                                                                                     
			this.oView.byId("idTabTa").getRows()[0].getCells()[2].removeAllItems();                                                                                                                                                                                     
			this.oView.byId("idTabTa").getRows()[0].getCells()[3].removeAllItems();                                                                                                                                                                                     
			this.oView.byId("idTabTa").getRows()[0].getCells()[4].removeAllItems();                                                                                                                                                                                     
			this.oView.byId("idTabTa").getRows()[0].getCells()[5].removeAllItems();                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
			for (var x = 0; x < oDados.results.length; x++) {                                                                                                                                                                                                           
				var lv_text = this.ltrim(oDados.results[x].TplnrFl.split("-")[1], "0");                                                                                                                                                                                    
				if (oDados.results[x].Data.substr(6, 2) === this.oView.getModel("modelWeekDate").getData().D1.substr(0, 2)) {                                                                                                                                              
					this.oView.byId("idTabTa").getRows()[0].getCells()[1].addItem(new sap.m.Button({                                                                                                                                                                          
						text: lv_text                                                                                                                                                                                                                                            
					}));                                                                                                                                                                                                                                                      
					this.oView.byId("idTabTa").getRows()[0].getCells()[1].addItem(new sap.m.Label({                                                                                                                                                                           
						width: "3px"                                                                                                                                                                                                                                             
					}));                                                                                                                                                                                                                                                      
				} else if (oDados.results[x].Data.substr(6, 2) === this.oView.getModel("modelWeekDate").getData().D2.substr(0, 2)) {                                                                                                                                       
					this.oView.byId("idTabTa").getRows()[0].getCells()[2].addItem(new sap.m.Button({                                                                                                                                                                          
						text: lv_text                                                                                                                                                                                                                                            
					}));                                                                                                                                                                                                                                                      
					this.oView.byId("idTabTa").getRows()[0].getCells()[2].addItem(new sap.m.Label({                                                                                                                                                                           
						width: "3px"                                                                                                                                                                                                                                             
					}));                                                                                                                                                                                                                                                      
				} else if (oDados.results[x].Data.substr(6, 2) === this.oView.getModel("modelWeekDate").getData().D3.substr(0, 2)) {                                                                                                                                       
					this.oView.byId("idTabTa").getRows()[0].getCells()[3].addItem(new sap.m.Button({                                                                                                                                                                          
						text: lv_text                                                                                                                                                                                                                                            
					}));                                                                                                                                                                                                                                                      
					this.oView.byId("idTabTa").getRows()[0].getCells()[3].addItem(new sap.m.Label({                                                                                                                                                                           
						width: "3px"                                                                                                                                                                                                                                             
					}));                                                                                                                                                                                                                                                      
				} else if (oDados.results[x].Data.substr(6, 2) === this.oView.getModel("modelWeekDate").getData().D4.substr(0, 2)) {                                                                                                                                       
					this.oView.byId("idTabTa").getRows()[0].getCells()[4].addItem(new sap.m.Button({                                                                                                                                                                          
						text: lv_text                                                                                                                                                                                                                                            
					}));                                                                                                                                                                                                                                                      
					this.oView.byId("idTabTa").getRows()[0].getCells()[4].addItem(new sap.m.Label({                                                                                                                                                                           
						width: "3px"                                                                                                                                                                                                                                             
					}));                                                                                                                                                                                                                                                      
				} else if (oDados.results[x].Data.substr(6, 2) === this.oView.getModel("modelWeekDate").getData().D5.substr(0, 2)) {                                                                                                                                       
					this.oView.byId("idTabTa").getRows()[0].getCells()[5].addItem(new sap.m.Button({                                                                                                                                                                          
						text: lv_text                                                                                                                                                                                                                                            
					}));                                                                                                                                                                                                                                                      
					this.oView.byId("idTabTa").getRows()[0].getCells()[5].addItem(new sap.m.Label({                                                                                                                                                                           
						width: "3px"                                                                                                                                                                                                                                             
					}));                                                                                                                                                                                                                                                      
				}                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		addTalhoesToDate: function (oData2) {                                                                                                                                                                                                                        
			this.oView.byId("idTabTa").getRows()[0].getCells()[1].removeAllItems();                                                                                                                                                                                     
			this.oView.byId("idTabTa").getRows()[0].getCells()[2].removeAllItems();                                                                                                                                                                                     
			this.oView.byId("idTabTa").getRows()[0].getCells()[3].removeAllItems();                                                                                                                                                                                     
			this.oView.byId("idTabTa").getRows()[0].getCells()[4].removeAllItems();                                                                                                                                                                                     
			this.oView.byId("idTabTa").getRows()[0].getCells()[5].removeAllItems();                                                                                                                                                                                     
			var arr = oData2.results;                                                                                                                                                                                                                                   
			for (var i = 0; i < arr.length; i++) {                                                                                                                                                                                                                      
				var lv_text = this.ltrim(arr[i].TplnrFl.split("-")[1], "0");                                                                                                                                                                                               
				this.getDateFormatDateMonth(arr[i].Begda, function (oDate) {                                                                                                                                                                                               
					arr[i].Begda = oDate;                                                                                                                                                                                                                                     
				});                                                                                                                                                                                                                                                        
				if ((arr[i].Begda === this.oView.getModel("modelWeekDate").getData().D1) && (arr[i].Full === "X")) {                                                                                                                                                       
					this.oView.byId("idTabTa").getRows()[0].getCells()[1].addItem(new sap.m.Button({                                                                                                                                                                          
						type: sap.m.ButtonType.Accept,                                                                                                                                                                                                                           
						text: lv_text                                                                                                                                                                                                                                            
					}));                                                                                                                                                                                                                                                      
					this.oView.byId("idTabTa").getRows()[0].getCells()[1].addItem(new sap.m.Label({                                                                                                                                                                           
						width: "3px"                                                                                                                                                                                                                                             
					}));                                                                                                                                                                                                                                                      
				} else if ((arr[i].Begda === this.oView.getModel("modelWeekDate").getData().D1) && (arr[i].Partial === "X")) {                                                                                                                                             
					this.oView.byId("idTabTa").getRows()[0].getCells()[1].addItem(new sap.m.Button({                                                                                                                                                                          
						type: sap.m.ButtonType.Neutral,                                                                                                                                                                                                                          
						text: lv_text                                                                                                                                                                                                                                            
					}));                                                                                                                                                                                                                                                      
					this.oView.byId("idTabTa").getRows()[0].getCells()[1].addItem(new sap.m.Label({                                                                                                                                                                           
						width: "3px"                                                                                                                                                                                                                                             
					}));                                                                                                                                                                                                                                                      
				}                                                                                                                                                                                                                                                          
				if ((arr[i].Begda === this.oView.getModel("modelWeekDate").getData().D2) && (arr[i].Full === "X")) {                                                                                                                                                       
					this.oView.byId("idTabTa").getRows()[0].getCells()[2].addItem(new sap.m.Button({                                                                                                                                                                          
						type: sap.m.ButtonType.Accept,                                                                                                                                                                                                                           
						text: lv_text                                                                                                                                                                                                                                            
					}));                                                                                                                                                                                                                                                      
					this.oView.byId("idTabTa").getRows()[0].getCells()[2].addItem(new sap.m.Label({                                                                                                                                                                           
						width: "3px"                                                                                                                                                                                                                                             
					}));                                                                                                                                                                                                                                                      
				} else if ((arr[i].Begda === this.oView.getModel("modelWeekDate").getData().D2) && (arr[i].Partial === "X")) {                                                                                                                                             
					this.oView.byId("idTabTa").getRows()[0].getCells()[2].addItem(new sap.m.Button({                                                                                                                                                                          
						type: sap.m.ButtonType.Neutral,                                                                                                                                                                                                                          
						text: lv_text                                                                                                                                                                                                                                            
					}));                                                                                                                                                                                                                                                      
					this.oView.byId("idTabTa").getRows()[0].getCells()[2].addItem(new sap.m.Label({                                                                                                                                                                           
						width: "3px"                                                                                                                                                                                                                                             
					}));                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
				}                                                                                                                                                                                                                                                          
				if ((arr[i].Begda === this.oView.getModel("modelWeekDate").getData().D3) && (arr[i].Full === "X")) {                                                                                                                                                       
					this.oView.byId("idTabTa").getRows()[0].getCells()[3].addItem(new sap.m.Button({                                                                                                                                                                          
						type: sap.m.ButtonType.Accept,                                                                                                                                                                                                                           
						text: lv_text                                                                                                                                                                                                                                            
					}));                                                                                                                                                                                                                                                      
					this.oView.byId("idTabTa").getRows()[0].getCells()[3].addItem(new sap.m.Label({                                                                                                                                                                           
						width: "3px"                                                                                                                                                                                                                                             
					}));                                                                                                                                                                                                                                                      
				} else if ((arr[i].Begda === this.oView.getModel("modelWeekDate").getData().D3) && (arr[i].Partial === "X")) {                                                                                                                                             
					this.oView.byId("idTabTa").getRows()[0].getCells()[3].addItem(new sap.m.Button({                                                                                                                                                                          
						type: sap.m.ButtonType.Neutral,                                                                                                                                                                                                                          
						text: lv_text                                                                                                                                                                                                                                            
					}));                                                                                                                                                                                                                                                      
					this.oView.byId("idTabTa").getRows()[0].getCells()[3].addItem(new sap.m.Label({                                                                                                                                                                           
						width: "3px"                                                                                                                                                                                                                                             
					}));                                                                                                                                                                                                                                                      
				}                                                                                                                                                                                                                                                          
				if ((arr[i].Begda === this.oView.getModel("modelWeekDate").getData().D4) && (arr[i].Full === "X")) {                                                                                                                                                       
					this.oView.byId("idTabTa").getRows()[0].getCells()[4].addItem(new sap.m.Button({                                                                                                                                                                          
						type: sap.m.ButtonType.Accept,                                                                                                                                                                                                                           
						text: lv_text                                                                                                                                                                                                                                            
					}));                                                                                                                                                                                                                                                      
					this.oView.byId("idTabTa").getRows()[0].getCells()[4].addItem(new sap.m.Label({                                                                                                                                                                           
						width: "3px"                                                                                                                                                                                                                                             
					}));                                                                                                                                                                                                                                                      
				} else if ((arr[i].Begda === this.oView.getModel("modelWeekDate").getData().D4) && (arr[i].Partial === "X")) {                                                                                                                                             
					this.oView.byId("idTabTa").getRows()[0].getCells()[4].addItem(new sap.m.Button({                                                                                                                                                                          
						type: sap.m.ButtonType.Neutral,                                                                                                                                                                                                                          
						text: lv_text                                                                                                                                                                                                                                            
					}));                                                                                                                                                                                                                                                      
					this.oView.byId("idTabTa").getRows()[0].getCells()[4].addItem(new sap.m.Label({                                                                                                                                                                           
						width: "3px"                                                                                                                                                                                                                                             
					}));                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
				}                                                                                                                                                                                                                                                          
				if ((arr[i].Begda === this.oView.getModel("modelWeekDate").getData().D5) && (arr[i].Full === "X")) {                                                                                                                                                       
					this.oView.byId("idTabTa").getRows()[0].getCells()[5].addItem(new sap.m.Button({                                                                                                                                                                          
						type: sap.m.ButtonType.Accept,                                                                                                                                                                                                                           
						text: lv_text                                                                                                                                                                                                                                            
					}));                                                                                                                                                                                                                                                      
					this.oView.byId("idTabTa").getRows()[0].getCells()[5].addItem(new sap.m.Label({                                                                                                                                                                           
						width: "3px"                                                                                                                                                                                                                                             
					}));                                                                                                                                                                                                                                                      
				} else if ((arr[i].Begda === this.oView.getModel("modelWeekDate").getData().D5) && (arr[i].Partial === "X")) {                                                                                                                                             
					this.oView.byId("idTabTa").getRows()[0].getCells()[5].addItem(new sap.m.Button({                                                                                                                                                                          
						type: sap.m.ButtonType.Neutral,                                                                                                                                                                                                                          
						text: lv_text                                                                                                                                                                                                                                            
					}));                                                                                                                                                                                                                                                      
				}                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		ltrim: function (str, chars) {                                                                                                                                                                                                                               
			chars = chars || "\\s";                                                                                                                                                                                                                                     
			return str.replace(new RegExp("^[" + chars + "]+", "g"), "");                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onChangeDates: function (oEvent) {                                                                                                                                                                                                                           
			//                                                                                                                                                                                                                                                          
			var that = this;                                                                                                                                                                                                                                            
			/*	var year = sap.ui.getCore().Begda;                                                                                                                                                                                                                       
				var month = sap.ui.getCore().Begda.substr(4, 2);                                                                                                                                                                                                           
				var day = sap.ui.getCore().Begda.substr(6, 2);*/                                                                                                                                                                                                           
			var b = sap.ui.getCore().Begda;                                                                                                                                                                                                                             
			that.oModel1.read("/GetWeekDateSet('" + b + "')", {                                                                                                                                                                                                         
				success: function (oData) {                                                                                                                                                                                                                                
					//					                                                                                                                                                                                                                                                   
					var json = new JSONModel();                                                                                                                                                                                                                               
					json.setData(oData);                                                                                                                                                                                                                                      
					that.oView.setModel(json, "modelWeekDate");                                                                                                                                                                                                               
					sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                         
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
					//					                                                                                                                                                                                                                                                   
					sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
		onCellClick: function (oEvent) {                                                                                                                                                                                                                             
			//			                                                                                                                                                                                                                                                       
			this.onSaveProg("", false);                                                                                                                                                                                                                                 
			var column = parseInt(oEvent.getParameter("columnIndex"));                                                                                                                                                                                                  
			sap.ui.getCore().dataTalhao = this.oView.byId("idTabTa").getColumns()[column].getLabel().getText();                                                                                                                                                         
			var dateStr = sap.ui.getCore().dataTalhao;                                                                                                                                                                                                                  
			var year = this.getView().getModel("MDL_Ano").getData().ano;                                                                                                                                                                                                
			this.getDateFormat(dateStr, year, function (oData) {                                                                                                                                                                                                        
				sap.ui.getCore().Data = oData;                                                                                                                                                                                                                             
			});                                                                                                                                                                                                                                                         
			this.getOwnerComponent().getRouter()                                                                                                                                                                                                                        
				.navTo("Detail3", {                                                                                                                                                                                                                                        
					Acnum: sap.ui.getCore().dadosMaster.Acnum,                                                                                                                                                                                                                
					Matkl: sap.ui.getCore().dadosDetail.Matkl,                                                                                                                                                                                                                
					Day: sap.ui.getCore().dataTalhao                                                                                                                                                                                                                          
				});                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		                                                                                                                                                                                                                                                             
		getDateFormat: function (date, year, callback) {                                                                                                                                                                                                             
			var month;                                                                                                                                                                                                                                                  
			var sDate = date.match(/\d/g);                                                                                                                                                                                                                              
			sDate = sDate.join("");                                                                                                                                                                                                                                     
			if (date.indexOf("Jan") > -1 || date.indexOf("Jan") > -1) {                                                                                                                                                                                                 
				month = 1;                                                                                                                                                                                                                                                 
			} else if (date.indexOf("Feb") > 1 || date.indexOf("Fev") > 1) {                                                                                                                                                                                            
				month = 2;                                                                                                                                                                                                                                                 
			} else if (date.indexOf("Mar") > 2 || date.indexOf("Mar") > 2) {                                                                                                                                                                                            
				month = 3;                                                                                                                                                                                                                                                 
			} else if (date.indexOf("Apr") > 2 || date.indexOf("Abr") > 2){                                                                                                                                                                                             
				month = 4;                                                                                                                                                                                                                                                 
			} else if (date.indexOf("May") > 2 || date.indexOf("Mai") > 2) {                                                                                                                                                                                            
				month = 5;                                                                                                                                                                                                                                                 
			} else if (date.indexOf("Jun") > 2 || date.indexOf("Jun") > 2) {                                                                                                                                                                                            
				month = 6;                                                                                                                                                                                                                                                 
			} else if (date.indexOf("Jul") > 2 || date.indexOf("Jul") > 2) {                                                                                                                                                                                            
				month = 7;                                                                                                                                                                                                                                                 
			} else if (date.indexOf("Aug") > 2 || date.indexOf("Ago") > 2) {                                                                                                                                                                                            
				month = 8;                                                                                                                                                                                                                                                 
			} else if (date.indexOf("Sep") > 2 || date.indexOf("Set") > 2) {                                                                                                                                                                                            
				month = 9;                                                                                                                                                                                                                                                 
			} else if (date.indexOf("Oct") > 2 || date.indexOf("Out") > 2) {                                                                                                                                                                                            
				month = 10;                                                                                                                                                                                                                                                
			} else if (date.indexOf("Nov") > 2 || date.indexOf("Nov") > 2) {                                                                                                                                                                                            
				month = 11;                                                                                                                                                                                                                                                
			} else if (date.indexOf("Dec") > 2 || date.indexOf("Dez") > 2) {                                                                                                                                                                                            
				month = 12;                                                                                                                                                                                                                                                
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			//var oDate = new Date(month+"/"+sDate+"/"+ year);                                                                                                                                                                                                          
			//	console.log(date);                                                                                                                                                                                                                                       
			var oDateFormat = DateFormat.getDateInstance({                                                                                                                                                                                                              
				pattern: "yyyyMMdd"                                                                                                                                                                                                                                        
			});                                                                                                                                                                                                                                                         
			var oDate = oDateFormat.format(new Date(month + "/" + sDate + "/" + year));                                                                                                                                                                                 
			//	return oDate;                                                                                                                                                                                                                                            
			if (callback) {                                                                                                                                                                                                                                             
				callback(oDate);                                                                                                                                                                                                                                           
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		getDateFormatDateMonth: function (oDate, callback) {                                                                                                                                                                                                         
			//	var year = oDate.substring(0,4);                                                                                                                                                                                                                         
			var month = parseInt(oDate.substring(4, 6));                                                                                                                                                                                                                
			var date = oDate.substring(6, 8);                                                                                                                                                                                                                           
			var aMonth ;                                                                                                                                                                                                                                                
			if (navigator.language === "pt-BR"){                                                                                                                                                                                                                        
				 aMonth = ["Jan", "Fev", "Mar", "Abr", "Mai", "Jun", "Jul", "Ago", "Set", "Out", "Nov", "Dez"];                                                                                                                                                            
			} else {                                                                                                                                                                                                                                                    
				aMonth = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];                                                                                                                                                                        
			}                                                                                                                                                                                                                                                           
			                                                                                                                                                                                                                                                            
			var newDate = date + "." + (aMonth[month - 1]);                                                                                                                                                                                                             
			if (callback) {                                                                                                                                                                                                                                             
				callback(newDate);                                                                                                                                                                                                                                         
			}                                                                                                                                                                                                                                                           
			//console.log(newDate);                                                                                                                                                                                                                                     
			/*	var dateF = year + "," + month + "," + date;                                                                                                                                                                                                             
				var dateF2 = new Date(dateF);                                                                                                                                                                                                                              
				var date3 = dateF2.toJSON().split('-')[1] + '.' + dateF2.toJSON().split('-')[0];*/                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
		getDateFormatter: function (date, year) {                                                                                                                                                                                                                    
			var month;                                                                                                                                                                                                                                                  
			var sDate = date.match(/\d/g);                                                                                                                                                                                                                              
			sDate = sDate.join("");                                                                                                                                                                                                                                     
			if (date.indexOf("Jan") > -1 || date.indexOf("Jan") > -1) {                                                                                                                                                                                                 
				month = 1;                                                                                                                                                                                                                                                 
			} else if (date.indexOf("Feb") > 1 || date.indexOf("Fev") > 1) {                                                                                                                                                                                            
				month = 2;                                                                                                                                                                                                                                                 
			} else if (date.indexOf("Mar") > 2 || date.indexOf("Mar") > 2) {                                                                                                                                                                                            
				month = 3;                                                                                                                                                                                                                                                 
			} else if (date.indexOf("Apr") > 2 || date.indexOf("Abr") > 2) {                                                                                                                                                                                            
				month = 4;                                                                                                                                                                                                                                                 
			} else if (date.indexOf("May") > 2 || date.indexOf("Mai") > 2) {                                                                                                                                                                                            
				month = 5;                                                                                                                                                                                                                                                 
			} else if (date.indexOf("Jun") > 2 || date.indexOf("Jun") > 2) {                                                                                                                                                                                            
				month = 6;                                                                                                                                                                                                                                                 
			} else if (date.indexOf("Jul") > 2 || date.indexOf("Jul") > 2) {                                                                                                                                                                                            
				month = 7;                                                                                                                                                                                                                                                 
			} else if (date.indexOf("Aug") > 2 || date.indexOf("Ago") > 2) {                                                                                                                                                                                            
				month = 8;                                                                                                                                                                                                                                                 
			} else if (date.indexOf("Sep") > 2 || date.indexOf("Set") > 2) {                                                                                                                                                                                            
				month = 9;                                                                                                                                                                                                                                                 
			} else if (date.indexOf("Oct") > 2 || date.indexOf("Out") > 2) {                                                                                                                                                                                            
				month = 10;                                                                                                                                                                                                                                                
			} else if (date.indexOf("Nov") > 2) {                                                                                                                                                                                                                       
				month = 11;                                                                                                                                                                                                                                                
			} else if (date.indexOf("Dec") > 2 || date.indexOf("Dez") > 2) {                                                                                                                                                                                            
				month = 12;                                                                                                                                                                                                                                                
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			//var oDate = new Date(month+"/"+sDate+"/"+ year);                                                                                                                                                                                                          
			//	console.log(date);                                                                                                                                                                                                                                       
			var oDateFormat = DateFormat.getDateInstance({                                                                                                                                                                                                              
				pattern: "yyyy-MM-dd"                                                                                                                                                                                                                                      
			});                                                                                                                                                                                                                                                         
			var oDate = oDateFormat.format(new Date(month + "/" + sDate + "/" + year));                                                                                                                                                                                 
		                                                                                                                                                                                                                                                             
			//	return oDate;                                                                                                                                                                                                                                            
			return oDate;                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		onShowTalhao: function (oEvent) {                                                                                                                                                                                                                            
			//	                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			this.getOwnerComponent().getRouter()                                                                                                                                                                                                                        
				.navTo("Detail3", {                                                                                                                                                                                                                                        
					Acnum: sap.ui.getCore().dadosMaster.Acnum,                                                                                                                                                                                                                
					Matkl: sap.ui.getCore().dadosDetail.Matkl,                                                                                                                                                                                                                
					Day: sap.ui.getCore().dataTalhao                                                                                                                                                                                                                          
				});                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		// onNext: function (oEvent) {                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
		// 	var oFilters = [];                                                                                                                                                                                                                                       
		// 	oFilters.push(new sap.ui.model.Filter("Begda", "EQ", sap.ui.getCore().Begda));                                                                                                                                                                           
		// 	this.onGetDataDetail("/GetDetail1DataSet", "modelGetDataDetail1", oFilters);                                                                                                                                                                             
                                                                                                                                                                                                                                                               
		// },                                                                                                                                                                                                                                                        
		onCell: function (oEvent) {                                                                                                                                                                                                                                  
			//		                                                                                                                                                                                                                                                        
		},                                                                                                                                                                                                                                                           
		calcTotals: function (array) {                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
			// Limpa valores de totais			                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
			//			                                                                                                                                                                                                                                                       
			if (array === undefined) {                                                                                                                                                                                                                                  
				var arr = this.oView.byId("idTabProg").getModel().getData().modelProg;                                                                                                                                                                                     
				array = arr;                                                                                                                                                                                                                                               
			} else {                                                                                                                                                                                                                                                    
				var arr = array;                                                                                                                                                                                                                                           
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			//			delete arr.results[3];                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
			for (var x = 0; x <= 10; x++) {                                                                                                                                                                                                                             
				var total = 0;                                                                                                                                                                                                                                             
				for (var y = 0; y <= 2; y++) {                                                                                                                                                                                                                             
					//					                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
					switch (x) {                                                                                                                                                                                                                                              
					case 0:                                                                                                                                                                                                                                                   
						if (arr[y].D1h !== "") {                                                                                                                                                                                                                                 
							total += parseFloat(arr[y].D1h);                                                                                                                                                                                                                        
							if (total !== 0) {                                                                                                                                                                                                                                      
								arr[3].D1h = total.toFixed(2);                                                                                                                                                                                                                         
							}                                                                                                                                                                                                                                                       
						}                                                                                                                                                                                                                                                        
						break;                                                                                                                                                                                                                                                   
					case 1:                                                                                                                                                                                                                                                   
						if (arr[y].D1r !== "") {                                                                                                                                                                                                                                 
							total += parseFloat(arr[y].D1r);                                                                                                                                                                                                                        
							if (total !== 0) {                                                                                                                                                                                                                                      
								arr[3].D1r = total.toFixed(2);                                                                                                                                                                                                                         
							}                                                                                                                                                                                                                                                       
						}                                                                                                                                                                                                                                                        
						break;                                                                                                                                                                                                                                                   
					case 2:                                                                                                                                                                                                                                                   
						if (arr[y].D2h !== "") {                                                                                                                                                                                                                                 
							total += parseFloat(arr[y].D2h);                                                                                                                                                                                                                        
							if (total !== 0) {                                                                                                                                                                                                                                      
								arr[3].D2h = total.toFixed(2);                                                                                                                                                                                                                         
							}                                                                                                                                                                                                                                                       
						}                                                                                                                                                                                                                                                        
						break;                                                                                                                                                                                                                                                   
					case 3:                                                                                                                                                                                                                                                   
						if (arr[y].D2r !== "") {                                                                                                                                                                                                                                 
							total += parseFloat(arr[y].D2r);                                                                                                                                                                                                                        
							if (total !== 0) {                                                                                                                                                                                                                                      
								arr[3].D2r = total.toFixed(2);                                                                                                                                                                                                                         
							}                                                                                                                                                                                                                                                       
						}                                                                                                                                                                                                                                                        
						break;                                                                                                                                                                                                                                                   
					case 4:                                                                                                                                                                                                                                                   
						if (arr[y].D3h !== "") {                                                                                                                                                                                                                                 
							total += parseFloat(arr[y].D3h);                                                                                                                                                                                                                        
							if (total !== 0) {                                                                                                                                                                                                                                      
								arr[3].D3h = total.toFixed(2);                                                                                                                                                                                                                         
							}                                                                                                                                                                                                                                                       
						}                                                                                                                                                                                                                                                        
						break;                                                                                                                                                                                                                                                   
					case 5:                                                                                                                                                                                                                                                   
						if (arr[y].D3r !== "") {                                                                                                                                                                                                                                 
							total += parseFloat(arr[y].D3r);                                                                                                                                                                                                                        
							if (total !== 0) {                                                                                                                                                                                                                                      
								arr[3].D3r = total.toFixed(2);                                                                                                                                                                                                                         
							}                                                                                                                                                                                                                                                       
						}                                                                                                                                                                                                                                                        
						break;                                                                                                                                                                                                                                                   
					case 6:                                                                                                                                                                                                                                                   
						if (arr[y].D4h !== "") {                                                                                                                                                                                                                                 
							total += parseFloat(arr[y].D4h);                                                                                                                                                                                                                        
							if (total !== 0) {                                                                                                                                                                                                                                      
								arr[3].D4h = total.toFixed(2);                                                                                                                                                                                                                         
							}                                                                                                                                                                                                                                                       
						}                                                                                                                                                                                                                                                        
						break;                                                                                                                                                                                                                                                   
					case 7:                                                                                                                                                                                                                                                   
						if (arr[y].D4r !== "") {                                                                                                                                                                                                                                 
							total += parseFloat(arr[y].D4r);                                                                                                                                                                                                                        
							if (total !== 0) {                                                                                                                                                                                                                                      
								arr[3].D4r = total.toFixed(2);                                                                                                                                                                                                                         
							}                                                                                                                                                                                                                                                       
						}                                                                                                                                                                                                                                                        
						break;                                                                                                                                                                                                                                                   
					case 8:                                                                                                                                                                                                                                                   
						if (arr[y].D5h !== "") {                                                                                                                                                                                                                                 
							total += parseFloat(arr[y].D5h);                                                                                                                                                                                                                        
							if (total !== 0) {                                                                                                                                                                                                                                      
								arr[3].D5h = total.toFixed(2);                                                                                                                                                                                                                         
							}                                                                                                                                                                                                                                                       
						}                                                                                                                                                                                                                                                        
						break;                                                                                                                                                                                                                                                   
					case 9:                                                                                                                                                                                                                                                   
						if (arr[y].D5r !== "") {                                                                                                                                                                                                                                 
							total += parseFloat(arr[y].D5r);                                                                                                                                                                                                                        
							if (total !== 0) {                                                                                                                                                                                                                                      
								arr[3].D5r = total.toFixed(2);                                                                                                                                                                                                                         
							}                                                                                                                                                                                                                                                       
						}                                                                                                                                                                                                                                                        
						break;                                                                                                                                                                                                                                                   
					default:                                                                                                                                                                                                                                                  
						break;                                                                                                                                                                                                                                                   
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			return array;                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		calcCentroTrabalho: function () {                                                                                                                                                                                                                            
			//	                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			var oTab = this.oView.byId("idTabProg").getModel().getData().modelProg;                                                                                                                                                                                     
			var oModelCentro = this.oView.byId("idTabCentro").getModel();                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
			for (var x = 1; x <= 5; x++) {                                                                                                                                                                                                                              
				var total = 0;                                                                                                                                                                                                                                             
				for (var y = 0; y <= 2; y++) {                                                                                                                                                                                                                             
					var a = 0;                                                                                                                                                                                                                                                
					if (oTab[y]['D' + x + 'h'] !== "") {                                                                                                                                                                                                                      
						a = oTab[y]['D' + x + 'h'];                                                                                                                                                                                                                              
					}                                                                                                                                                                                                                                                         
					var b = parseFloat(a).toFixed(2);                                                                                                                                                                                                                         
					var c = parseFloat(sap.ui.getCore().dadosDetail.MediaRend);                                                                                                                                                                                               
					if (c !== 0) {                                                                                                                                                                                                                                            
						var d = b / c;                                                                                                                                                                                                                                           
						var e = d.toFixed(2);                                                                                                                                                                                                                                    
						total = parseFloat(total) + parseFloat(e);                                                                                                                                                                                                               
					}                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
				}                                                                                                                                                                                                                                                          
				var fix = total.toFixed(2);                                                                                                                                                                                                                                
				// Atualiza capacidade total                                                                                                                                                                                                                               
				for (var i = 0; i < oModelCentro.getData().modelCentro.length; i++) {                                                                                                                                                                                      
					var val = oModelCentro.getData().modelCentro[i]['d' + x].split("/")[1];                                                                                                                                                                                   
					oModelCentro.setProperty("/modelCentro/" + i.toString() + "/d" + x.toString(), fix.toString() + " / " + val);                                                                                                                                             
				}                                                                                                                                                                                                                                                          
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onGetDataDetail: function (p_EntitySet, p_model, p_filters, p_begda) {			//	                                                                                                                                                                                 
			var that = this;                                                                                                                                                                                                                                            
			var oBegda = p_begda;                                                                                                                                                                                                                                       
			if (p_begda) {} else {                                                                                                                                                                                                                                      
				oBegda = sap.ui.getCore().Begda;                                                                                                                                                                                                                           
			}                                                                                                                                                                                                                                                           
		/*	if (navigator.language === "en-US") {                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
				/*	var date = this.oView.byId("idCalendar").getStartDate().toLocaleDateString();                                                                                                                                                                           
					var day = date.substr(3, 2);                                                                                                                                                                                                                              
					var month = date.substr(0, 2);                                                                                                                                                                                                                            
					var year = date.substr(6, 4);                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
			}*/&nbsp;                                                                                                                                                                                                                                                   
				var oDateFormat = DateFormat.getDateInstance({                                                                                                                                                                                                             
					pattern: "yyyyMMdd"                                                                                                                                                                                                                                       
				});                                                                                                                                                                                                                                                        
				var date = oDateFormat.format(that.oView.byId("idCalendar").getStartDate());                                                                                                                                                                               
                                                                                                                                                                                                                                                               
		//	}                                                                                                                                                                                                                                                         
			var b = date;                                                                                                                                                                                                                                               
			var year = b.substr(0, 4);                                                                                                                                                                                                                                  
			var month = b.substr(4, 2);                                                                                                                                                                                                                                 
			var day = b.substr(6);                                                                                                                                                                                                                                      
			//BOC-T_T.KONNO-07.02.20                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
			this.createModelMesAno(date, day, month, year);                                                                                                                                                                                                             
			//this.createModelMesAno(oBegda);                                                                                                                                                                                                                           
			//EOC-T_T.KONNO                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
			// sap.ui.getCore().Begda = oBegda;                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			sap.ui.getCore().Begda = oBegda;                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
			var oFilters = [];                                                                                                                                                                                                                                          
			this._model = p_model;                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
			oFilters.push(new sap.ui.model.Filter("Werks", "EQ", sap.ui.getCore().dadosMaster.Werks));                                                                                                                                                                  
			oFilters.push(new sap.ui.model.Filter("Acnum", "EQ", sap.ui.getCore().dadosMaster.Acnum));                                                                                                                                                                  
			oFilters.push(new sap.ui.model.Filter("Extwg", "EQ", sap.ui.getCore().dadosProcessoId));                                                                                                                                                                    
			oFilters.push(new sap.ui.model.Filter("Matkl", "EQ", sap.ui.getCore().dadosDetail.Matkl));                                                                                                                                                                  
			oFilters.push(new sap.ui.model.Filter("Begda", "EQ", b));                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
			this.oModel2.read(p_EntitySet, {                                                                                                                                                                                                                            
				filters: oFilters,                                                                                                                                                                                                                                         
				success: function (oData) {                                                                                                                                                                                                                                
					//		                                                                                                                                                                                                                                                      
					var json = new JSONModel();                                                                                                                                                                                                                               
					var oArr = that.calcTotals(oData.results);                                                                                                                                                                                                                
					json.setData({                                                                                                                                                                                                                                            
						modelProg: oArr                                                                                                                                                                                                                                          
					});                                                                                                                                                                                                                                                       
					var area1 = oArr[3].D1h;                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
					if (area1 === "") {                                                                                                                                                                                                                                       
						area1 = "0.00";                                                                                                                                                                                                                                          
					}                                                                                                                                                                                                                                                         
					var area2 = oArr[3].D2h;                                                                                                                                                                                                                                  
					if (area2 === "") {                                                                                                                                                                                                                                       
						area2 = "0.00";                                                                                                                                                                                                                                          
					}                                                                                                                                                                                                                                                         
					var area3 = oArr[3].D3h;                                                                                                                                                                                                                                  
					if (area3 === "") {                                                                                                                                                                                                                                       
						area3 = "0.00";                                                                                                                                                                                                                                          
					}                                                                                                                                                                                                                                                         
					var area4 = oArr[3].D4h;                                                                                                                                                                                                                                  
					if (area4 === "") {                                                                                                                                                                                                                                       
						area4 = "0.00";                                                                                                                                                                                                                                          
					}                                                                                                                                                                                                                                                         
					var area5 = oArr[3].D5h;                                                                                                                                                                                                                                  
					if (area5 === "") {                                                                                                                                                                                                                                       
						area5 = "0.00";                                                                                                                                                                                                                                          
					}                                                                                                                                                                                                                                                         
					var oFilters1 = [];                                                                                                                                                                                                                                       
					oFilters1.push(new sap.ui.model.Filter("Acnum", "EQ", sap.ui.getCore().dadosMaster.Acnum));                                                                                                                                                               
					oFilters1.push(new sap.ui.model.Filter("Extwg", "EQ", sap.ui.getCore().dadosProcessoId));                                                                                                                                                                 
					oFilters1.push(new sap.ui.model.Filter("Matkl", "EQ", sap.ui.getCore().dadosDetail.Matkl));                                                                                                                                                               
					oFilters1.push(new sap.ui.model.Filter("Total1", "EQ", area1));                                                                                                                                                                                           
					oFilters1.push(new sap.ui.model.Filter("Total2", "EQ", area2));                                                                                                                                                                                           
					oFilters1.push(new sap.ui.model.Filter("Total3", "EQ", area3));                                                                                                                                                                                           
					oFilters1.push(new sap.ui.model.Filter("Total4", "EQ", area4));                                                                                                                                                                                           
					oFilters1.push(new sap.ui.model.Filter("Total5", "EQ", area5));                                                                                                                                                                                           
					oFilters1.push(new sap.ui.model.Filter("Begda", "EQ", sap.ui.getCore().Begda));                                                                                                                                                                           
                                                                                                                                                                                                                                                               
					that.oModel1.read("/Suggest_TerrainsSet", {                                                                                                                                                                                                               
						filters: oFilters1,                                                                                                                                                                                                                                      
						success: function (oData2) {                                                                                                                                                                                                                             
								//	console.log(oData2);                                                                                                                                                                                                                                
								var TerrainData = new JSONModel();                                                                                                                                                                                                                     
								TerrainData.setData(oData2.results);                                                                                                                                                                                                                   
								sap.ui.getCore().setModel(TerrainData, "TerrainFP");                                                                                                                                                                                                   
								//that.addTalhoesToDate(oData2);                                                                                                                                                                                                                       
							      //---------------------------------                                                                                                                                                                                                               
							      //Begin of Sequeira...                                                                                                                                                                                                                            
							      try {                                                                                                                                                                                                                                             
							        if (!that.oView.getModel("modelWeekDate")) {                                                                                                                                                                                                    
							          //No Model yet...get it here...                                                                                                                                                                                                               
							          var b = sap.ui.getCore().Begda;                                                                                                                                                                                                               
							          that.oModel1.read("/GetWeekDateSet('" + b + "')", {                                                                                                                                                                                           
							            success: function(oData) {                                                                                                                                                                                                                  
							              //Create the model before calling...                                                                                                                                                                                                      
										  var json = new JSONModel();                                                                                                                                                                                                                        
										  json.setData(oData);                                                                                                                                                                                                                               
										  that.oView.setModel(json, "modelWeekDate");							            	                                                                                                                                                                                    
							              //Now call it...                                                                                                                                                                                                                          
							              that.addTalhoesToDate(oData2);                                                                                                                                                                                                            
							            },                                                                                                                                                                                                                                          
							            error: function(oError) {                                                                                                                                                                                                                   
							              //Call it anyway...                                                                                                                                                                                                                       
							              that.addTalhoesToDate(oData2);                                                                                                                                                                                                            
							            }                                                                                                                                                                                                                                           
							          });                                                                                                                                                                                                                                           
							        } else {                                                                                                                                                                                                                                        
							          that.addTalhoesToDate(oData2);                                                                                                                                                                                                                
							        }                                                                                                                                                                                                                                               
							      } catch (err) {                                                                                                                                                                                                                                   
							        //Something wrong... call it...                                                                                                                                                                                                                 
							        that.addTalhoesToDate(oData2);                                                                                                                                                                                                                  
							      }                                                                                                                                                                                                                                                 
							      //End of Sequeira...                                                                                                                                                                                                                              
							      //-------------------------------								                                                                                                                                                                                                         
							}                                                                                                                                                                                                                                                       
							//});                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
					});                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
					that.oView.byId("idTabProg").setModel(json);                                                                                                                                                                                                              
					that.oView.byId("idTabProg").bindRows("/modelProg");                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
					// ***************************************************************************** \\                                                                                                                                                                       
                                                                                                                                                                                                                                                               
					// ***************************************************************************** \\			                                                                                                                                                                    
					var mdData = {                                                                                                                                                                                                                                            
						talhoes: [{                                                                                                                                                                                                                                              
							D0: "Talhões",                                                                                                                                                                                                                                          
							D1: "",                                                                                                                                                                                                                                                 
							D2: "",                                                                                                                                                                                                                                                 
							D3: "",                                                                                                                                                                                                                                                 
							D4: "",                                                                                                                                                                                                                                                 
							D5: "",                                                                                                                                                                                                                                                 
						}]                                                                                                                                                                                                                                                       
					};                                                                                                                                                                                                                                                        
					var oMod = new sap.ui.model.json.JSONModel();                                                                                                                                                                                                             
					oMod.setData(mdData);                                                                                                                                                                                                                                     
					that.oView.byId("idTabTa").setModel(oMod);                                                                                                                                                                                                                
					that.oView.byId("idTabTa").bindRows("/talhoes");                                                                                                                                                                                                          
					//					that.oView.byId("idTabTa").addRow();                                                                                                                                                                                                               
					// ***************************************************************************** \\                                                                                                                                                                       
					// GET DATA HOARS EFETIVAS                                                                                                                                                                                                                                
					// ***************************************************************************** \\                                                                                                                                                                       
					var then = that;                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
					that.oModel1.read("/GetWorkCenterSet", {                                                                                                                                                                                                                  
						filters: oFilters,                                                                                                                                                                                                                                       
						success: function (oData2) {                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
							var json1 = new JSONModel();                                                                                                                                                                                                                            
							json1.setData({                                                                                                                                                                                                                                         
								modelCentro: oData2.results                                                                                                                                                                                                                            
							});                                                                                                                                                                                                                                                     
							then.oView.byId("idTabCentro").setVisibleRowCount(oData2.results.length);                                                                                                                                                                               
							then.oView.byId("idTabCentro").setModel(json1);                                                                                                                                                                                                         
							then.oView.byId("idTabCentro").bindRows("/modelCentro");                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
							var data = [];                                                                                                                                                                                                                                          
							var filters = [];                                                                                                                                                                                                                                       
							var PeriodDateFormat = b.substr(0, 6);                                                                                                                                                                                                                  
							var period = PeriodDateFormat;                                                                                                                                                                                                                          
							//BOC-T_T.KONNO-07.02.20 AQUIX                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
							//EOC-T_T.KONNO-07.02.20                                                                                                                                                                                                                                
							filters.push(new sap.ui.model.Filter("Period", "EQ", period));                                                                                                                                                                                          
							filters.push(new sap.ui.model.Filter("Werks", "EQ", sap.ui.getCore().dadosMaster.Werks));                                                                                                                                                               
                                                                                                                                                                                                                                                               
							var xpto = then;                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
							then.oModel1.read("/GetHorasEfetSet", {                                                                                                                                                                                                                 
								filters: filters,                                                                                                                                                                                                                                      
								success: function (oData3) {                                                                                                                                                                                                                           
									//		                                                                                                                                                                                                                                                  
									var json = new JSONModel();                                                                                                                                                                                                                           
									sap.ui.getCore().horasEfetivas = oData3;                                                                                                                                                                                                              
									xpto.setDatesTable();                                                                                                                                                                                                                                 
									//			xpto.calcCentroTrabalho();                                                                                                                                                                                                                       
									//									xpto.addTalhoesToDate(xpto);                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
									var xFilters = [];                                                                                                                                                                                                                                    
									xFilters.push(new sap.ui.model.Filter("Acnum", "EQ", sap.ui.getCore().dadosMaster.Acnum));                                                                                                                                                            
									xFilters.push(new sap.ui.model.Filter("Extwg", "EQ", sap.ui.getCore().dadosProcessoId));                                                                                                                                                              
									xFilters.push(new sap.ui.model.Filter("Matkl", "EQ", sap.ui.getCore().dadosDetail.Matkl));                                                                                                                                                            
									xFilters.push(new sap.ui.model.Filter("Begda", "EQ", b));                                                                                                                                                                                             
									xFilters.push(new sap.ui.model.Filter("Data", "EQ", sap.ui.getCore().Data));                                                                                                                                                                          
                                                                                                                                                                                                                                                               
									var xpto1 = xpto;                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
									xpto.oModel1.read("/SetProgTalhaoSet", {                                                                                                                                                                                                              
										filters: xFilters,                                                                                                                                                                                                                                   
										success: function (oData4) {                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
											sap.ui.getCore().selectedTalhao = oData4;                                                                                                                                                                                                           
											//	xpto1.addTalhoesToDate(oData4);                                                                                                                                                                                                                  
											//							sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                          
										},                                                                                                                                                                                                                                                   
										error: function (oError) {                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
										}                                                                                                                                                                                                                                                    
									});                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
								},                                                                                                                                                                                                                                                     
								error: function (oError) {                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
								}                                                                                                                                                                                                                                                      
							});                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
						},                                                                                                                                                                                                                                                       
						error: function (oError) {                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
						}                                                                                                                                                                                                                                                        
					});                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
					//			                                                                                                                                                                                                                                                     
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		setWeekEndColor: function (oTable) {                                                                                                                                                                                                                         
			var that = this;                                                                                                                                                                                                                                            
			var nCol1=0,nCol2=0,nCol3=0,nCol4=0;&nbsp;&nbsp;                                                                                                                                                                                                            
			var isWeekEnd = false;                                                                                                                                                                                                                                      
			var year = this.getView().getModel("MDL_Ano").getData().ano;                                                                                                                                                                                                
			var oDate = that.oView.getModel("modelWeekDate").getData();                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
			var arr = [oDate.D1, oDate.D2, oDate.D3, oDate.D4, oDate.D5];                                                                                                                                                                                               
			var isWeekEnd = arr.some(function (item) {                                                                                                                                                                                                                  
				var oNewDate = that.getDateFormatter(item, year);                                                                                                                                                                                                          
				var date = new Date(oNewDate);                                                                                                                                                                                                                             
				var dateTime = new Date(date.getTime() + date.getTimezoneOffset()*(60000));                                                                                                                                                                                
				var sDay = dateTime.getDay();                                                                                                                                                                                                                              
				return sDay === 0 || sDay === 6;                                                                                                                                                                                                                           
			});                                                                                                                                                                                                                                                         
			//var dateStr = sap.ui.getCore().dataTalhao;                                                                                                                                                                                                                
			this.isWeekEnd = isWeekEnd;                                                                                                                                                                                                                                 
			if (isWeekEnd) {                                                                                                                                                                                                                                            
				arr.forEach(function (item, index) {                                                                                                                                                                                                                       
					var oNewDate = that.getDateFormatter(item, year);                                                                                                                                                                                                         
					var date = new Date(oNewDate);                                                                                                                                                                                                                            
					var dateTime = new Date(date.getTime() + date.getTimezoneOffset()*(60000));                                                                                                                                                                               
					var sDay = dateTime.getDay();                                                                                                                                                                                                                             
					if (sDay === 0) { // sunday                                                                                                                                                                                                                               
						nCol1 = index + 1;                                                                                                                                                                                                                                       
					} else if (sDay === 6) { // saturday                                                                                                                                                                                                                      
						nCol2 = index + 1;                                                                                                                                                                                                                                       
					}                                                                                                                                                                                                                                                         
				});                                                                                                                                                                                                                                                        
				that.setColumnColor(oTable,nCol1, nCol2, nCol3, nCol4,"rgb(247,247,247)");                                                                                                                                                                                 
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		setWeekEndColorMul: function (oTable) {                                                                                                                                                                                                                      
			var that = this;                                                                                                                                                                                                                                            
			var nCol1=0,nCol2=0,nCol3=0,nCol4=0;&nbsp;&nbsp;                                                                                                                                                                                                            
			var isWeekEnd = false;                                                                                                                                                                                                                                      
			var year = this.getView().getModel("MDL_Ano").getData().ano;                                                                                                                                                                                                
			var oDate = that.oView.getModel("modelWeekDate").getData();                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
			var arr = [oDate.D1, oDate.D2, oDate.D3, oDate.D4, oDate.D5];                                                                                                                                                                                               
			var isWeekEnd = arr.some(function (item) {                                                                                                                                                                                                                  
				var oNewDate = that.getDateFormatter(item, year);                                                                                                                                                                                                          
				var date = new Date(oNewDate);                                                                                                                                                                                                                             
				var dateTime = new Date(date.getTime() + date.getTimezoneOffset()*(60000));                                                                                                                                                                                
				var sDay = dateTime.getDay();                                                                                                                                                                                                                              
				return sDay === 0 || sDay === 6;                                                                                                                                                                                                                           
			});                                                                                                                                                                                                                                                         
			//var dateStr = sap.ui.getCore().dataTalhao;                                                                                                                                                                                                                
			this.isWeekEnd = isWeekEnd;                                                                                                                                                                                                                                 
			if (isWeekEnd) {                                                                                                                                                                                                                                            
				arr.forEach(function (item, index) {                                                                                                                                                                                                                       
					var oNewDate = that.getDateFormatter(item, year);                                                                                                                                                                                                         
					var date = new Date(oNewDate);                                                                                                                                                                                                                            
					var dateTime = new Date(date.getTime() + date.getTimezoneOffset()*(60000));                                                                                                                                                                               
					var sDay = dateTime.getDay();                                                                                                                                                                                                                             
					var aCols = [                                                                                                                                                                                                                                             
						[1, 2],                                                                                                                                                                                                                                                  
						[3, 4],                                                                                                                                                                                                                                                  
						[5, 6],                                                                                                                                                                                                                                                  
						[7, 8],                                                                                                                                                                                                                                                  
						[9, 10]                                                                                                                                                                                                                                                  
					];                                                                                                                                                                                                                                                        
					if (sDay === 0) { // sunday                                                                                                                                                                                                                               
						nCol1 = aCols[index][0];                                                                                                                                                                                                                                 
						nCol2 = aCols[index][1];                                                                                                                                                                                                                                 
					} else if (sDay === 6) { // saturday                                                                                                                                                                                                                      
						nCol3 = aCols[index][0];                                                                                                                                                                                                                                 
						nCol4 = aCols[index][1];                                                                                                                                                                                                                                 
					}                                                                                                                                                                                                                                                         
				});                                                                                                                                                                                                                                                        
				that.setColumnColor(oTable,nCol1, nCol2, nCol3, nCol4,"rgb(247,247,247)");                                                                                                                                                                                 
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		setColumnColor: function (oTable, nCol1, nCol2, nCol3, nCol4, sColor) {                                                                                                                                                                                      
			var id = $(oTable.$()).find("table").attr("id");                                                                                                                                                                                                            
			id = id.replace("header", "table");                                                                                                                                                                                                                         
			$("#" + id + " td").each(function () {                                                                                                                                                                                                                      
				var id = $(this).attr("id");                                                                                                                                                                                                                               
				var aCol = id.split("-");                                                                                                                                                                                                                                  
				var sCol = aCol[aCol.length - 1];                                                                                                                                                                                                                          
				var nCol = parseInt(sCol.match(/\d+/g)[0], 10);                                                                                                                                                                                                            
				if ((nCol === nCol1 && nCol1 !== 0) || (nCol === nCol2 && nCol2 !== 0) || (nCol === nCol3 && nCol3 !== 0) || (nCol === nCol4 && nCol4 !== 0)) {                                                                                                            
					$("#" + id).css("background-color", sColor); // background                                                                                                                                                                                                
					$("#" + id).find("*").each(function () {                                                                                                                                                                                                                  
						$(this).css("background-color", sColor);                                                                                                                                                                                                                 
					}); // all nested elements                                                                                                                                                                                                                                
					$("#" + id).find("input").parent().css("border-color", sColor); // border                                                                                                                                                                                 
				} else {                                                                                                                                                                                                                                                   
					$("#" + id).css("background-color", "white");                                                                                                                                                                                                             
					$("#" + id).find("*").each(function () {                                                                                                                                                                                                                  
						$(this).css("background-color", "white");                                                                                                                                                                                                                
					});                                                                                                                                                                                                                                                       
					$("#" + id).find("input").parent().css("border-color", "white");                                                                                                                                                                                          
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
		setDatesTable: function (oEvent) {                                                                                                                                                                                                                           
			//this.oView.byId("idTabProg").getModel().refresh();                                                                                                                                                                                                        
			var that = this;                                                                                                                                                                                                                                            
		                                                                                                                                                                                                                                                             
		/*	if (navigator.language === "en-US") {                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
				/*	var date = this.oView.byId("idCalendar").getStartDate().toLocaleDateString();                                                                                                                                                                           
					var day = date.substr(3, 2);                                                                                                                                                                                                                              
					var month = date.substr(0, 2);                                                                                                                                                                                                                            
					var year = date.substr(6, 4);                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
			}*/&nbsp;                                                                                                                                                                                                                                                   
				/*	date = oEvent.getSource().getStartDate().toLocaleDateString();                                                                                                                                                                                          
					day = date.substr(0, 2);                                                                                                                                                                                                                                  
					month = date.substr(3, 2);                                                                                                                                                                                                                                
					year = date.substr(6, 4);*/                                                                                                                                                                                                                               
				var oDateFormat = DateFormat.getDateInstance({                                                                                                                                                                                                             
					pattern: "yyyyMMdd"                                                                                                                                                                                                                                       
				});                                                                                                                                                                                                                                                        
				var date = oDateFormat.format(that.oView.byId("idCalendar").getStartDate());                                                                                                                                                                               
		//	}                                                                                                                                                                                                                                                         
			var b = date;                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
			this.oModel1.read("/GetWeekDateSet('" + b + "')", {                                                                                                                                                                                                         
				success: function (oData) {                                                                                                                                                                                                                                
					var then = that;                                                                                                                                                                                                                                          
					var json = new JSONModel();                                                                                                                                                                                                                               
					json.setData(oData);                                                                                                                                                                                                                                      
					that.oView.setModel(json, "modelWeekDate");                                                                                                                                                                                                               
					// ------------------------------------------------------------------------------------------------------------------------------\\                                                                                                                       
					var oFilters = [];                                                                                                                                                                                                                                        
					oFilters.push(new sap.ui.model.Filter("Acnum", "EQ", sap.ui.getCore().dadosMaster.Acnum));                                                                                                                                                                
					oFilters.push(new sap.ui.model.Filter("Processo", "EQ", sap.ui.getCore().dadosProcessoId));                                                                                                                                                               
					oFilters.push(new sap.ui.model.Filter("Matkl", "EQ", sap.ui.getCore().dadosDetail.Matkl));                                                                                                                                                                
					oFilters.push(new sap.ui.model.Filter("Data", "EQ", oData.Begda));                                                                                                                                                                                        
					//					that.onGetDataDetail("/SetGetDataProgSet", "modelProg", oFilters, oData.Begda);                                                                                                                                                                    
					// ------------------------------------------------------------------------------------------------------------------------------\\&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs+
p;                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
					sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                         
					that.setWeekEndColorMul(that.oView.byId("idTabProg")); // multi                                                                                                                                                                                           
					that.setWeekEndColor(that.oView.byId("idTabCentro")); // sing                                                                                                                                                                                             
					that.setWeekEndColor(that.oView.byId("idTabTa"));                                                                                                                                                                                                         
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
					//			                                                                                                                                                                                                                                                     
					sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		handleCalendarSelect: function (oEvent) {                                                                                                                                                                                                                    
			var that = this;                                                                                                                                                                                                                                            
			sap.ui.core.BusyIndicator.show(0);                                                                                                                                                                                                                          
			var oFilters = [];                                                                                                                                                                                                                                          
			/*	if (navigator.language === "en-US") {                                                                                                                                                                                                                    
						var date = this.oView.byId("idCalendar").getStartDate();                                                                                                                                                                                                 
						var day = date.substr(3, 2);                                                                                                                                                                                                                             
						var month = date.substr(0, 2);                                                                                                                                                                                                                           
						var year = date.substr(6, 4);                                                                                                                                                                                                                            
					} else {*/                                                                                                                                                                                                                                                
			var oDateFormat = DateFormat.getDateInstance({                                                                                                                                                                                                              
				pattern: "yyyyMMdd"                                                                                                                                                                                                                                        
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			var date = oDateFormat.format(that.oView.byId("idCalendar").getStartDate());                                                                                                                                                                                
			var b = date;                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
			/*	if (oEvent === undefined) {                                                                                                                                                                                                                              
					if (navigator.language === "en-US") {                                                                                                                                                                                                                     
						var date = this.oView.byId("idCalendar").getStartDate();                                                                                                                                                                                                 
						var day = date.substr(3, 2);                                                                                                                                                                                                                             
						var month = date.substr(0, 2);                                                                                                                                                                                                                           
						var year = date.substr(6, 4);                                                                                                                                                                                                                            
					} else {                                                                                                                                                                                                                                                  
						date = this.oView.byId("idCalendar").getStartDate();                                                                                                                                                                                                     
						day = date.substr(0, 2);                                                                                                                                                                                                                                 
						month = date.substr(3, 2);                                                                                                                                                                                                                               
						year = date.substr(6, 4);                                                                                                                                                                                                                                
					}                                                                                                                                                                                                                                                         
					var b = year + month + day;                                                                                                                                                                                                                               
				} else {                                                                                                                                                                                                                                                   
					//		        date = oEvent.getSource().getStartDate().toLocaleDateString();                                                                                                                                                                                
					if (navigator.language === "en-US") {                                                                                                                                                                                                                     
						date = oEvent.getSource().getStartDate().toLocaleDateString();                                                                                                                                                                                           
						day = date.substr(3, 2);                                                                                                                                                                                                                                 
						month = date.substr(0, 2);                                                                                                                                                                                                                               
						year = date.substr(6, 4);                                                                                                                                                                                                                                
					} else {                                                                                                                                                                                                                                                  
						date = oEvent.getSource().getStartDate().toLocaleDateString();                                                                                                                                                                                           
						day = date.substr(0, 2);                                                                                                                                                                                                                                 
						month = date.substr(3, 2);                                                                                                                                                                                                                               
						year = date.substr(6, 4);                                                                                                                                                                                                                                
					}                                                                                                                                                                                                                                                         
					b = year + month + day;                                                                                                                                                                                                                                   
				}*/                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
			this.onGetDataDetail("/SetGetDataProgSet", "modelProg", oFilters, b);                                                                                                                                                                                       
			//			this.setDatesTable(oEvent);                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		openReceitas: function (oEvent) {                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
			var that = this;                                                                                                                                                                                                                                            
			var oFilters = [];                                                                                                                                                                                                                                          
			oFilters.push(new sap.ui.model.Filter("Matnr", "EQ", sap.ui.getCore().dadosDetail.Matnr));                                                                                                                                                                  
                                                                                                                                                                                                                                                               
			this.oModel1.read("/GetReceitasSet", {                                                                                                                                                                                                                      
				filters: oFilters,                                                                                                                                                                                                                                         
				success: function (oData) {                                                                                                                                                                                                                                
					//					                                                                                                                                                                                                                                                   
					var json = new JSONModel();                                                                                                                                                                                                                               
					json.setData(oData);                                                                                                                                                                                                                                      
					that.oView.setModel(json, "receitas");                                                                                                                                                                                                                    
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			this._getDialog().open();                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		_getDialog: function () {                                                                                                                                                                                                                                    
			if (!this._oDialog) {                                                                                                                                                                                                                                       
				this._oDialog = sap.ui.xmlfragment(this.createId("idFrag"), "com.vistex.zagriplan.view.Receitas", this.getView().getController());                                                                                                                         
				this.getView().addDependent(this._oDialog);                                                                                                                                                                                                                
			}                                                                                                                                                                                                                                                           
			return this._oDialog;                                                                                                                                                                                                                                       
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onCloseDialog: function (oEvent) {                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			if (oEvent.getSource().getText() === "Ok") {                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
			} else {                                                                                                                                                                                                                                                    
				//				oEvent.getSource().                                                                                                                                                                                                                                  
				this.byId(sap.ui.core.Fragment.createId("idFrag", "helloDialog")).close();                                                                                                                                                                                 
				//				this.byId(sap.ui.core.Fragment.createId("idFrag","helloDialog")).destroyContent();                                                                                                                                                                   
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		onAfterClose: function (oEvent) {                                                                                                                                                                                                                            
			if (this._oDialog) {                                                                                                                                                                                                                                        
				this._oDialog.destroy();                                                                                                                                                                                                                                   
				this._oDialog = null; // make it falsy so that it can be created next time                                                                                                                                                                                 
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		changeReceita: function (oEvent) {                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			//		                                                                                                                                                                                                                                                        
			sap.ui.core.BusyIndicator.show(0);                                                                                                                                                                                                                          
			var that = this;                                                                                                                                                                                                                                            
			var oFilters = [];                                                                                                                                                                                                                                          
			var oTabProd = this.byId(sap.ui.core.Fragment.createId("idFrag", "idTabProd"));                                                                                                                                                                             
			var oTabProdSi = this.byId(sap.ui.core.Fragment.createId("idFrag", "idTabProdSimilar"));                                                                                                                                                                    
                                                                                                                                                                                                                                                               
			//oTabProd.unbindRows();                                                                                                                                                                                                                                    
			//oTabProdSi.unbindRows();			                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
			oFilters.push(new sap.ui.model.Filter("Rcnum", "EQ", oEvent.getParameter("selectedItem").getKey()));                                                                                                                                                        
                                                                                                                                                                                                                                                               
			this.oModel.read("/GetReceitaListaSet", {                                                                                                                                                                                                                   
				filters: oFilters,                                                                                                                                                                                                                                         
				success: function (oData) {                                                                                                                                                                                                                                
					//				                                                                                                                                                                                                                                                    
					var then = that;                                                                                                                                                                                                                                          
					var json = new JSONModel();                                                                                                                                                                                                                               
					json.setData({                                                                                                                                                                                                                                            
						receitaLista: oData.results                                                                                                                                                                                                                              
					});                                                                                                                                                                                                                                                       
					var tab = that.byId(sap.ui.core.Fragment.createId("idFrag", "idTabProd"));                                                                                                                                                                                
					tab.setVisibleRowCount(oData.results.length);                                                                                                                                                                                                             
					tab.setModel(json);                                                                                                                                                                                                                                       
					tab.bindRows("/receitaLista");                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
					that.oModel.read("/GetReceitaListaSimilarSet", {                                                                                                                                                                                                          
						filters: oFilters,                                                                                                                                                                                                                                       
						success: function (oData1) {                                                                                                                                                                                                                             
							var json1 = new JSONModel();                                                                                                                                                                                                                            
							json1.setData({                                                                                                                                                                                                                                         
								receitaSimilar: oData1.results                                                                                                                                                                                                                         
							});                                                                                                                                                                                                                                                     
							var tabSimilar = that.byId(sap.ui.core.Fragment.createId("idFrag", "idTabProdSimilar"));                                                                                                                                                                
							tabSimilar.setVisibleRowCount(oData1.results.length);                                                                                                                                                                                                   
							tabSimilar.setModel(json1);                                                                                                                                                                                                                             
							tabSimilar.bindRows("/receitaSimilar");                                                                                                                                                                                                                 
							sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                       
						},                                                                                                                                                                                                                                                       
						error: function (oError) {                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
						}                                                                                                                                                                                                                                                        
					});                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		onAddReceita: function (oEvent) {                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
			var that = this;                                                                                                                                                                                                                                            
			var line = {};                                                                                                                                                                                                                                              
		//	var oReceita = this.byId(sap.ui.core.Fragment.createId("idFrag", "idReceita"));                                                                                                                                                                           
			var oTab = this.byId(sap.ui.core.Fragment.createId("idFrag", "idTabProd"));                                                                                                                                                                                 
			var oTabSim = this.byId(sap.ui.core.Fragment.createId("idFrag", "idTabProdSimilar"));                                                                                                                                                                       
			var oTabOther = this.byId(sap.ui.core.Fragment.createId("idFrag", "idTabProdSimilarOther"));                                                                                                                                                                
			var lines1 = oTabSim.getSelectedIndices();                                                                                                                                                                                                                  
			var lines2 = oTabOther.getSelectedIndices();                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
			var arrayLog = [];                                                                                                                                                                                                                                          
			var rows = oTab.getVisibleRowCount();                                                                                                                                                                                                                       
			for (var x = 0; x < lines1.length; x++) {                                                                                                                                                                                                                   
				var line = {};                                                                                                                                                                                                                                             
				line.MatnrIns = oTabSim.getModel().getData().receitaSimilar[lines1[x]].MatnrSim;                                                                                                                                                                           
				line.Maktx = oTabSim.getModel().getData().receitaSimilar[lines1[x]].MaktxSim;                                                                                                                                                                              
				line.Rcdos = oTabSim.getModel().getData().receitaSimilar[lines1[x]].RcdosSim;                                                                                                                                                                              
				line.Units = oTabSim.getModel().getData().receitaSimilar[lines1[x]].UnitsSim;                                                                                                                                                                              
				line.PlntStock = oTabSim.getModel().getData().receitaSimilar[lines1[x]].PlntStock;                                                                                                                                                                         
                                                                                                                                                                                                                                                               
				var ret = jQuery.grep(oTab.getModel().getData().receitaLista, function (n, i) {                                                                                                                                                                            
					return (line.MatnrIns === n.MatnrIns);                                                                                                                                                                                                                    
				});                                                                                                                                                                                                                                                        
				// verifica se ja existe registro com mesmo id de insumo, se sim add log error e pula next                                                                                                                                                                 
				if (ret.length > 0) {                                                                                                                                                                                                                                      
					line.Status = 'E';                                                                                                                                                                                                                                        
					arrayLog.push(line);                                                                                                                                                                                                                                      
					MessageToast.show("Insumo já existe na receita", {                                                                                                                                                                                                        
						my: "center center", // default                                                                                                                                                                                                                          
						at: "center center", // default                                                                                                                                                                                                                          
					});                                                                                                                                                                                                                                                       
					continue;                                                                                                                                                                                                                                                 
				} else {                                                                                                                                                                                                                                                   
					MessageToast.show("Insumo adicionado na receita", {                                                                                                                                                                                                       
						my: "center center", // default                                                                                                                                                                                                                          
						at: "center center", // default                                                                                                                                                                                                                          
					});                                                                                                                                                                                                                                                       
					// add log success                                                                                                                                                                                                                                        
					line.Status = 'S';                                                                                                                                                                                                                                        
					arrayLog.push(line);                                                                                                                                                                                                                                      
					line.NewData = "X";                                                                                                                                                                                                                                       
					// add model                                                                                                                                                                                                                                              
					oTab.getModel().getData().receitaLista.push(line);                                                                                                                                                                                                        
					rows = rows + 1;                                                                                                                                                                                                                                          
					// add visible row                                                                                                                                                                                                                                        
					oTab.setVisibleRowCount(rows);                                                                                                                                                                                                                            
					oTab.getModel().refresh();                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
				}                                                                                                                                                                                                                                                          
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onDeleteReceita: function (oEvent) {                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			var oTab = this.byId(sap.ui.core.Fragment.createId("idFrag", "idTabProd"));                                                                                                                                                                                 
			var selLine = oTab.getSelectedIndex();                                                                                                                                                                                                                      
			var line = oTab.getModel().getData().receitaLista[selLine];                                                                                                                                                                                                 
			if (selLine >= 0) {                                                                                                                                                                                                                                         
				//				if (line.NewData !== undefined && line.NewData === "X") {                                                                                                                                                                                            
				oTab.getModel().getData().receitaLista.splice(selLine, 1);                                                                                                                                                                                                 
				oTab.setVisibleRowCount(oTab.getModel().getData().receitaLista.length);                                                                                                                                                                                    
				oTab.getModel().refresh();                                                                                                                                                                                                                                 
				MessageToast.show("Insumo removido da receita", {                                                                                                                                                                                                          
					my: "center center", // default                                                                                                                                                                                                                           
					at: "center center", // default                                                                                                                                                                                                                           
				});                                                                                                                                                                                                                                                        
				// } else {                                                                                                                                                                                                                                                
				// 	MessageToast.show("Insumo não pode ser removido", {                                                                                                                                                                                                    
				// 		my: "center center", // default                                                                                                                                                                                                                       
				// 		at: "center center", // default                                                                                                                                                                                                                       
				// 	});                                                                                                                                                                                                                                                    
				// }                                                                                                                                                                                                                                                       
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onClear: function (oEvent) {                                                                                                                                                                                                                                 
			this.byId(sap.ui.core.Fragment.createId("idFrag", "idTabProdSimilarOther")).unbindRows();                                                                                                                                                                   
			this.byId(sap.ui.core.Fragment.createId("idFrag", "idCentro")).setValue("");                                                                                                                                                                                
		},                                                                                                                                                                                                                                                           
		onFilterCentro: function (oEvent) {                                                                                                                                                                                                                          
			var that = this;                                                                                                                                                                                                                                            
			var oFilters = [];                                                                                                                                                                                                                                          
			var oCentro = this.byId(sap.ui.core.Fragment.createId("idFrag", "idCentro"));                                                                                                                                                                               
			//var oReceita = this.byId(sap.ui.core.Fragment.createId("idFrag", "idReceita"));                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			if (oCentro.getValue() === "") {                                                                                                                                                                                                                            
				oCentro.setValueState("Error");                                                                                                                                                                                                                            
				oCentro.setValueStateText("Entrada inválida");                                                                                                                                                                                                             
			} else {                                                                                                                                                                                                                                                    
				oCentro.setValueState("None");                                                                                                                                                                                                                             
				oCentro.setValueStateText("");                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
			//	oFilters.push(new sap.ui.model.Filter("Rcnum", "EQ", oReceita.getSelectedKey()));                                                                                                                                                                        
				oFilters.push(new sap.ui.model.Filter("Werks", "EQ", oCentro.getValue()));                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
				this.oModel.read("/GetReceitaListaSimilarSet", {                                                                                                                                                                                                           
					filters: oFilters,                                                                                                                                                                                                                                        
					success: function (oData) {                                                                                                                                                                                                                               
						//			                                                                                                                                                                                                                                                    
						var json = new JSONModel();                                                                                                                                                                                                                              
						json.setData({                                                                                                                                                                                                                                           
							receitaLista: oData.results                                                                                                                                                                                                                             
						});                                                                                                                                                                                                                                                      
						var tab = that.byId(sap.ui.core.Fragment.createId("idFrag", "idTabProdSimilarOther"));                                                                                                                                                                   
						tab.setVisibleRowCount(oData.results.length);                                                                                                                                                                                                            
						tab.setModel(json);                                                                                                                                                                                                                                      
						tab.bindRows("/receitaLista");                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
					},                                                                                                                                                                                                                                                        
					error: function (oError) {                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
					}                                                                                                                                                                                                                                                         
				});                                                                                                                                                                                                                                                        
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		onSaveReceita: function (oEvent) {                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			var that = this;                                                                                                                                                                                                                                            
			var oModel = new ODataModel("/sap/opu/odata/sap/ZFARM_AGRIPLAN_SRV/");                                                                                                                                                                                      
			var terrenos = this.oView.byId("table2").getModel("modelSelect").getData().results;                                                                                                                                                                         
			//var receita = this.byId(sap.ui.core.Fragment.createId("idFrag", "idReceita"));                                                                                                                                                                            
			var insumos = this.byId(sap.ui.core.Fragment.createId("idFrag", "idTabProd")).getModel().getData().receitaLista;                                                                                                                                            
			for (var x = 0; x < terrenos.length; x++) {                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
				for (var y = 0; y < insumos.length; y++) {                                                                                                                                                                                                                 
					var dados = {};                                                                                                                                                                                                                                           
					dados.Werks = sap.ui.getCore().dadosMaster.Werks;                                                                                                                                                                                                         
					dados.Acnum = sap.ui.getCore().dadosMaster.Acnum;                                                                                                                                                                                                         
					dados.Extwg = sap.ui.getCore().dadosProcessoId;                                                                                                                                                                                                           
					dados.Matkl = sap.ui.getCore().dadosDetail.Matkl;                                                                                                                                                                                                         
					dados.TplnrFl = terrenos[x].TplnrFl;                                                                                                                                                                                                                      
				//	dados.Rcnum = receita.getSelectedKey();                                                                                                                                                                                                                 
					dados.MatnrIns = insumos[y].MatnrIns;                                                                                                                                                                                                                     
					dados.Rcdos = insumos[y].Rcdos;                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
					oModel.create("/SetReceitasSet", dados);                                                                                                                                                                                                                  
				}                                                                                                                                                                                                                                                          
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			oModel.submitChanges();                                                                                                                                                                                                                                     
			oModel.attachBatchRequestCompleted(function (oData, fnFunction, oListener) {                                                                                                                                                                                
				var bCompact = !!that.getView().$().closest(".sapUiSizeCompact").length;                                                                                                                                                                                   
				MessageBox.success(                                                                                                                                                                                                                                        
					"Receita salva com sucesso", {                                                                                                                                                                                                                            
						styleClass: bCompact ? "sapUiSizeCompact" : ""                                                                                                                                                                                                           
					}                                                                                                                                                                                                                                                         
				);                                                                                                                                                                                                                                                         
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onAfterRendering: function () {                                                                                                                                                                                                                              
			//	                                                                                                                                                                                                                                                         
		}                                                                                                                                                                                                                                                            
	});                                                                                                                                                                                                                                                           
});                                                                                                                                                                                                                                                            