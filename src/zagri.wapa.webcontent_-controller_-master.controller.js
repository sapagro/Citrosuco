sap.ui.define([                                                                                                                                                                                                                                                
	"sap/ui/core/mvc/Controller",                                                                                                                                                                                                                                 
	"sap/ui/model/Filter",                                                                                                                                                                                                                                        
	"sap/ui/core/Fragment",                                                                                                                                                                                                                                       
	"sap/m/ColumnListItem",                                                                                                                                                                                                                                       
	"sap/m/Label",                                                                                                                                                                                                                                                
	"com/vistex/zagriplan/model/models",                                                                                                                                                                                                                          
	"sap/ui/model/json/JSONModel",                                                                                                                                                                                                                                
	"sap/ui/core/routing/HashChanger"	                                                                                                                                                                                                                            
], function (Controller, Filter, Fragment, ColumnListItem, Label, models, JSONModel, HashChanger) {                                                                                                                                                            
	"use strict";                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
	return Controller.extend("com.vistex.zagriplan.controller.Master", {                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
		onInit: function () {                                                                                                                                                                                                                                        
			this.oModel = models.callBackEnd();                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
		_onRouteMatched: function (oEvent) {                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		onListItemPress: function (oEvent) {                                                                                                                                                                                                                         
			                                                                                                                                                                                                                                                            
//			if(sap.ui.getCore().dadosMaster !== undefined)                                                                                                                                                                                                            
			// reset the routing hash                                                                                                                                                                                                                                   
    		HashChanger.getInstance().replaceHash("");                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
			sap.ui.core.BusyIndicator.show(0);                                                                                                                                                                                                                          
			                                                                                                                                                                                                                                                            
			this.lineItem = oEvent.getSource().getBindingContext("masterModel").getProperty();                                                                                                                                                                          
			sap.ui.getCore().dadosMaster = this.lineItem;                                                                                                                                                                                                               
			this.getOwnerComponent().getRouter().navTo("Detail1", {                                                                                                                                                                                                     
				Acnum: this.lineItem.Acnum,                                                                                                                                                                                                                                
			});                                                                                                                                                                                                                                                         
			                                                                                                                                                                                                                                                            
			                                                                                                                                                                                                                                                            
		},                                                                                                                                                                                                                                                           
		onSearch: function (oEvt) {                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
			var aFilters = [];                                                                                                                                                                                                                                          
			var sQuery = oEvt.getSource().getValue();                                                                                                                                                                                                                   
			if (sQuery && sQuery.length > 0) {                                                                                                                                                                                                                          
				var filter = new Filter("Acdes", sap.ui.model.FilterOperator.Contains, sQuery);                                                                                                                                                                            
				aFilters.push(filter);                                                                                                                                                                                                                                     
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			// update list binding                                                                                                                                                                                                                                      
			var list = this.byId("idList");                                                                                                                                                                                                                             
			var binding = list.getBinding("items");                                                                                                                                                                                                                     
			binding.filter(aFilters, "Application");                                                                                                                                                                                                                    
		},                                                                                                                                                                                                                                                           
		 /**                                                                                                                                                                                                                                                         
         * Convenience method for getting the resource bundle.                                                                                                                                                                                                 
         * @public                                                                                                                                                                                                                                             
         * @returns {sap.ui.model.resource.ResourceModel} the resourceModel of the component                                                                                                                                                                   
         */                                                                                                                                                                                                                                                    
        getResourceBundle: function() {                                                                                                                                                                                                                        
            return this.getOwnerComponent().getModel("i18n").getResourceBundle();                                                                                                                                                                              
        },                                                                                                                                                                                                                                                     
        /**                                                                                                                                                                                                                                                    
         * Convenience method for getting text from i18n                                                                                                                                                                                                       
         * @param {string} key - accept key as string                                                                                                                                                                                                          
         * @param {string} args - accept args                                                                                                                                                                                                                  
         * @returns {string} - return string value of key from i18n                                                                                                                                                                                            
         * */                                                                                                                                                                                                                                                  
        getText: function(key, args) {                                                                                                                                                                                                                         
            return this.getResourceBundle().getText(key, args);                                                                                                                                                                                                
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
		onShowFilters: function (oEvent) {                                                                                                                                                                                                                           
			var that = this;                                                                                                                                                                                                                                            
            var areaTxt = this.getText("titleMaster");                                                                                                                                                                                                         
            var entervalid = this.getText("enterValid");                                                                                                                                                                                                       
			var oDialog = new sap.m.Dialog(this.createId("idFilters"), {                                                                                                                                                                                                
				//				id: "idFilters",                                                                                                                                                                                                                                     
				title: "Filtros",                                                                                                                                                                                                                                          
				contentWidth: "550px",                                                                                                                                                                                                                                     
				contentHeight: "300px",                                                                                                                                                                                                                                    
				content: [                                                                                                                                                                                                                                                 
					new sap.ui.layout.Grid({                                                                                                                                                                                                                                  
						defaultSpan: "L12 M12 S12", // sap.ui.layout.GridSpan                                                                                                                                                                                                    
						content: [                                                                                                                                                                                                                                               
								new sap.ui.layout.form.SimpleForm({                                                                                                                                                                                                                    
									editable: false, // boolean                                                                                                                                                                                                                           
									layout: sap.ui.layout.form.SimpleFormLayout.ResponsiveLayout, // sap.ui.layout.form.SimpleFormLayout                                                                                                                                                  
									labelSpanXL: 12, // int, since 1.34.0                                                                                                                                                                                                                 
									labelSpanL: 12, // int, since 1.16.3                                                                                                                                                                                                                  
									labelSpanM: 12, // int, since 1.16.3                                                                                                                                                                                                                  
									emptySpanL: 6, // int, since 1.16.3                                                                                                                                                                                                                   
									emptySpanM: 6, // int, since 1.16.3                                                                                                                                                                                                                   
									content: [                                                                                                                                                                                                                                            
											new sap.m.Label({                                                                                                                                                                                                                                   
												text: "Centro",                                                                                                                                                                                                                                    
//												labelFor: "idCentro"                                                                                                                                                                                                                             
											}),                                                                                                                                                                                                                                                 
											new sap.m.MultiInput(this.createId('idCentro'),{                                                                                                                                                                                                    
//												id: "idCentro",                                                                                                                                                                                                                                  
												showValueHelp: true,                                                                                                                                                                                                                               
												enableMultiLineMode: true,                                                                                                                                                                                                                         
												valueHelpRequest: [function (oEvent) {                                                                                                                                                                                                             
													sap.ui.core.BusyIndicator.show(0);                                                                                                                                                                                                                
													that.onValueHelpRequest(oEvent);                                                                                                                                                                                                                  
												},this],                                                                                                                                                                                                                                           
												change: [function (oEvent) {                                                                                                                                                                                                                       
												    var oTabCentro = sap.ui.getCore().getModel("modelCentro").getData().results;                                                                                                                                                                   
													var line = jQuery.grep(oTabCentro, function (n, i) {                                                                                                                                                                                              
	//													&nbsp;                                                                                                                                                                                                                                         
														return (oEvent.getSource().getValue() === n.Key);                                                                                                                                                                                                
													});&nbsp;                                                                                                                                                                                                                                         
													if(line.length > 0) {                                                                                                                                                                                                                             
														if (oEvent.getSource().getValueState() === 'Error') {                                                                                                                                                                                            
															oEvent.getSource().setValueState('None');                                                                                                                                                                                                       
															oEvent.getSource().setValueStateText('');															                                                                                                                                                                                        
														}                                                                                                                                                                                                                                                
														var value = oEvent.getSource().getValue();                                                                                                                                                                                                       
														oEvent.getSource().setValue("");                                                                                                                                                                                                                 
                                                    	oEvent.getSource().addToken(new sap.m.Token({key: line[0].Key, text: line[0].Key}));                                                                                                                      
													} else {                                                                                                                                                                                                                                          
														oEvent.getSource().setValueState('Error');                                                                                                                                                                                                       
														oEvent.getSource().setValueStateText(entervalid);														                                                                                                                                                                                  
													}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                             
												}, this],                                                                                                                                                                                                                                          
												liveChange: [function (oEvent) {                                                                                                                                                                                                                   
  //                                                   ;												&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                   
	//												var control = oEvent.getSource();                                                                                                                                                                                                               
												}, this],                                                                                                                                                                                                                                          
												                                                                                                                                                                                                                                                   
											}),                                                                                                                                                                                                                                                 
											new sap.m.Label({                                                                                                                                                                                                                                   
												text: areaTxt,                                                                                                                                                                                                                                     
//												labelFor: "idArea"                                                                                                                                                                                                                               
											}),                                                                                                                                                                                                                                                 
											new sap.m.MultiInput(this.createId('idAcnum'),{                                                                                                                                                                                                     
//												id: "idArea",                                                                                                                                                                                                                                    
												showValueHelp: true,                                                                                                                                                                                                                               
												enableMultiLineMode: true,                                                                                                                                                                                                                         
												valueHelpRequest: [function (oEvent) {                                                                                                                                                                                                             
													sap.ui.core.BusyIndicator.show(0);                                                                                                                                                                                                                
													that.onValueHelpRequest(oEvent);                                                                                                                                                                                                                  
												},this],                                                                                                                                                                                                                                           
												change: [function (oEvent) {                                                                                                                                                                                                                       
												    var oTabArea = sap.ui.getCore().getModel("modelAreaCultivo").getData().results;                                                                                                                                                                
													var line = jQuery.grep(oTabArea, function (n, i) {                                                                                                                                                                                                
	//													&nbsp;                                                                                                                                                                                                                                         
														return (oEvent.getSource().getValue() === n.Key);                                                                                                                                                                                                
													});&nbsp;                                                                                                                                                                                                                                         
													if(line.length > 0) {                                                                                                                                                                                                                             
														if (oEvent.getSource().getValueState() === 'Error') {                                                                                                                                                                                            
															oEvent.getSource().setValueState('None');                                                                                                                                                                                                       
															oEvent.getSource().setValueStateText('');															                                                                                                                                                                                        
														}                                                                                                                                                                                                                                                
														var value = oEvent.getSource().getValue();                                                                                                                                                                                                       
														oEvent.getSource().setValue("");                                                                                                                                                                                                                 
                                                    	oEvent.getSource().addToken(new sap.m.Token({key: line[0].Key, text: line[0].Key}));                                                                                                                      
													} else {                                                                                                                                                                                                                                          
														oEvent.getSource().setValueState('Error');                                                                                                                                                                                                       
														oEvent.getSource().setValueStateText(entervalid);														                                                                                                                                                                                  
													}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                             
												}, this],                                                                                                                                                                                                                                          
												liveChange: [function (oEvent) {                                                                                                                                                                                                                   
  //                                                   ;												&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                   
	//												var control = oEvent.getSource();                                                                                                                                                                                                               
												}, this],                                                                                                                                                                                                                                          
											}),                                                                                                                                                                                                                                                 
											new sap.m.Label({                                                                                                                                                                                                                                   
												visible: true,                                                                                                                                                                                                                                     
												text: "Safra",                                                                                                                                                                                                                                     
												labelFor: "idAjahr"                                                                                                                                                                                                                                
											}),                                                                                                                                                                                                                                                 
											new sap.m.MultiInput(this.createId('idAjahr'),{                                                                                                                                                                                                     
												visible: true,                                                                                                                                                                                                                                     
//												id: "idAjahr",                                                                                                                                                                                                                                   
												showValueHelp: true,                                                                                                                                                                                                                               
												enableMultiLineMode: true,                                                                                                                                                                                                                         
												valueHelpRequest: [function (oEvent) {                                                                                                                                                                                                             
													sap.ui.core.BusyIndicator.show(0);                                                                                                                                                                                                                
													that.onValueHelpRequest(oEvent);                                                                                                                                                                                                                  
												},this],                                                                                                                                                                                                                                           
												change: [function (oEvent) {                                                                                                                                                                                                                       
												    var oTabSafra = sap.ui.getCore().getModel("modelSafra").getData().results;                                                                                                                                                                     
													var line = jQuery.grep(oTabSafra, function (n, i) {                                                                                                                                                                                               
	//													&nbsp;                                                                                                                                                                                                                                         
														return (oEvent.getSource().getValue() === n.Key);                                                                                                                                                                                                
													});&nbsp;                                                                                                                                                                                                                                         
													if(line.length > 0) {                                                                                                                                                                                                                             
														if (oEvent.getSource().getValueState() === 'Error') {                                                                                                                                                                                            
															oEvent.getSource().setValueState('None');                                                                                                                                                                                                       
															oEvent.getSource().setValueStateText('');															                                                                                                                                                                                        
														}                                                                                                                                                                                                                                                
														var value = oEvent.getSource().getValue();                                                                                                                                                                                                       
														oEvent.getSource().setValue("");                                                                                                                                                                                                                 
                                                    	oEvent.getSource().addToken(new sap.m.Token({key: line[0].Key, text: line[0].Key}));                                                                                                                      
													} else {                                                                                                                                                                                                                                          
														oEvent.getSource().setValueState('Error');                                                                                                                                                                                                       
														oEvent.getSource().setValueStateText(entervalid);														                                                                                                                                                                                  
													}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                             
												}, this],                                                                                                                                                                                                                                          
												liveChange: [function (oEvent) {                                                                                                                                                                                                                   
  //                                                   ;												&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                   
	//												var control = oEvent.getSource();                                                                                                                                                                                                               
												}, this],                                                                                                                                                                                                                                          
											})                                                                                                                                                                                                                                                  
										] // sap.ui.core.Element                                                                                                                                                                                                                             
								})                                                                                                                                                                                                                                                     
							] // sap.ui.core.Control                                                                                                                                                                                                                                
					})                                                                                                                                                                                                                                                        
				],                                                                                                                                                                                                                                                         
				buttons: [                                                                                                                                                                                                                                                 
					new sap.m.Button(this.createId('idConfirm'), {                                                                                                                                                                                                            
//						id: "idConfirm",                                                                                                                                                                                                                                       
						text: "Confirmar",                                                                                                                                                                                                                                       
						icon: "sap-icon://accept",                                                                                                                                                                                                                               
						type: "Accept",                                                                                                                                                                                                                                          
						press: function (oEvent) {                                                                                                                                                                                                                               
							that.onPress(oEvent);                                                                                                                                                                                                                                   
						}                                                                                                                                                                                                                                                        
					}),                                                                                                                                                                                                                                                       
					new sap.m.Button(this.createId('idCancel'),{                                                                                                                                                                                                              
//						id: "idCancel",                                                                                                                                                                                                                                        
						text: "Cancelar",                                                                                                                                                                                                                                        
						icon: "sap-icon://sys-cancel",                                                                                                                                                                                                                           
						type: "Reject",                                                                                                                                                                                                                                          
						press: function (oEvent) {                                                                                                                                                                                                                               
							that.onPress(oEvent);                                                                                                                                                                                                                                   
						}                                                                                                                                                                                                                                                        
					})                                                                                                                                                                                                                                                        
				]                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
			oDialog.open();                                                                                                                                                                                                                                             
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onPress: function (oEvent) {                                                                                                                                                                                                                                 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                       
			switch (oEvent.getSource().getId()) {                                                                                                                                                                                                                       
			case this.createId('idCancel'):                                                                                                                                                                                                                             
				var oFilters = sap.ui.getCore().byId(this.createId("idFilters"));                                                                                                                                                                                          
				oFilters.destroy();                                                                                                                                                                                                                                        
				//				sap.ui.getCore().byId("idFilters").destroy();                                                                                                                                                                                                        
				break;                                                                                                                                                                                                                                                     
			case this.createId('idConfirm'):                                                                                                                                                                                                                            
				this.onApplyFilters(oEvent);                                                                                                                                                                                                                               
				break;                                                                                                                                                                                                                                                     
			default:                                                                                                                                                                                                                                                    
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		onApplyFilters: function (oEvent) {                                                                                                                                                                                                                          
			var that = this;                                                                                                                                                                                                                                            
			var oFilters = [];                                                                                                                                                                                                                                          
			for (var x = 0; x < sap.ui.getCore().byId(this.createId('idCentro')).getTokens().length; x++) {                                                                                                                                                             
				var token = sap.ui.getCore().byId(this.createId('idCentro')).getTokens()[x];                                                                                                                                                                               
				oFilters.push(new sap.ui.model.Filter("Werks", "EQ", token.getKey()));                                                                                                                                                                                     
			}                                                                                                                                                                                                                                                           
			for (x = 0; x < sap.ui.getCore().byId(this.createId('idAcnum')).getTokens().length; x++) {                                                                                                                                                                  
				token = sap.ui.getCore().byId(this.createId('idAcnum')).getTokens()[x];                                                                                                                                                                                    
				oFilters.push(new sap.ui.model.Filter("Acnum", "EQ", token.getKey()));                                                                                                                                                                                     
			}                                                                                                                                                                                                                                                           
			for (x = 0; x < sap.ui.getCore().byId(this.createId('idAjahr')).getTokens().length; x++) {                                                                                                                                                                  
				token = sap.ui.getCore().byId(this.createId('idAjahr')).getTokens()[x];                                                                                                                                                                                    
				oFilters.push(new sap.ui.model.Filter("Ajahr", "EQ", token.getKey()));                                                                                                                                                                                     
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			this.oModel.read("/HeaderAreaCultivoSet", {                                                                                                                                                                                                                 
				// serviceUrlParams: {                                                                                                                                                                                                                                     
				// 	"$expand": "HEADTOITEMSAREACULTIVO"                                                                                                                                                                                                                    
				// },                                                                                                                                                                                                                                                      
				filters: oFilters,                                                                                                                                                                                                                                         
				success: function (oData) {                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
					// JSON MODEL                                                                                                                                                                                                                                             
					// CLOSE POPUP                                                                                                                                                                                                                                            
					sap.ui.getCore().byId(that.createId("idFilters")).destroy();                                                                                                                                                                                              
					var json = new JSONModel();                                                                                                                                                                                                                               
					json.setSizeLimit(oData.results.length);                                                                                                                                                                                                                  
					json.setData(oData);                                                                                                                                                                                                                                      
					that.oView.setModel(json, "masterModel");                                                                                                                                                                                                                 
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
					&nbsp;                                                                                                                                                                                                                                                    
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		onValueHelpRequest: function (oEvent, p) {                                                                                                                                                                                                                   
			&nbsp;                                                                                                                                                                                                                                                      
			var that = this;                                                                                                                                                                                                                                            
			this.vId = oEvent.getSource().sId;                                                                                                                                                                                                                          
			var vTitle,                                                                                                                                                                                                                                                 
				vPath,                                                                                                                                                                                                                                                     
				vNoData,                                                                                                                                                                                                                                                   
				vEntity,                                                                                                                                                                                                                                                   
				oFilters = [],                                                                                                                                                                                                                                             
				oObjects = [],                                                                                                                                                                                                                                             
				oCentro = sap.ui.getCore().byId(this.createId("idCentro")),                                                                                                                                                                                                
				oArea = sap.ui.getCore().byId(this.createId('idAcnum')),                                                                                                                                                                                                   
				oTalhao = sap.ui.getCore().byId(this.createId("idAjahr"));                                                                                                                                                                                                 
			var oId = this.vId.split("-")[2];                                                                                                                                                                                                                           
			switch (oId) {                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
			case "idCentro":                                                                                                                                                                                                                                            
				vTitle = "Centro";                                                                                                                                                                                                                                         
				vEntity = "/GetCentroSet";                                                                                                                                                                                                                                 
				vPath = "modelValueHelp>/results";                                                                                                                                                                                                                         
				vNoData = "Sem centros";                                                                                                                                                                                                                                   
				oObjects = oCentro.getTokens();                                                                                                                                                                                                                            
				break;                                                                                                                                                                                                                                                     
			case "idAcnum":                                                                                                                                                                                                                                             
				vTitle = this.getText("titleMaster");                                                                                                                                                                                                                      
				vEntity = "/GetAreaCultivoSet";                                                                                                                                                                                                                            
				vPath = "modelValueHelp>/results";                                                                                                                                                                                                                         
				vNoData = this.getText("semAreadeCultivo");                                                                                                                                                                                                                
				oObjects = oArea.getTokens();                                                                                                                                                                                                                              
				// filtrar area de cultivo de acordo com a sele??o de centros                                                                                                                                                                                              
				for (var a = 0; a < oCentro.getTokens().length; a++) {                                                                                                                                                                                                     
					oFilters.push((new sap.ui.model.Filter("Werks", "EQ", oCentro.getTokens()[a].getKey())));                                                                                                                                                                 
				}                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
				break;                                                                                                                                                                                                                                                     
			case "idAjahr":                                                                                                                                                                                                                                             
				vTitle = "Safra";                                                                                                                                                                                                                                          
				vEntity = "/GetSafraSet";                                                                                                                                                                                                                                  
				vPath = "modelValueHelp>/results";                                                                                                                                                                                                                         
				vNoData = "Sem safra";                                                                                                                                                                                                                                     
				oObjects = oTalhao.getTokens();                                                                                                                                                                                                                            
				// filtrar talh?es de acordo com a sele??o de ?reas de cultivos                                                                                                                                                                                            
				for (var b = 0; b < oArea.getTokens().length; b++) {                                                                                                                                                                                                       
					oFilters.push((new sap.ui.model.Filter("Acnum", "EQ", oArea.getTokens()[b].getKey())));                                                                                                                                                                   
				}                                                                                                                                                                                                                                                          
				break;                                                                                                                                                                                                                                                     
			default:                                                                                                                                                                                                                                                    
				break;                                                                                                                                                                                                                                                     
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			this.oModel.read(vEntity, {                                                                                                                                                                                                                                 
				filters: oFilters,                                                                                                                                                                                                                                         
				success: function (oData) {                                                                                                                                                                                                                                
					var oTab = new sap.m.TableSelectDialog({                                                                                                                                                                                                                  
						busyIndicatorDelay: 0, // int			&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                 
						title: vTitle, // string                                                                                                                                                                                                                                 
						noDataText: vNoData,                                                                                                                                                                                                                                     
						growing: false,                                                                                                                                                                                                                                          
						rememberSelections: true,                                                                                                                                                                                                                                
						multiSelect: true, // boolean                                                                                                                                                                                                                            
						contentWidth: "450px", // sap.ui.core.CSSSize, since 1.18                                                                                                                                                                                                
						contentHeight: "400px", // sap.ui.core.CSSSize, since 1.18                                                                                                                                                                                               
						columns: [                                                                                                                                                                                                                                               
							new sap.m.Column({                                                                                                                                                                                                                                      
								header: new sap.m.Label({                                                                                                                                                                                                                              
									text: "ID"                                                                                                                                                                                                                                            
								})                                                                                                                                                                                                                                                     
							}),                                                                                                                                                                                                                                                     
							new sap.m.Column({                                                                                                                                                                                                                                      
								header: new sap.m.Label({                                                                                                                                                                                                                              
									text: "Descri??o"                                                                                                                                                                                                                                     
								})                                                                                                                                                                                                                                                     
							})                                                                                                                                                                                                                                                      
						],                                                                                                                                                                                                                                                       
						confirm: [function (oEvt) {                                                                                                                                                                                                                              
							for (var x = 0; x < oEvt.getParameter("selectedItems").length; x++) {                                                                                                                                                                                   
								var key = oEvt.getParameter("selectedItems")[x].getBindingContext("modelValueHelp").getProperty("Key");                                                                                                                                                
								var descr = oEvt.getParameter("selectedItems")[x].getBindingContext("modelValueHelp").getProperty("Descr");                                                                                                                                            
								sap.ui.getCore().byId(that.vId).addToken(new sap.m.Token({                                                                                                                                                                                             
									key: key,                                                                                                                                                                                                                                             
									text: descr + "(" + key + ")"                                                                                                                                                                                                                         
								}));                                                                                                                                                                                                                                                   
							}                                                                                                                                                                                                                                                       
							//                                                                                                                                                                                                                                                      
						}, this],                                                                                                                                                                                                                                                
						search: [function (e) {                                                                                                                                                                                                                                  
							&nbsp;                                                                                                                                                                                                                                                  
						}, this],                                                                                                                                                                                                                                                
						liveChange: [function (oEvt) {                                                                                                                                                                                                                           
							&nbsp;                                                                                                                                                                                                                                                  
						}, this],                                                                                                                                                                                                                                                
						cancel: [function (g) {                                                                                                                                                                                                                                  
							//	    this.close();                                                                                                                                                                                                                                    
						}, this]                                                                                                                                                                                                                                                 
					});                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
					//DEFINE TEMPLATE                                                                                                                                                                                                                                         
					var oTemp = new sap.m.ColumnListItem({                                                                                                                                                                                                                    
						cells: [                                                                                                                                                                                                                                                 
							new sap.m.Text({                                                                                                                                                                                                                                        
								text: "{modelValueHelp>Key}"                                                                                                                                                                                                                           
							}),                                                                                                                                                                                                                                                     
							new sap.m.Text({                                                                                                                                                                                                                                        
								text: "{modelValueHelp>Descr}"                                                                                                                                                                                                                         
							})                                                                                                                                                                                                                                                      
						]                                                                                                                                                                                                                                                        
					});                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
					// JSON MODEL                                                                                                                                                                                                                                             
					var json = new sap.ui.model.json.JSONModel();                                                                                                                                                                                                             
					json.setSizeLimit(oData.results.length);                                                                                                                                                                                                                  
					json.setData(oData);                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
					// SET TAB MODEL&nbsp;                                                                                                                                                                                                                                    
					oTab.setModel(json, "modelValueHelp");                                                                                                                                                                                                                    
					oTab.bindAggregation("items", {                                                                                                                                                                                                                           
						path: vPath,                                                                                                                                                                                                                                             
						template: oTemp                                                                                                                                                                                                                                          
					});                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
					// REMEMBER SELECTIONS                                                                                                                                                                                                                                    
					// 	for(var x=0; x<sap.ui.getCore().byId("idCentro").getTokens().length; x++) {                                                                                                                                                                           
					// 	    for(var y=0; y<oTab.getModel("modelValueHelp").getData().results.length; y++) {                                                                                                                                                                   
					// 	        if(sap.ui.getCore().byId("idCentro").getTokens()[x].getKey() === oTab.getModel("modelValueHelp").getData().results[y].Werks) {                                                                                                                
					// 	            oTab.getModel("modelValueHelp").getData().results[y].setSelected(true);                                                                                                                                                                   
					// 	        }                                                                                                                                                                                                                                             
					// 	    }                                                                                                                                                                                                                                                 
					// 	}                                                                                                                                                                                                                                                     
					sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                         
					// OPEN DIALOG                                                                                                                                                                                                                                            
					oTab.open();                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		onChange: function (oEvent) {                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		onClose: function (oEvent) {                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
		}                                                                                                                                                                                                                                                            
	});                                                                                                                                                                                                                                                           
});                                                                                                                                                                                                                                                            