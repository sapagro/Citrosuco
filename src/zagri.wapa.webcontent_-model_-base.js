sap.ui.define(["sap/ui/model/resource/ResourceModel", "com/vistex/zagriplan/Component"], function(ResourceModel, Component) {                                                                                                                                  
    "use strict";                                                                                                                                                                                                                                              
    return {                                                                                                                                                                                                                                                   
		oMessagePopover :null, // important                                                                                                                                                                                                                          
		disDialog : null,                                                                                                                                                                                                                                            
		filterUrl:"",                                                                                                                                                                                                                                                
		token : "",                                                                                                                                                                                                                                                  
        /* -------------------------- URL CALLS ------------------------------*/                                                                                                                                                                               
        /**&nbsp;                                                                                                                                                                                                                                              
         * Builds the URL to call the App Data Model's Web Service containing App's Header and Table data.                                                                                                                                                     
         * @public                                                                                                                                                                                                                                             
         * @param {string} sServiceUrl - App Data Model's URL.&nbsp;                                                                                                                                                                                           
         * @returns {string} URL of the Web Service.                                                                                                                                                                                                           
         */                                                                                                                                                                                                                                                    
        getModelUrl: function(sServiceUrl) {                                                                                                                                                                                                                   
            if (!sServiceUrl) {                                                                                                                                                                                                                                
                sServiceUrl = "";                                                                                                                                                                                                                              
            }                                                                                                                                                                                                                                                  
            var datasource = Component.getMetadata().getManifestEntry("sap.app").dataSources["mainModel"].uri;                                                                                                                                                 
            var url = datasource + sServiceUrl;                                                                                                                                                                                                                
            if (window.location.hostname == "localhost") {                                                                                                                                                                                                     
                url = "proxy" + url;                                                                                                                                                                                                                           
            }                                                                                                                                                                                                                                                  
            return url;                                                                                                                                                                                                                                        
        },                                                                                                                                                                                                                                                     
        /**&nbsp;                                                                                                                                                                                                                                              
         * Builds the URL to call the Configuration Data Model's Web Service containing Field Labels.                                                                                                                                                          
         * @public                                                                                                                                                                                                                                             
         * @param {string} sServiceUrl - Configuration Data Model's URL.&nbsp;                                                                                                                                                                                 
         * @returns {string} URL of the Web Service.                                                                                                                                                                                                           
         */                                                                                                                                                                                                                                                    
        getConfigUrl: function(sServiceUrl) {                                                                                                                                                                                                                  
            if (!sServiceUrl) {                                                                                                                                                                                                                                
                sServiceUrl = "";                                                                                                                                                                                                                              
            }                                                                                                                                                                                                                                                  
            var datasource = Component.getMetadata().getManifestEntry("sap.app").dataSources["configModel"].uri;                                                                                                                                               
            var url = datasource + sServiceUrl;                                                                                                                                                                                                                
            if (window.location.hostname == "localhost") {                                                                                                                                                                                                     
                url = "proxy" + url;                                                                                                                                                                                                                           
            }                                                                                                                                                                                                                                                  
            return url;                                                                                                                                                                                                                                        
        },                                                                                                                                                                                                                                                     
		  /**&nbsp;                                                                                                                                                                                                                                                  
		     * Checking object or array .                                                                                                                                                                                                                            
		     * @param {Object} obj - Object or Array.                                                                                                                                                                                                                
		     * @returns {String} - boolean value.                                                                                                                                                                                                                    
		     */                                                                                                                                                                                                                                                      
		    isEmptyObject: function(obj) {                                                                                                                                                                                                                           
		        if (Object.prototype.toString.call(obj) === '[object Array]') {                                                                                                                                                                                      
		            return false;                                                                                                                                                                                                                                    
		        } else {                                                                                                                                                                                                                                             
		            return true;                                                                                                                                                                                                                                     
		        }                                                                                                                                                                                                                                                    
		    },&nbsp;                                                                                                                                                                                                                                                 
        /**&nbsp;                                                                                                                                                                                                                                              
         * Builds the Web Service URL from GIS URL.                                                                                                                                                                                                            
         * @public                                                                                                                                                                                                                                             
         * @param {string} url - URL from GIS.&nbsp;                                                                                                                                                                                                           
         * @param {string} para - Parameters from URL.&nbsp;                                                                                                                                                                                                   
         * @returns {string} Returns Crop from GIS URL.                                                                                                                                                                                                        
         */                                                                                                                                                                                                                                                    
        getQueryParameter: function(url, para) {                                                                                                                                                                                                               
            var patt = new RegExp(para + "=[a-zA-Z0-9\-]+");                                                                                                                                                                                                   
            var res = patt.exec(url);                                                                                                                                                                                                                          
            if (res) {                                                                                                                                                                                                                                         
                return res[0].split("=")[1];                                                                                                                                                                                                                   
            }                                                                                                                                                                                                                                                  
            return "";                                                                                                                                                                                                                                         
        },                                                                                                                                                                                                                                                     
        /*-------------------------- LOCK FLAG --------------------------------*/                                                                                                                                                                              
        isLock: false,                                                                                                                                                                                                                                         
        /**&nbsp;                                                                                                                                                                                                                                              
         * Returns the Event Bus Object from Core.                                                                                                                                                                                                             
         * @public                                                                                                                                                                                                                                             
         * @returns {sap.ui.core.EventBus} EventBus object set in Core.                                                                                                                                                                                        
         */                                                                                                                                                                                                                                                    
        getEventBus: function() {                                                                                                                                                                                                                              
            return sap.ui.getCore().getEventBus();                                                                                                                                                                                                             
        },                                                                                                                                                                                                                                                     
        /*---------------------- SET MASTER PATH -----------------------------*/                                                                                                                                                                               
        masterListPath: "",                                                                                                                                                                                                                                    
        /**&nbsp;                                                                                                                                                                                                                                              
         * Set's sPath as the Master List's Path.                                                                                                                                                                                                              
         * @public                                                                                                                                                                                                                                             
         * @param {string} sPath - Path of the currently selected item in Master list.&nbsp;                                                                                                                                                                   
         */                                                                                                                                                                                                                                                    
        setMasterListPath: function(sPath) {                                                                                                                                                                                                                   
            this.masterListPath = sPath;                                                                                                                                                                                                                       
        },                                                                                                                                                                                                                                                     
        /**&nbsp;                                                                                                                                                                                                                                              
         * Returns the Master List's Path.                                                                                                                                                                                                                     
         * @public                                                                                                                                                                                                                                             
         * @returns {string} Path of the currently selected item in Master list.                                                                                                                                                                               
         */                                                                                                                                                                                                                                                    
        getMasterListPath: function() {                                                                                                                                                                                                                        
            return this.masterListPath;                                                                                                                                                                                                                        
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        /*------------- Set/Get UPDKZ create/update indicator -----------------*/                                                                                                                                                                              
        updkz: "U",                                                                                                                                                                                                                                            
        /**&nbsp;                                                                                                                                                                                                                                              
         * Set's the Update Indicator as U - for Changed Record , I - for New Record or D - for Deleted Record.                                                                                                                                                
         * @public                                                                                                                                                                                                                                             
         * @param {string} value - Current value of the Update Indicator.&nbsp;                                                                                                                                                                                
         */                                                                                                                                                                                                                                                    
        setUpdateIndicator: function(value) {                                                                                                                                                                                                                  
            this.updkz = value;                                                                                                                                                                                                                                
        },                                                                                                                                                                                                                                                     
        /**&nbsp;                                                                                                                                                                                                                                              
         * Returns the current Value of the Update Indicator.                                                                                                                                                                                                  
         * @public                                                                                                                                                                                                                                             
         * @returns {string} Current value of the Update Indicator.&nbsp;                                                                                                                                                                                      
         */                                                                                                                                                                                                                                                    
        getUpdateIndicator: function() {                                                                                                                                                                                                                       
            return this.updkz;                                                                                                                                                                                                                                 
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        /*------------------------ EDIT MODE SETTER ---------------------------*/                                                                                                                                                                              
        isEditMode: true,                                                                                                                                                                                                                                      
        /**&nbsp;                                                                                                                                                                                                                                              
         * Set's the this.isEditMode variable as True or False.                                                                                                                                                                                                
         * @public                                                                                                                                                                                                                                             
         * @param {boolean} bol - Sets the current boolean value of Edit Mode.&nbsp;                                                                                                                                                                           
         */                                                                                                                                                                                                                                                    
        setEditMode: function(bol) {                                                                                                                                                                                                                           
            this.isEditMode = bol;                                                                                                                                                                                                                             
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        /*---------------------- CURRENT TAB CLICKED --------------------------*/                                                                                                                                                                              
        currentTabKey: "",                                                                                                                                                                                                                                     
        /**&nbsp;                                                                                                                                                                                                                                              
         * Store's the currently selected Tab's Key.                                                                                                                                                                                                           
         * @public                                                                                                                                                                                                                                             
         * @param {string} tabkey - Currently selected Tab's Key.&nbsp;                                                                                                                                                                                        
         */                                                                                                                                                                                                                                                    
        setCurrentTabKey: function(tabkey) {                                                                                                                                                                                                                   
            this.currentTabKey = tabkey;                                                                                                                                                                                                                       
        },                                                                                                                                                                                                                                                     
        /**&nbsp;                                                                                                                                                                                                                                              
         * Returns the currently selected Tab's Key.                                                                                                                                                                                                           
         * @public                                                                                                                                                                                                                                             
         * @returns {string} Currently selected Tab's Key.&nbsp;                                                                                                                                                                                               
         */                                                                                                                                                                                                                                                    
        getCurrentTabKey: function() {                                                                                                                                                                                                                         
            return this.currentTabKey;                                                                                                                                                                                                                         
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        /*---------------------- PREVIOUS TAB CLICKED --------------------------*/                                                                                                                                                                             
        previousTabKey: "",                                                                                                                                                                                                                                    
        /**&nbsp;                                                                                                                                                                                                                                              
         * Store's the previously selected Tab's Key.                                                                                                                                                                                                          
         * @public                                                                                                                                                                                                                                             
         * @param {string} tabkey - Previously selected Tab's Key.&nbsp;                                                                                                                                                                                       
         */                                                                                                                                                                                                                                                    
        setPreviousTabKey: function(tabkey) {                                                                                                                                                                                                                  
            this.previousTabKey = tabkey;                                                                                                                                                                                                                      
        },                                                                                                                                                                                                                                                     
        /**&nbsp;                                                                                                                                                                                                                                              
         * Returns the previously selected Tab's Key.                                                                                                                                                                                                          
         * @public                                                                                                                                                                                                                                             
         * @returns {string} Previously selected Tab's Key.&nbsp;                                                                                                                                                                                              
         */                                                                                                                                                                                                                                                    
        getPreviousTabKey: function() {                                                                                                                                                                                                                        
            return this.previousTabKey;                                                                                                                                                                                                                        
        },                                                                                                                                                                                                                                                     
        /** Handle error response from backend&nbsp;                                                                                                                                                                                                           
         * @param {object} oError - response error object                                                                                                                                                                                                      
         * */                                                                                                                                                                                                                                                  
        handleError : function(oError){                                                                                                                                                                                                                        
            sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                  
            var oBody = JSON.parse(oError.response.body);                                                                                                                                                                                                      
            var sMessage = oBody.error.message.value;                                                                                                                                                                                                          
            var sStatusCode = oError.response.statusCode;                                                                                                                                                                                                      
            var sStatusText = oError.response.statusText;                                                                                                                                                                                                      
            sap.m.MessageBox.show(sMessage, {                                                                                                                                                                                                                  
                title: "Error"+" "+sStatusCode+":"+sStatusText,                                                                                                                                                                                                
                icon: sap.m.MessageBox.Icon.ERROR                                                                                                                                                                                                              
            });                                                                                                                                                                                                                                                
            this.setLogMsg("Error","Error",oError.response.statusCode+":"+oError.response.statusText);                                                                                                                                                         
        },                                                                                                                                                                                                                                                     
        /*------------------------ SHOW HEADER MSG DIALOG -------------------------*/                                                                                                                                                                          
        msgDia : null,                                                                                                                                                                                                                                         
        /** show all the header messages in dialog                                                                                                                                                                                                             
         * @param {object} oHeader - response header object                                                                                                                                                                                                    
         * @param {boolean} bMsgLog - add msg in msglog ( default true )                                                                                                                                                                                       
         * @param {function} callback - callback for ok button press                                                                                                                                                                                           
         * */                                                                                                                                                                                                                                                  
        showHeaderMsg: function(oHeader, bMsgLog, callback) {                                                                                                                                                                                                  
            var thiz = this;                                                                                                                                                                                                                                   
            if (oHeader.hasOwnProperty('sap-message')) {                                                                                                                                                                                                       
                var oMsg = JSON.parse(oHeader['sap-message']);                                                                                                                                                                                                 
                var msg = oMsg.message;                                                                                                                                                                                                                        
                var type = oMsg.severity;                                                                                                                                                                                                                      
                if (!thiz.msgDia) {                                                                                                                                                                                                                            
                    thiz.msgDia = new sap.m.Dialog("msgDId", {                                                                                                                                                                                                 
                        title: "Message",                                                                                                                                                                                                                      
                        contentWidth: "28em",                                                                                                                                                                                                                  
                        resizable: true,                                                                                                                                                                                                                       
                        draggable: true                                                                                                                                                                                                                        
                    });                                                                                                                                                                                                                                        
                 /*   var btn = new sap.m.Button({                                                                                                                                                                                                             
                        text: "Exit",                                                                                                                                                                                                                          
                        press: function() {                                                                                                                                                                                                                    
                            thiz.msgDia.close();                                                                                                                                                                                                               
                        }                                                                                                                                                                                                                                      
                    });*/                                                                                                                                                                                                                                      
                    var btn1 = new sap.m.Button({                                                                                                                                                                                                              
                        text: "Ok",                                                                                                                                                                                                                            
                        press: function() {                                                                                                                                                                                                                    
                            thiz.msgDia.close();                                                                                                                                                                                                               
                            if (callback) {                                                                                                                                                                                                                    
                                callback();                                                                                                                                                                                                                    
                            }                                                                                                                                                                                                                                  
                        }                                                                                                                                                                                                                                      
                    });                                                                                                                                                                                                                                        
                    thiz.msgDia.addButton(btn1);                                                                                                                                                                                                               
                   // thiz.msgDia.addButton(btn);                                                                                                                                                                                                              
                }                                                                                                                                                                                                                                              
                thiz.msgDia.destroyContent();                                                                                                                                                                                                                  
                var getMessageStrip = function(msg, type) {                                                                                                                                                                                                    
                    if (type === "info") {                                                                                                                                                                                                                     
                        type = "Information";                                                                                                                                                                                                                  
                    } else if (type === "error") {                                                                                                                                                                                                             
                        type = "Error";                                                                                                                                                                                                                        
                    } else if (type === "success") {                                                                                                                                                                                                           
                        type = "Success";                                                                                                                                                                                                                      
                    } else if (type === "warning") {                                                                                                                                                                                                           
                        type = "Warning";                                                                                                                                                                                                                      
                    } else {                                                                                                                                                                                                                                   
                        type = "Information";                                                                                                                                                                                                                  
                    }                                                                                                                                                                                                                                          
                    var oMS = new sap.m.MessageStrip({                                                                                                                                                                                                         
                        text: msg,                                                                                                                                                                                                                             
                        type: type,                                                                                                                                                                                                                            
                        showIcon: true,                                                                                                                                                                                                                        
                        showCloseButton: false                                                                                                                                                                                                                 
                    });                                                                                                                                                                                                                                        
                    if (bMsgLog !== false) {                                                                                                                                                                                                                   
                        thiz.setLogMsg(type, type, msg);                                                                                                                                                                                                       
                    }                                                                                                                                                                                                                                          
                    oMS.addStyleClass("sapUiSmallMargin");                                                                                                                                                                                                     
                    return oMS;                                                                                                                                                                                                                                
                };                                                                                                                                                                                                                                             
                if (msg !== "" && type !== "") {                                                                                                                                                                                                               
                    thiz.msgDia.addContent(getMessageStrip(msg, type));                                                                                                                                                                                        
                }                                                                                                                                                                                                                                              
                if (oMsg.details.length > 0) {                                                                                                                                                                                                                 
                    oMsg.details.forEach(function(item) {                                                                                                                                                                                                      
                        if (item.message !== "" && item.severity !== "") {                                                                                                                                                                                     
                            thiz.msgDia.addContent(getMessageStrip(item.message, item.severity));                                                                                                                                                              
                        }                                                                                                                                                                                                                                      
                    });                                                                                                                                                                                                                                        
                }                                                                                                                                                                                                                                              
                thiz.msgDia.open();                                                                                                                                                                                                                            
            }                                                                                                                                                                                                                                                  
        },                                                                                                                                                                                                                                                     
        /*---------------------- END OF SHOW HEADER MSG DIALOG -------------------------*/                                                                                                                                                                     
        /**&nbsp;                                                                                                                                                                                                                                              
         * Adds messages to the Message Log's Model.                                                                                                                                                                                                           
         * @public                                                                                                                                                                                                                                             
         * @param {string} type - Type of Message (Information / Error / Warning / Success).&nbsp;                                                                                                                                                             
         * @param {string} title - Message's title.                                                                                                                                                                                                            
         * @param {string} desc - Message's description.&nbsp;                                                                                                                                                                                                 
         */                                                                                                                                                                                                                                                    
        setLogMsg: function(type, title, desc) {                                                                                                                                                                                                               
            // type = Information  /   Error   /   Warning  /   Success                                                                                                                                                                                        
            var arr = sap.ui.getCore().getModel("msglog").getData();                                                                                                                                                                                           
            arr.push({                                                                                                                                                                                                                                         
                type: type,                                                                                                                                                                                                                                    
                title: title,                                                                                                                                                                                                                                  
                description: desc                                                                                                                                                                                                                              
            });                                                                                                                                                                                                                                                
            sap.ui.getCore().getModel("msglog").refresh();                                                                                                                                                                                                     
            sap.ui.getCore().getModel("loglength").setProperty("/messagesLength", arr.length);                                                                                                                                                                 
            sap.ui.getCore().getModel("loglength").refresh();                                                                                                                                                                                                  
        },                                                                                                                                                                                                                                                     
        /*----------------------- Keep Original model ------------------------*/                                                                                                                                                                               
        sno: 0, // unique number for all table records                                                                                                                                                                                                         
        /**&nbsp;                                                                                                                                                                                                                                              
         * Store's selected Crop's data before any modifications                                                                                                                                                                                               
         * @public                                                                                                                                                                                                                                             
         * @param {array} arr - Array containing all Crop's data.                                                                                                                                                                                              
         * @returns {array} Rebuilt array with JSON objects to call it by it's Value instead of Reference.                                                                                                                                                     
         */                                                                                                                                                                                                                                                    
        keepOriginal: function(arr) {                                                                                                                                                                                                                          
            for (var i = 0; i < arr.length; i++) {                                                                                                                                                                                                             
                arr[i].sno = this.sno++;                                                                                                                                                                                                                       
            }                                                                                                                                                                                                                                                  
            return JSON.parse(JSON.stringify(arr));                                                                                                                                                                                                            
        },                                                                                                                                                                                                                                                     
        /*----------------------- Modify Config Data -------------------------*/                                                                                                                                                                               
        /**&nbsp;                                                                                                                                                                                                                                              
         * Batch call for modified Configuration data Models.                                                                                                                                                                                                  
         * @public                                                                                                                                                                                                                                             
         * @param {array} arr1 - Array containing all Configuration data Models.&nbsp;                                                                                                                                                                         
         * @returns {array} Object containing modified Configuration data.                                                                                                                                                                                     
         */                                                                                                                                                                                                                                                    
        getModifiedConfigDataBatch: function(arr1) {                                                                                                                                                                                                           
            var arr = arr1.d.results,                                                                                                                                                                                                                          
                len = arr.length,                                                                                                                                                                                                                              
                data = {};                                                                                                                                                                                                                                     
            for (var i = 0; i < len; i++) {                                                                                                                                                                                                                    
                data[arr[i].Fieldname] = {                                                                                                                                                                                                                     
                    ScrtextM: arr[i].ScrtextM,                                                                                                                                                                                                                 
                    ScrtextL: arr[i].ScrtextL,                                                                                                                                                                                                                 
                    ScrtextS: arr[i].ScrtextS,                                                                                                                                                                                                                 
                    Intlen: parseInt(arr[i].Intlen)                                                                                                                                                                                                            
                }                                                                                                                                                                                                                                              
            }                                                                                                                                                                                                                                                  
            return data;                                                                                                                                                                                                                                       
        },                                                                                                                                                                                                                                                     
        /* Set auto Column Width                                                                                                                                                                                                                               
        * @param {object} - table object                                                                                                                                                                                                                       
        * */                                                                                                                                                                                                                                                   
        setColumnSize : function(oTable){                                                                                                                                                                                                                      
                setTimeout(function(){                                                                                                                                                                                                                         
               var oColumns = oTable.getColumns();                                                                                                                                                                                                             
               for (var i=oColumns.length-1;i>=0;i--){                                                                                                                                                                                                         
                    oTable.autoResizeColumn(i);                                                                                                                                                                                                                
                }                                                                                                                                                                                                                                              
                },3);                                                                                                                                                                                                                                          
        },                                                                                                                                                                                                                                                     
        /** convert capital word to camel case ex: TPLNR_FL -> tplnrFl                                                                                                                                                                                         
         * @param {string} str - accept string in Upper case                                                                                                                                                                                                   
         * @return {string} - return camel case                                                                                                                                                                                                                
         * */                                                                                                                                                                                                                                                  
        capsToCamelCase : function(str){                                                                                                                                                                                                                       
            if (!str){ return "" };                                                                                                                                                                                                                            
            str = str.toUpperCase().split("_"); var str1 = "";                                                                                                                                                                                                 
            if (str.length > 1){                                                                                                                                                                                                                               
                for (var i=0;i<str.length;i++){ str1 = str1 + this.getCamelCase(str[i]); } str = str1;                                                                                                                                                         
            } else {&nbsp;&nbsp;                                                                                                                                                                                                                               
                str = this.getCamelCase(str[0]);&nbsp;                                                                                                                                                                                                         
            }                                                                                                                                                                                                                                                  
            return str;&nbsp;                                                                                                                                                                                                                                  
        },                                                                                                                                                                                                                                                     
        /** convert camel case to capital letter ex: tplnrFl -> TPLNR_FL                                                                                                                                                                                       
         * @param {string} str - accept string in camelcase                                                                                                                                                                                                    
         * @return {string} - return upper case with underscore                                                                                                                                                                                                
         * */                                                                                                                                                                                                                                                  
        camelCaseToCaps: function(str){                                                                                                                                                                                                                        
            if (!str){ return "" };                                                                                                                                                                                                                            
            var sTemp = "";                                                                                                                                                                                                                                    
            for (var i=0;i<str.length;i++){                                                                                                                                                                                                                    
                if (str.charAt(i) === str.charAt(i).toUpperCase()){                                                                                                                                                                                            
                    sTemp = sTemp +"_"+ str.charAt(i);                                                                                                                                                                                                         
                } else {                                                                                                                                                                                                                                       
                    sTemp = sTemp + str.charAt(i).toUpperCase();                                                                                                                                                                                               
                }                                                                                                                                                                                                                                              
            }                                                                                                                                                                                                                                                  
            return sTemp;                                                                                                                                                                                                                                      
        },                                                                                                                                                                                                                                                     
        /**&nbsp;                                                                                                                                                                                                                                              
         * Individual call for modified Configuration data's Model.                                                                                                                                                                                            
         * @public                                                                                                                                                                                                                                             
         * @param {object} oModel - Configuration data's Model.&nbsp;                                                                                                                                                                                          
         * @returns {array} Object containing modified Configuration data.                                                                                                                                                                                     
         */                                                                                                                                                                                                                                                    
        getModifiedConfigData: function(oModel) {                                                                                                                                                                                                              
            var len = oModel.getProperty("/d/results/").length;                                                                                                                                                                                                
            var data = {};                                                                                                                                                                                                                                     
            for (var i = 0; i < len; i++) {                                                                                                                                                                                                                    
                data[oModel.getProperty("/d/results/" + i + "/Fieldname")] = {                                                                                                                                                                                 
                    ScrtextM: oModel.getProperty("/d/results/" + i + "/ScrtextM"),                                                                                                                                                                             
                    ScrtextL: oModel.getProperty("/d/results/" + i + "/ScrtextL")                                                                                                                                                                              
                }                                                                                                                                                                                                                                              
            }                                                                                                                                                                                                                                                  
            return data;                                                                                                                                                                                                                                       
        },                                                                                                                                                                                                                                                     
        /**&nbsp;                                                                                                                                                                                                                                              
         * Removes duplicate elements from an Array.                                                                                                                                                                                                           
         * @public                                                                                                                                                                                                                                             
         * @param {string} uniqpro - Key property of the Objects in the Array's elements.&nbsp;                                                                                                                                                                
         * @param {array} arr - Configuration data's Model.&nbsp;                                                                                                                                                                                              
         * @returns {array} Array without any duplicate elements.                                                                                                                                                                                              
         */                                                                                                                                                                                                                                                    
        removeDuplicatesFromArray: function(uniqpro, arr) {                                                                                                                                                                                                    
            var tobj = {},                                                                                                                                                                                                                                     
                newarr = [],                                                                                                                                                                                                                                   
                len = arr.length;                                                                                                                                                                                                                              
            for (var i = 0; i < len; i++) {                                                                                                                                                                                                                    
                if (!tobj.hasOwnProperty(arr[i][uniqpro])) {                                                                                                                                                                                                   
                    tobj[arr[i][uniqpro]] = "";                                                                                                                                                                                                                
                    newarr.push(arr[i]);                                                                                                                                                                                                                       
                }                                                                                                                                                                                                                                              
            }                                                                                                                                                                                                                                                  
            return newarr;                                                                                                                                                                                                                                     
        },                                                                                                                                                                                                                                                     
        removeDuplicateObj: function(arr, prop) {                                                                                                                                                                                                              
            var obj = {},                                                                                                                                                                                                                                      
                temparr = [];                                                                                                                                                                                                                                  
            for (var i = 0; i < arr.length; i++) {                                                                                                                                                                                                             
                if (!obj.hasOwnProperty(arr[i][prop])) {                                                                                                                                                                                                       
                    obj[arr[i][prop]] = arr[i];                                                                                                                                                                                                                
                    temparr.push(arr[i]);                                                                                                                                                                                                                      
                }                                                                                                                                                                                                                                              
            }                                                                                                                                                                                                                                                  
            return temparr;                                                                                                                                                                                                                                    
        },&nbsp;                                                                                                                                                                                                                                               
        /*-------------------- START TABLE MODEL LOADING ---------------------*/                                                                                                                                                                               
        tableCount: 0,                                                                                                                                                                                                                                         
        /**&nbsp;                                                                                                                                                                                                                                              
         * Shows the Busy Indicator while table data is loading.                                                                                                                                                                                               
         * @public                                                                                                                                                                                                                                             
         * @param {number} total - Number of records in the table.&nbsp;                                                                                                                                                                                       
         */                                                                                                                                                                                                                                                    
        startTableLoad: function(total) {                                                                                                                                                                                                                      
            sap.ui.core.BusyIndicator.show(0);                                                                                                                                                                                                                 
            var thiz = this;                                                                                                                                                                                                                                   
            var si = setInterval(function() {                                                                                                                                                                                                                  
                if (thiz.tableCount >= total) {                                                                                                                                                                                                                
                    thiz.tableCount = 0;                                                                                                                                                                                                                       
                    clearInterval(si);                                                                                                                                                                                                                         
                    sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                          
                }                                                                                                                                                                                                                                              
            }, 1000);                                                                                                                                                                                                                                          
        },                                                                                                                                                                                                                                                     
        /*-------------------- START DROPDOWN MODEL LOADING -------------------*/                                                                                                                                                                              
        ddCount: 0, // dropdown count                                                                                                                                                                                                                          
        /**&nbsp;                                                                                                                                                                                                                                              
         * Shows the Busy Indicator while all the Drop down data's Models are loading.                                                                                                                                                                         
         * @public                                                                                                                                                                                                                                             
         * @param {number} total - Number of records in each drop down Model.&nbsp;                                                                                                                                                                            
         */                                                                                                                                                                                                                                                    
        startDropdownLoad: function(total) {                                                                                                                                                                                                                   
            sap.ui.core.BusyIndicator.show(0);                                                                                                                                                                                                                 
            var thiz = this;                                                                                                                                                                                                                                   
            var si = setInterval(function() {                                                                                                                                                                                                                  
                if (thiz.ddCount >= total) {                                                                                                                                                                                                                   
                    thiz.ddCount = 0;                                                                                                                                                                                                                          
                    clearInterval(si);                                                                                                                                                                                                                         
                    sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                          
                }                                                                                                                                                                                                                                              
            }, 1000);                                                                                                                                                                                                                                          
        },                                                                                                                                                                                                                                                     
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                           
        /* --------------- IS SAME MODEL DATA --------------------*/                                                                                                                                                                                           
        /**&nbsp;                                                                                                                                                                                                                                              
         * Shows the Busy Indicator while all the Drop down data's Models are loading.                                                                                                                                                                         
         * @public                                                                                                                                                                                                                                             
         * @param {object} ori - Original Object.&nbsp;                                                                                                                                                                                                        
         * @param {object} mod - Modified Object.                                                                                                                                                                                                              
         * @returns {boolean} Rebuilt JSON object to call it by it's Value instead of Reference.                                                                                                                                                               
         */                                                                                                                                                                                                                                                    
        isSameModelData: function(ori, mod) {                                                                                                                                                                                                                  
            for (var i = 0; i < ori.length; i++) {                                                                                                                                                                                                             
                delete ori[i].Updkz;                                                                                                                                                                                                                           
            }                                                                                                                                                                                                                                                  
            for (var j = 0; j < mod.length; j++) {                                                                                                                                                                                                             
                delete mod[j].Updkz;                                                                                                                                                                                                                           
            }                                                                                                                                                                                                                                                  
            return JSON.stringify(ori) === JSON.stringify(mod);                                                                                                                                                                                                
        },                                                                                                                                                                                                                                                     
        /*-------------------- GET DATE FORMAT FROM I18N -------------------------*/                                                                                                                                                                           
        dateformat: null,                                                                                                                                                                                                                                      
        /**&nbsp;                                                                                                                                                                                                                                              
         * Gets the date display format from the i18n Resource Bundle Model.                                                                                                                                                                                   
         * @public                                                                                                                                                                                                                                             
         * @returns {string} Date format from the Resource Bundle Model.                                                                                                                                                                                       
         */                                                                                                                                                                                                                                                    
        getI18NDateFormat: function() {                                                                                                                                                                                                                        
            if (!this.dateformat) {                                                                                                                                                                                                                            
                var i18nModel = new ResourceModel({                                                                                                                                                                                                            
                    bundleName: "com.vistex.agri.i18n.i18n"                                                                                                                                                                                                    
                });                                                                                                                                                                                                                                            
                var oBundle = i18nModel.getResourceBundle();                                                                                                                                                                                                   
                this.dateformat = oBundle.getText("dateformat");                                                                                                                                                                                               
            }                                                                                                                                                                                                                                                  
            return this.dateformat;                                                                                                                                                                                                                            
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        /* -------------------LOGIC FOR UPDATE NEW AND DELETE -----------------*/                                                                                                                                                                              
        /**&nbsp;                                                                                                                                                                                                                                              
         * Compares the original App data's Array with the modified App data's Array.                                                                                                                                                                          
         * @public                                                                                                                                                                                                                                             
         * @param {array} oarr1 - Array with original App data before modifications.&nbsp;                                                                                                                                                                     
         * @param {array} marr1 - Array with modified App data.                                                                                                                                                                                                
         * @returns {array} Array with relevant update indicator based on comparison.                                                                                                                                                                          
         */                                                                                                                                                                                                                                                    
        compareArrayAndModify: function(oarr1, marr1) {                                                                                                                                                                                                        
            if (oarr1 == undefined) {                                                                                                                                                                                                                          
                oarr1 = [];                                                                                                                                                                                                                                    
            }                                                                                                                                                                                                                                                  
            if (marr1 == undefined) {                                                                                                                                                                                                                          
                marr1 = [];                                                                                                                                                                                                                                    
            }                                                                                                                                                                                                                                                  
            var oarr = JSON.parse(JSON.stringify(oarr1));                                                                                                                                                                                                      
            var marr = JSON.parse(JSON.stringify(marr1));                                                                                                                                                                                                      
            var newarr = [];                                                                                                                                                                                                                                   
            if (oarr.length >= 1) {                                                                                                                                                                                                                            
                for (var j = 0; j < oarr.length; j++) {                                                                                                                                                                                                        
                    var mobject = this.isSnoAvailable(oarr[j].sno, marr);                                                                                                                                                                                      
                    if (mobject) {                                                                                                                                                                                                                             
                        if (this.compareObject(oarr[j], mobject)) {                                                                                                                                                                                            
                            newarr.push(mobject);                                                                                                                                                                                                              
                        } else {                                                                                                                                                                                                                               
                            if (mobject.hasOwnProperty("Updkz")) {                                                                                                                                                                                             
                                mobject.Updkz = "U";                                                                                                                                                                                                           
                            }                                                                                                                                                                                                                                  
                            newarr.push(mobject);                                                                                                                                                                                                              
                            //mobject.Updkz = "U"; newarr.push(mobject);                                                                                                                                                                                       
                        }                                                                                                                                                                                                                                      
                    } else {                                                                                                                                                                                                                                   
                        if (oarr[j].hasOwnProperty("Updkz")) {                                                                                                                                                                                                 
                            oarr[j].Updkz = "D";                                                                                                                                                                                                               
                        }                                                                                                                                                                                                                                      
                        newarr.push(oarr[j]);                                                                                                                                                                                                                  
                        //oarr[i].Updkz = "D"; newarr.push(oarr[i]);                                                                                                                                                                                           
                    }                                                                                                                                                                                                                                          
                }                                                                                                                                                                                                                                              
            }                                                                                                                                                                                                                                                  
            for (var k = 0; k < marr.length; k++) {                                                                                                                                                                                                            
                if (this.isSnoNotAvailable(marr[k].sno, oarr)) {                                                                                                                                                                                               
                    //if(marr[i].hasOwnProperty("Updkz")){  marr[i].Updkz = "I"; }  newarr.push(marr[i]);                                                                                                                                                      
                    marr[k].Updkz = "I";                                                                                                                                                                                                                       
                    newarr.push(marr[k]);                                                                                                                                                                                                                      
                }                                                                                                                                                                                                                                              
            }                                                                                                                                                                                                                                                  
            /* remove sno and convert to string */                                                                                                                                                                                                             
            for (var l = 0; l < newarr.length; l++) {                                                                                                                                                                                                          
                if (newarr[l].hasOwnProperty("sno")) {                                                                                                                                                                                                         
                    delete newarr[l].sno;                                                                                                                                                                                                                      
                } // remove sno                                                                                                                                                                                                                                
                for (var pro in newarr[l]) {                                                                                                                                                                                                                   
                    if (typeof newarr[l][pro] == "number") {                                                                                                                                                                                                   
                        newarr[l][pro] = newarr[l][pro].toString();                                                                                                                                                                                            
                    }                                                                                                                                                                                                                                          
                }                                                                                                                                                                                                                                              
            }                                                                                                                                                                                                                                                  
            return newarr;                                                                                                                                                                                                                                     
        },                                                                                                                                                                                                                                                     
        /**&nbsp;                                                                                                                                                                                                                                              
         * Checks if serial number is not present in Table data's Array.                                                                                                                                                                                       
         * @public                                                                                                                                                                                                                                             
         * @param {string} sno - Serial number to identify records in table.                                                                                                                                                                                   
         * @param {array} oarr - Table data's Array before modifications.                                                                                                                                                                                      
         * @returns {false} Returns False if Serial number is present in Array, else returns True.                                                                                                                                                             
         */                                                                                                                                                                                                                                                    
        isSnoNotAvailable: function(sno, oarr) {                                                                                                                                                                                                               
            var len = oarr.length;                                                                                                                                                                                                                             
            for (var i = 0; i < len; i++) {                                                                                                                                                                                                                    
                if (sno === oarr[i].sno) {                                                                                                                                                                                                                     
                    return false;                                                                                                                                                                                                                              
                }                                                                                                                                                                                                                                              
            }                                                                                                                                                                                                                                                  
            return true;                                                                                                                                                                                                                                       
        },                                                                                                                                                                                                                                                     
        /**&nbsp;                                                                                                                                                                                                                                              
         * Checks if serial number is present in Table data's Array.                                                                                                                                                                                           
         * @public                                                                                                                                                                                                                                             
         * @param {string} sno - Serial number to identify records in table.                                                                                                                                                                                   
         * @param {array} marr - Modified Table data's Array.                                                                                                                                                                                                  
         * @returns {boolean} Returns record's object if Serial number is present in Array, else returns False.                                                                                                                                                
         */                                                                                                                                                                                                                                                    
        isSnoAvailable: function(sno, marr) {                                                                                                                                                                                                                  
            var len = marr.length;                                                                                                                                                                                                                             
            for (var i = 0; i < len; i++) {                                                                                                                                                                                                                    
                if (sno === marr[i].sno) {                                                                                                                                                                                                                     
                    return JSON.parse(JSON.stringify(marr[i]));                                                                                                                                                                                                
                }                                                                                                                                                                                                                                              
            }                                                                                                                                                                                                                                                  
            return false;                                                                                                                                                                                                                                      
        },                                                                                                                                                                                                                                                     
        /**&nbsp;                                                                                                                                                                                                                                              
         * Compared two Objects and returns True or False based on comparison.                                                                                                                                                                                 
         * @public                                                                                                                                                                                                                                             
         * @param {object} obj1 - Object 1 for comparison.                                                                                                                                                                                                     
         * @param {object} obj2 - Object 2 for comparison.                                                                                                                                                                                                     
         * @returns {boolean} Returns True if Objects are identical, else returns False.                                                                                                                                                                       
         */                                                                                                                                                                                                                                                    
        compareObject: function(obj1, obj2) {                                                                                                                                                                                                                  
            for (var pro in obj1) {                                                                                                                                                                                                                            
                if (obj2.hasOwnProperty(pro)) {                                                                                                                                                                                                                
                    if ((typeof obj1[pro] != "object" && typeof obj2[pro] != "object") || (obj1[pro] === null || obj2[pro] === null)) {                                                                                                                        
                        if (obj1[pro] != obj2[pro]) {                                                                                                                                                                                                          
                            return false;                                                                                                                                                                                                                      
                        }                                                                                                                                                                                                                                      
                    }                                                                                                                                                                                                                                          
                }                                                                                                                                                                                                                                              
            }                                                                                                                                                                                                                                                  
            return true;                                                                                                                                                                                                                                       
        },                                                                                                                                                                                                                                                     
            /* ------------------- END LOGIC FOR UPDATE NEW AND DELETE ----------------------------*/                                                                                                                                                          
    }                                                                                                                                                                                                                                                          
});                                                                                                                                                                                                                                                            